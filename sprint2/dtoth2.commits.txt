nav.svelte   (dylan toth on 10/07/2024 at 22:22):   import { page } from '$app/stores';
nav.svelte   (dylan toth on 10/07/2024 at 22:22):   import {getValidSpotifyAccessToken} from "$lib/utils";
nav.svelte   (dylan toth on 10/06/2024 at 02:47):   let user = null;
nav.svelte   (dylan toth on 10/06/2024 at 02:47):   let showSpotifyButton = true; // Default state to show the Spotify button
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     try {
nav.svelte   (dylan toth on 10/06/2024 at 02:47):       const session = await supabase.auth.getSession();
nav.svelte   (dylan toth on 10/06/2024 at 02:47):       user = session?.data?.session?.user;
nav.svelte   (dylan toth on 10/08/2024 at 17:08):       // console.log(user.app_metadata.provider)
nav.svelte   (dylan toth on 10/06/2024 at 02:47):       if (user) {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):         if (data) {
nav.svelte   (dylan toth on 10/06/2024 at 02:47):           // Update login button with username
nav.svelte   (dylan toth on 10/05/2024 at 20:41):           const loginButton = document.getElementById("login-button");
nav.svelte   (dylan toth on 10/05/2024 at 20:41):           loginButton.innerHTML = data.username;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):           loginButton.href = "/account";
nav.svelte   (dylan toth on 10/07/2024 at 22:22):           console.log("data: ", data)
nav.svelte   (dylan toth on 10/07/2024 at 22:22):           const accessToken = await getValidSpotifyAccessToken(user.id);
nav.svelte   (dylan toth on 10/07/2024 at 22:22):           if (accessToken) {
nav.svelte   (dylan toth on 10/06/2024 at 02:47):             showSpotifyButton = false;
nav.svelte   (dylan toth on 10/07/2024 at 22:22):             return;
nav.svelte   (dylan toth on 10/06/2024 at 02:47):           }
nav.svelte   (dylan toth on 10/08/2024 at 13:59):           else {
nav.svelte   (dylan toth on 10/08/2024 at 15:32):             console.log(user)
nav.svelte   (dylan toth on 10/08/2024 at 15:32):             if (user && user.app_metadata.provider == "spotify") {
nav.svelte   (dylan toth on 10/08/2024 at 13:59):               window.location.href = '/spotify-login';
nav.svelte   (dylan toth on 10/08/2024 at 13:59):             }
nav.svelte   (dylan toth on 10/08/2024 at 13:59):           }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):         }
nav.svelte   (dylan toth on 10/06/2024 at 02:47):       } else {
nav.svelte   (dylan toth on 10/06/2024 at 02:47):         showSpotifyButton = false;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):       }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     } catch (error) {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):       console.error("Error fetching user profile:", error);
nav.svelte   (dylan toth on 10/06/2024 at 02:47):       showSpotifyButton = false;
nav.svelte   (dylan toth on 10/06/2024 at 02:47):   const authenticateSpotify = () => {
nav.svelte   (dylan toth on 10/06/2024 at 02:47):     window.location.href = '/spotify-login';
nav.svelte   (dylan toth on 10/14/2024 at 22:29):     showSpotifyButton = false;
nav.svelte   (dylan toth on 10/06/2024 at 02:47):   };
nav.svelte   (dylan toth on 10/05/2024 at 20:41):       <a href="/"><img src={logo} alt="logo" class="logo"></a>
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         href="/" 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         class="nav-link" 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         class:active={$page.url.pathname === "/"}
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       >
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         Home
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       </a>
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       <a 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         href="/discover" 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         class="nav-link" 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         class:active={$page.url.pathname.startsWith("/discover")}
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       >
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         Discover
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       </a>
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       <a 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         href="/charts" 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         class="nav-link" 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         class:active={$page.url.pathname.startsWith("/charts")}
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       >
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         Charts
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       </a>
nav.svelte   (dylan toth on 10/15/2024 at 20:34):         <a href="/discuss" class="nav-link" class:active={$page.url.pathname.startsWith("/network")}>
nav.svelte   (dylan toth on 10/15/2024 at 20:34):           Discuss
nav.svelte   (dylan toth on 10/06/2024 at 02:47):       {#if showSpotifyButton}
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       <button on:click={authenticateSpotify} class="spotify-button">
nav.svelte   (dylan toth on 10/07/2024 at 22:22):         Connect with Spotify
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       </button>
nav.svelte   (dylan toth on 10/06/2024 at 02:47):       {/if}
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .wrapper {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     top: 0;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     background-color: #1d1f25;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   nav {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     padding: 10px;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     border-bottom: 1px solid #26282c;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     align-items: center;
nav.svelte   (dylan toth on 10/07/2024 at 22:22):   .spotify-button {
nav.svelte   (dylan toth on 10/07/2024 at 22:22): }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .left-nav,
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .right-nav {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     display: flex;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     align-items: center;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .left-nav {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     gap: 1rem; /* Add space between the logo and the links */
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .nav-link {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     font-size: 1.25rem;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     text-decoration: none;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     margin-left: 1rem;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .nav-link:hover {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .login-wrapper {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     display: flex;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     align-items: center;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .login-href {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     font-size: 1.5rem;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     color: #ebe9e5;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     text-decoration: none;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     padding-right: 20px;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   }
nav.svelte   (dylan toth on 10/07/2024 at 22:22):   .nav-link.active {
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     color: #1db954; 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):   }
nav.svelte   (dylan toth on 10/07/2024 at 22:22):   /* causes bugs */
nav.svelte   (dylan toth on 10/07/2024 at 22:22):   /* .nav-link.active::after {
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     content: '';
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     position: absolute;
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     width: 100%;
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     height: 2px;
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     background-color: #1db954; 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     bottom: -5px; 
nav.svelte   (dylan toth on 10/07/2024 at 22:22):     left: 0;
nav.svelte   (dylan toth on 10/07/2024 at 22:22):   } */
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   .logo {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     width: 50px;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     height: auto;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   @media (max-width: 768px) {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     .nav-link {
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       font-size: 1rem;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     .login-href {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):       font-size: 1.2rem;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     .logo {
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       width: 40px; 
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     .left-nav {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):       gap: 0.5rem;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):   @media (max-width: 480px) {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     nav {
nav.svelte   (dylan toth on 10/05/2024 at 20:41):       text-align: center;
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     .nav-link {
nav.svelte   (dylan toth on 10/07/2024 at 22:22):       margin: 0.5rem 0; 
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     }
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     .login-href {
nav.svelte   (dylan toth on 10/05/2024 at 22:17):       padding-right: 0; 
nav.svelte   (dylan toth on 10/05/2024 at 20:41):     }
nav.svelte   (dylan toth on 10/05/2024 at 20:41): </style>
+page.svelte (dylan toth on 10/06/2024 at 23:45):     /* box-shadow: 0px 10px 15px -3px rgba(0,0,0,0.1); */
+layout.js   (dylan toth on 10/06/2024 at 02:47): import { supabase } from '$lib/supabaseClient';
+layout.js   (dylan toth on 10/06/2024 at 02:47): export async function load({ fetch }) {
+layout.js   (dylan toth on 10/06/2024 at 02:47):   // Fetch the current session
+layout.js   (dylan toth on 10/06/2024 at 02:47):   const { data: { session }, error: sessionError } = await supabase.auth.getSession();
+layout.js   (dylan toth on 10/06/2024 at 02:47):   if (sessionError || !session) {
+layout.js   (dylan toth on 10/06/2024 at 02:47):     return { session: null, spotifyAuth: null };
+layout.js   (dylan toth on 10/06/2024 at 02:47):   }
+layout.js   (dylan toth on 10/06/2024 at 02:47):   const user = session.user;
+layout.js   (dylan toth on 10/06/2024 at 02:47):   // Check if the user has authenticated with Spotify
+layout.js   (dylan toth on 10/06/2024 at 02:47):   const { data: spotifyData, error: spotifyError } = await supabase
+layout.js   (dylan toth on 10/06/2024 at 02:47):     .from('profiles')
+layout.js   (dylan toth on 10/06/2024 at 02:47):     .select('spotify_access_token, spotify_refresh_token, spotify_token_expires')
+layout.js   (dylan toth on 10/06/2024 at 02:47):     .eq('id', user.id)
+layout.js   (dylan toth on 10/06/2024 at 02:47):     .single();
+layout.js   (dylan toth on 10/06/2024 at 02:47):   if (spotifyError || !spotifyData.spotify_access_token) {
+layout.js   (dylan toth on 10/06/2024 at 02:47):     return {
+layout.js   (dylan toth on 10/06/2024 at 02:47):       session,
+layout.js   (dylan toth on 10/06/2024 at 02:47):       spotifyAuth: null, // User hasn't authenticated with Spotify
+layout.js   (dylan toth on 10/06/2024 at 02:47):     };
+layout.js   (dylan toth on 10/06/2024 at 02:47):   }
+layout.js   (dylan toth on 10/06/2024 at 02:47):   // Return the session and Spotify auth data
+layout.js   (dylan toth on 10/06/2024 at 02:47):   return {
+layout.js   (dylan toth on 10/06/2024 at 02:47):     session,
+layout.js   (dylan toth on 10/06/2024 at 02:47):     spotifyAuth: {
+layout.js   (dylan toth on 10/06/2024 at 02:47):       access_token: spotifyData.spotify_access_token,
+layout.js   (dylan toth on 10/06/2024 at 02:47):       refresh_token: spotifyData.spotify_refresh_token,
+layout.js   (dylan toth on 10/06/2024 at 02:47):       token_expires: spotifyData.spotify_token_expires,
+layout.js   (dylan toth on 10/06/2024 at 02:47):     },
+layout.js   (dylan toth on 10/06/2024 at 02:47):   };
+layout.js   (dylan toth on 10/06/2024 at 02:47): }
+page.svelte (dylan toth on 10/15/2024 at 20:52): <script>
+page.svelte (dylan toth on 10/15/2024 at 20:52):     import { onMount } from 'svelte';
+page.svelte (dylan toth on 10/15/2024 at 20:52):     import {spotify} from '$lib/spotifyClient';
+page.svelte (dylan toth on 10/15/2024 at 20:52):     import {authenticateClientCredentials} from "$lib/utils";
+page.svelte (dylan toth on 10/15/2024 at 20:52):     import { goto } from '$app/navigation';
+page.svelte (dylan toth on 10/15/2024 at 20:52):     export let data;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     let { reviews, song_id } = data;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     // State variables
+page.svelte (dylan toth on 10/15/2024 at 20:52):     let songDetails = {
+page.svelte (dylan toth on 10/15/2024 at 20:52):       title: 'Loading...',
+page.svelte (dylan toth on 10/15/2024 at 20:52):       artist: '',
+page.svelte (dylan toth on 10/15/2024 at 20:52):       image_url: 'https://placehold.co/300',
+page.svelte (dylan toth on 10/15/2024 at 20:52):     };
+page.svelte (dylan toth on 10/15/2024 at 20:52):     let loading = true;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     let error = null;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     // Spotify Authentication
+page.svelte (dylan toth on 10/15/2024 at 20:52):     onMount(async () => {
+page.svelte (dylan toth on 10/15/2024 at 20:52):       try {
+page.svelte (dylan toth on 10/15/2024 at 20:52):         await authenticateClientCredentials();
+page.svelte (dylan toth on 10/15/2024 at 20:52):         // Fetch song details from Spotify
+page.svelte (dylan toth on 10/15/2024 at 20:52):         const data = await spotify.getTrack(song_id);
+page.svelte (dylan toth on 10/15/2024 at 20:52):         if (data) {
+page.svelte (dylan toth on 10/15/2024 at 20:52):           songDetails = {
+page.svelte (dylan toth on 10/15/2024 at 20:52):             title: data.name,
+page.svelte (dylan toth on 10/15/2024 at 20:52):             artist: data.artists.map((artist) => artist.name).join(', '),
+page.svelte (dylan toth on 10/15/2024 at 20:52):             image_url: data.album.images[0]?.url || 'https://placehold.co/300',
+page.svelte (dylan toth on 10/15/2024 at 20:52):           };
+page.svelte (dylan toth on 10/15/2024 at 20:52):         } else {
+page.svelte (dylan toth on 10/15/2024 at 20:52):           console.log('No track found for the given ID.');
+page.svelte (dylan toth on 10/15/2024 at 20:52):           songDetails = {
+page.svelte (dylan toth on 10/15/2024 at 20:52):             title: 'Unknown Title',
+page.svelte (dylan toth on 10/15/2024 at 20:52):             artist: 'Unknown Artist',
+page.svelte (dylan toth on 10/15/2024 at 20:52):             image_url: 'https://placehold.co/300',
+page.svelte (dylan toth on 10/15/2024 at 20:52):           };
+page.svelte (dylan toth on 10/15/2024 at 20:52):         }
+page.svelte (dylan toth on 10/15/2024 at 20:52):       } catch (err) {
+page.svelte (dylan toth on 10/15/2024 at 20:52):         console.error('Error fetching song details:', err);
+page.svelte (dylan toth on 10/15/2024 at 20:52):         error = err.message;
+page.svelte (dylan toth on 10/15/2024 at 20:52):       } finally {
+page.svelte (dylan toth on 10/15/2024 at 20:52):         loading = false;
+page.svelte (dylan toth on 10/15/2024 at 20:52):       }
+page.svelte (dylan toth on 10/15/2024 at 20:52):     });
+page.svelte (dylan toth on 10/15/2024 at 20:52):   </script>
+page.svelte (dylan toth on 10/15/2024 at 20:52): {#if loading}
+page.svelte (dylan toth on 10/15/2024 at 20:52):   <p>Loading song details...</p>
+page.svelte (dylan toth on 10/15/2024 at 20:52): {:else if error}
+page.svelte (dylan toth on 10/15/2024 at 20:52):   <p>Error: {error}</p>
+page.svelte (dylan toth on 10/15/2024 at 20:52): {:else}
+page.svelte (dylan toth on 10/15/2024 at 20:52):   <div class="song-details">
+page.svelte (dylan toth on 10/15/2024 at 20:52):     <img src={songDetails.image_url} alt="{songDetails.title} album cover" />
+page.svelte (dylan toth on 10/15/2024 at 20:52):     <div class="song-info">
+page.svelte (dylan toth on 10/15/2024 at 20:52):       <h1>{songDetails.title}</h1>
+page.svelte (dylan toth on 10/15/2024 at 20:52):       <p>by {songDetails.artist}</p>
+page.svelte (dylan toth on 10/15/2024 at 20:52):     </div>
+page.svelte (dylan toth on 10/15/2024 at 20:52):   </div>
+page.svelte (dylan toth on 10/15/2024 at 20:52):   <h2>Reviews</h2>
+page.svelte (dylan toth on 10/15/2024 at 20:52):   {#if reviews.length > 0}
+page.svelte (dylan toth on 10/15/2024 at 20:52):     <div class="reviews-list">
+page.svelte (dylan toth on 10/15/2024 at 20:52):       {#each reviews as review}
+page.svelte (dylan toth on 10/15/2024 at 20:52):         <div class="review-item">
+page.svelte (dylan toth on 10/15/2024 at 20:52):           <div class="user-info">
+page.svelte (dylan toth on 10/15/2024 at 20:52):             <img src={review.profiles.avatar_url || 'https://placehold.co/50'} alt="User avatar" />
+page.svelte (dylan toth on 10/15/2024 at 20:52):             <span>{review.profiles.username}</span>
+page.svelte (dylan toth on 10/15/2024 at 20:52):           </div>
+page.svelte (dylan toth on 10/15/2024 at 20:52):           <div class="review-content">
+page.svelte (dylan toth on 10/15/2024 at 20:52):             <p>{review.content}</p>
+page.svelte (dylan toth on 10/15/2024 at 20:52):             {#if review.rating}
+page.svelte (dylan toth on 10/15/2024 at 20:52):               <p class="rating">Rating: {review.rating}/10</p>
+page.svelte (dylan toth on 10/15/2024 at 20:52):             {/if}
+page.svelte (dylan toth on 10/15/2024 at 20:52):           </div>
+page.svelte (dylan toth on 10/15/2024 at 20:52):         </div>
+page.svelte (dylan toth on 10/15/2024 at 20:52):       {/each}
+page.svelte (dylan toth on 10/15/2024 at 20:52):     </div>
+page.svelte (dylan toth on 10/15/2024 at 20:52):   {:else}
+page.svelte (dylan toth on 10/15/2024 at 20:52):     <p>No reviews yet. Be the first to review!</p>
+page.svelte (dylan toth on 10/15/2024 at 20:52):   {/if}
+page.svelte (dylan toth on 10/15/2024 at 20:52): {/if}
+page.svelte (dylan toth on 10/15/2024 at 20:52): <style>
+page.svelte (dylan toth on 10/15/2024 at 20:52):   /* Add your styles here */
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .song-details {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     display: flex;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     align-items: center;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin-bottom: 20px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .song-details img {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     width: 200px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     height: 200px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     object-fit: cover;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     border-radius: 8px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin-right: 20px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .song-info h1 {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin: 0;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     font-size: 2rem;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .song-info p {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin: 5px 0;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     font-size: 1.2rem;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     color: #888;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .reviews-list {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin-top: 20px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .review-item {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     background-color: #1d1f25;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     color: #f3f1f1;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     padding: 15px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     border-radius: 8px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin-bottom: 15px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .user-info {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     display: flex;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     align-items: center;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .user-info img {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     width: 40px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     height: 40px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     border-radius: 50%;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin-right: 10px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .review-content {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin-top: 10px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52):   .rating {
+page.svelte (dylan toth on 10/15/2024 at 20:52):     margin-top: 10px;
+page.svelte (dylan toth on 10/15/2024 at 20:52):     font-weight: bold;
+page.svelte (dylan toth on 10/15/2024 at 20:52):   }
+page.svelte (dylan toth on 10/15/2024 at 20:52): </style>
+page.svelte (dylan toth on 10/15/2024 at 00:01): <script>
+page.svelte (dylan toth on 10/15/2024 at 21:04):     import { onMount } from "svelte";
+page.svelte (dylan toth on 10/15/2024 at 21:04):     import { spotify } from "$lib/spotifyClient";
+page.svelte (dylan toth on 10/15/2024 at 21:04):     import { authenticateClientCredentials } from "$lib/utils";
+page.svelte (dylan toth on 10/15/2024 at 21:04):     export let data;
+page.svelte (dylan toth on 10/15/2024 at 21:04):     let { popularSongs } = data;
+page.svelte (dylan toth on 10/15/2024 at 21:04):     let songsDetailsMap = {};
+page.svelte (dylan toth on 10/15/2024 at 21:04):     let loading = true;
+page.svelte (dylan toth on 10/15/2024 at 21:04):     let error = null;
+page.svelte (dylan toth on 10/15/2024 at 21:04):     onMount(async () => {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       try {
+page.svelte (dylan toth on 10/15/2024 at 21:04):         await authenticateClientCredentials();
+page.svelte (dylan toth on 10/15/2024 at 21:04):         const songIds = popularSongs.map((song) => song.song_id);
+page.svelte (dylan toth on 10/15/2024 at 21:04):         const data = await spotify.getTracks(songIds);
+page.svelte (dylan toth on 10/15/2024 at 21:04):         if (data && data.tracks) {
+page.svelte (dylan toth on 10/15/2024 at 21:04):           data.tracks.forEach((track) => {
+page.svelte (dylan toth on 10/15/2024 at 21:04):             if (track) {
+page.svelte (dylan toth on 10/15/2024 at 21:04):               songsDetailsMap[track.id] = {
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 title: track.name,
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 artist: track.artists.map((artist) => artist.name).join(", "),
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 image_url:
+page.svelte (dylan toth on 10/15/2024 at 21:04):                   track.album.images[0]?.url || "https://placehold.co/300",
+page.svelte (dylan toth on 10/15/2024 at 21:04):               };
+page.svelte (dylan toth on 10/15/2024 at 21:04):             }
+page.svelte (dylan toth on 10/15/2024 at 21:04):           });
+page.svelte (dylan toth on 10/15/2024 at 21:04):         } else {
+page.svelte (dylan toth on 10/15/2024 at 21:04):           console.log("No tracks found for the given IDs.");
+page.svelte (dylan toth on 10/15/2024 at 21:04):         }
+page.svelte (dylan toth on 10/15/2024 at 21:04):       } catch (err) {
+page.svelte (dylan toth on 10/15/2024 at 21:04):         console.error("Error fetching song details:", err);
+page.svelte (dylan toth on 10/15/2024 at 21:04):         error = err.message;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       } finally {
+page.svelte (dylan toth on 10/15/2024 at 21:04):         loading = false;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     });
+page.svelte (dylan toth on 10/15/2024 at 21:04):   </script>
+page.svelte (dylan toth on 10/15/2024 at 21:04):   <div class="wrapper">
+page.svelte (dylan toth on 10/15/2024 at 21:04):     <h1 class="header">Discuss - Popular Songs</h1>
+page.svelte (dylan toth on 10/15/2024 at 21:04):     <div class="post-wrapper">
+page.svelte (dylan toth on 10/15/2024 at 21:04):       {#if loading}
+page.svelte (dylan toth on 10/15/2024 at 21:04):         <p>Loading song details...</p>
+page.svelte (dylan toth on 10/15/2024 at 21:04):       {:else if error}
+page.svelte (dylan toth on 10/15/2024 at 21:04):         <p>Error: {error}</p>
+page.svelte (dylan toth on 10/15/2024 at 21:04):       {:else}
+page.svelte (dylan toth on 10/15/2024 at 21:04):         <div class="songs-list">
+page.svelte (dylan toth on 10/15/2024 at 21:04):           {#each popularSongs as song}
+page.svelte (dylan toth on 10/15/2024 at 21:04):             <div class="song-item">
+page.svelte (dylan toth on 10/15/2024 at 21:04):               <img
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 src={songsDetailsMap[song.song_id]?.image_url ||
+page.svelte (dylan toth on 10/15/2024 at 21:04):                   "https://placehold.co/300"}
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 alt="{songsDetailsMap[song.song_id]?.title ||
+page.svelte (dylan toth on 10/15/2024 at 21:04):                   'Unknown Title'} album cover"
+page.svelte (dylan toth on 10/15/2024 at 21:04):               />
+page.svelte (dylan toth on 10/15/2024 at 21:04):               <div class="song-info">
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 <h2>{songsDetailsMap[song.song_id]?.title || "Unknown Title"}</h2>
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 <p>{songsDetailsMap[song.song_id]?.artist || "Unknown Artist"}</p>
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 <p>{song.review_count} reviews</p>
+page.svelte (dylan toth on 10/15/2024 at 21:04):                 <a href="/discuss/{song.song_id}">View Discussions</a>
+page.svelte (dylan toth on 10/15/2024 at 21:04):               </div>
+page.svelte (dylan toth on 10/15/2024 at 21:04):             </div>
+page.svelte (dylan toth on 10/15/2024 at 21:04):           {/each}
+page.svelte (dylan toth on 10/15/2024 at 00:01):         </div>
+page.svelte (dylan toth on 10/15/2024 at 21:04):       {/if}
+page.svelte (dylan toth on 10/15/2024 at 21:04):     </div>
+page.svelte (dylan toth on 10/15/2024 at 00:01):   </div>
+page.svelte (dylan toth on 10/15/2024 at 00:01): <style>
+page.svelte (dylan toth on 10/15/2024 at 21:04):     .header {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       text-align: center;
+page.svelte (dylan toth on 10/15/2024 at 21:04):     }
+page.svelte (dylan toth on 10/15/2024 at 20:34):     .wrapper {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       display: flex;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       flex-direction: column;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       padding: 20px;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       margin-bottom: 40vh;
+page.svelte (dylan toth on 10/15/2024 at 21:04):     }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     .post-wrapper {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       flex: 1;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       display: flex;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       justify-content: center;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       align-items: center;
+page.svelte (dylan toth on 10/15/2024 at 20:34):     }
+page.svelte (dylan toth on 10/15/2024 at 00:01):     .songs-list {
+page.svelte (dylan toth on 10/15/2024 at 00:01):       display: flex;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       flex-wrap: wrap;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       gap: 20px;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       justify-content: center;
+page.svelte (dylan toth on 10/15/2024 at 00:01):     }
+page.svelte (dylan toth on 10/15/2024 at 00:01):     .song-item {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       display: flex;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       flex-direction: column;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       flex: 1 1 calc(25% - 40px);
+page.svelte (dylan toth on 10/15/2024 at 21:04):       max-width: 200px;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       background-color: #1d1f25;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       color: #f3f1f1;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       padding: 10px;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       border-radius: 8px;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       text-align: center;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       box-sizing: border-box;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       border: 1px solid #26282c;
+page.svelte (dylan toth on 10/15/2024 at 00:01):     }
+page.svelte (dylan toth on 10/15/2024 at 00:01):     .song-item img {
+page.svelte (dylan toth on 10/15/2024 at 00:01):       width: 100%;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       height: auto;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       border-radius: 8px;
+page.svelte (dylan toth on 10/15/2024 at 00:01):     }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     .song-info {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       display: flex;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       flex-direction: column;
+page.svelte (dylan toth on 10/15/2024 at 21:04):       flex: 1;
+page.svelte (dylan toth on 10/15/2024 at 21:04):     }
+page.svelte (dylan toth on 10/15/2024 at 00:01):     .song-info h2 {
+page.svelte (dylan toth on 10/15/2024 at 00:01):       margin: 10px 0 5px;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       font-size: 1.2rem;
+page.svelte (dylan toth on 10/15/2024 at 00:01):     }
+page.svelte (dylan toth on 10/15/2024 at 00:01):     .song-info p {
+page.svelte (dylan toth on 10/15/2024 at 00:01):       margin: 5px 0;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       font-size: 1rem;
+page.svelte (dylan toth on 10/15/2024 at 00:01):     }
+page.svelte (dylan toth on 10/15/2024 at 00:01):     .song-info a {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       margin-top: auto;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       display: inline-block;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       padding: 5px 10px;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       background-color: #007bff;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       color: #ffffff;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       border-radius: 4px;
+page.svelte (dylan toth on 10/15/2024 at 00:01):       text-decoration: none;
+page.svelte (dylan toth on 10/15/2024 at 00:01):     }
+page.svelte (dylan toth on 10/15/2024 at 00:01):     .song-info a:hover {
+page.svelte (dylan toth on 10/15/2024 at 00:01):       background-color: #0056b3;
+page.svelte (dylan toth on 10/15/2024 at 00:01):     }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     @media (max-width: 1024px) {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       .song-item {
+page.svelte (dylan toth on 10/15/2024 at 21:04):         flex: 1 1 calc(33.333% - 40px);
+page.svelte (dylan toth on 10/15/2024 at 21:04):       }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     @media (max-width: 768px) {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       .song-item {
+page.svelte (dylan toth on 10/15/2024 at 21:04):         flex: 1 1 calc(50% - 40px); 
+page.svelte (dylan toth on 10/15/2024 at 21:04):       }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     @media (max-width: 480px) {
+page.svelte (dylan toth on 10/15/2024 at 21:04):       .song-item {
+page.svelte (dylan toth on 10/15/2024 at 21:04):         flex: 1 1 calc(100% - 40px);
+page.svelte (dylan toth on 10/15/2024 at 21:04):       }
+page.svelte (dylan toth on 10/15/2024 at 21:04):     }
+page.svelte (dylan toth on 10/15/2024 at 21:04):   </style>
+server.js   (dylan toth on 10/07/2024 at 22:22): // src/routes/api/refresh-spotify-token/+server.js
+server.js   (dylan toth on 10/07/2024 at 22:22): import { json } from '@sveltejs/kit';
+server.js   (dylan toth on 10/07/2024 at 22:22): import { supabase } from '$lib/supabaseClient';
+server.js   (dylan toth on 10/07/2024 at 22:22): import {
+server.js   (dylan toth on 10/07/2024 at 22:22):   SPOTIFY_CLIENT_ID,
+server.js   (dylan toth on 10/07/2024 at 22:22):   SPOTIFY_CLIENT_SECRET,
+server.js   (dylan toth on 10/07/2024 at 22:22): } from '$env/static/private';
+server.js   (dylan toth on 10/07/2024 at 22:22): import pkg from 'base-64';
+server.js   (dylan toth on 10/07/2024 at 22:22): const { encode } = pkg;
+server.js   (dylan toth on 10/07/2024 at 22:22): /**
+server.js   (dylan toth on 10/07/2024 at 22:22):  * Handles POST requests to refresh Spotify access tokens.
+server.js   (dylan toth on 10/07/2024 at 22:22):  * Expects a JSON body containing the userId.
+server.js   (dylan toth on 10/07/2024 at 22:22):  */
+server.js   (dylan toth on 10/07/2024 at 22:22): export async function POST({ request }) {
+server.js   (dylan toth on 10/07/2024 at 22:22):   try {
+server.js   (dylan toth on 10/07/2024 at 22:22):     const { userId } = await request.json();
+server.js   (dylan toth on 10/07/2024 at 22:22):     if (!userId) {
+server.js   (dylan toth on 10/07/2024 at 22:22):       return json(
+server.js   (dylan toth on 10/07/2024 at 22:22):         { success: false, message: 'User ID is required' },
+server.js   (dylan toth on 10/07/2024 at 22:22):         { status: 400 }
+server.js   (dylan toth on 10/07/2024 at 22:22):       );
+server.js   (dylan toth on 10/07/2024 at 22:22):     }
+server.js   (dylan toth on 10/07/2024 at 22:22):     // Fetch the user's refresh token from Supabase
+server.js   (dylan toth on 10/07/2024 at 22:22):     const { data: profile, error: profileError } = await supabase
+server.js   (dylan toth on 10/07/2024 at 22:22):       .from('profiles')
+server.js   (dylan toth on 10/07/2024 at 22:22):       .select('spotify_refresh_token')
+server.js   (dylan toth on 10/07/2024 at 22:22):       .eq('id', userId)
+server.js   (dylan toth on 10/07/2024 at 22:22):       .single();
+server.js   (dylan toth on 10/07/2024 at 22:22):     if (profileError || !profile?.spotify_refresh_token) {
+server.js   (dylan toth on 10/07/2024 at 22:22):       return json(
+server.js   (dylan toth on 10/07/2024 at 22:22):         { success: false, message: 'No refresh token available' },
+server.js   (dylan toth on 10/07/2024 at 22:22):         { status: 400 }
+server.js   (dylan toth on 10/07/2024 at 22:22):       );
+server.js   (dylan toth on 10/07/2024 at 22:22):     }
+server.js   (dylan toth on 10/07/2024 at 22:22):     const refresh_token = profile.spotify_refresh_token;
+server.js   (dylan toth on 10/07/2024 at 22:22):     // Prepare the request to Spotify's token endpoint
+server.js   (dylan toth on 10/07/2024 at 22:22):     const tokenResponse = await fetch('https://accounts.spotify.com/api/token', {
+server.js   (dylan toth on 10/07/2024 at 22:22):       method: 'POST',
+server.js   (dylan toth on 10/07/2024 at 22:22):       headers: {
+server.js   (dylan toth on 10/07/2024 at 22:22):         'Content-Type': 'application/x-www-form-urlencoded',
+server.js   (dylan toth on 10/07/2024 at 22:22):         Authorization:
+server.js   (dylan toth on 10/07/2024 at 22:22):           'Basic ' +
+server.js   (dylan toth on 10/07/2024 at 22:22):           encode(`${SPOTIFY_CLIENT_ID}:${SPOTIFY_CLIENT_SECRET}`),
+server.js   (dylan toth on 10/07/2024 at 22:22):       },
+server.js   (dylan toth on 10/07/2024 at 22:22):       body: new URLSearchParams({
+server.js   (dylan toth on 10/07/2024 at 22:22):         grant_type: 'refresh_token',
+server.js   (dylan toth on 10/07/2024 at 22:22):         refresh_token,
+server.js   (dylan toth on 10/07/2024 at 22:22):       }),
+server.js   (dylan toth on 10/07/2024 at 22:22):     });
+server.js   (dylan toth on 10/07/2024 at 22:22):     const tokenData = await tokenResponse.json();
+server.js   (dylan toth on 10/07/2024 at 22:22):     if (tokenData.error) {
+server.js   (dylan toth on 10/07/2024 at 22:22):       console.error('Error refreshing Spotify token:', tokenData.error);
+server.js   (dylan toth on 10/07/2024 at 22:22):       return json(
+server.js   (dylan toth on 10/07/2024 at 22:22):         { success: false, message: tokenData.error_description || tokenData.error },
+server.js   (dylan toth on 10/07/2024 at 22:22):         { status: 400 }
+server.js   (dylan toth on 10/07/2024 at 22:22):       );
+server.js   (dylan toth on 10/07/2024 at 22:22):     }
+server.js   (dylan toth on 10/07/2024 at 22:22):     const { access_token, expires_in } = tokenData;
+server.js   (dylan toth on 10/07/2024 at 22:22):     const expires_at = new Date(Date.now() + expires_in * 1000).toISOString();
+server.js   (dylan toth on 10/07/2024 at 22:22):     // Update the user's profile in Supabase with the new access token and expiration time
+server.js   (dylan toth on 10/07/2024 at 22:22):     const { error: updateError } = await supabase
+server.js   (dylan toth on 10/07/2024 at 22:22):       .from('profiles')
+server.js   (dylan toth on 10/07/2024 at 22:22):       .update({
+server.js   (dylan toth on 10/07/2024 at 22:22):         spotify_access_token: access_token,
+server.js   (dylan toth on 10/07/2024 at 22:22):         spotify_token_expires: expires_at,
+server.js   (dylan toth on 10/07/2024 at 22:22):       })
+server.js   (dylan toth on 10/07/2024 at 22:22):       .eq('id', userId);
+server.js   (dylan toth on 10/07/2024 at 22:22):     if (updateError) {
+server.js   (dylan toth on 10/07/2024 at 22:22):       console.error('Error updating Spotify access token:', updateError);
+server.js   (dylan toth on 10/07/2024 at 22:22):       return json(
+server.js   (dylan toth on 10/07/2024 at 22:22):         { success: false, message: updateError.message },
+server.js   (dylan toth on 10/07/2024 at 22:22):         { status: 500 }
+server.js   (dylan toth on 10/07/2024 at 22:22):       );
+server.js   (dylan toth on 10/07/2024 at 22:22):     }
+server.js   (dylan toth on 10/07/2024 at 22:22):     return json({ success: true, access_token, expires_in });
+server.js   (dylan toth on 10/07/2024 at 22:22):   } catch (error) {
+server.js   (dylan toth on 10/07/2024 at 22:22):     console.error('Unexpected error in refresh-spotify-token:', error);
+server.js   (dylan toth on 10/07/2024 at 22:22):     return json(
+server.js   (dylan toth on 10/07/2024 at 22:22):       { success: false, message: 'Internal server error' },
+server.js   (dylan toth on 10/07/2024 at 22:22):       { status: 500 }
+server.js   (dylan toth on 10/07/2024 at 22:22):     );
+server.js   (dylan toth on 10/07/2024 at 22:22):   }
+server.js   (dylan toth on 10/07/2024 at 22:22): }
+page.svelte (dylan toth on 10/06/2024 at 20:05): <script>
+page.svelte (dylan toth on 10/14/2024 at 13:35):   import { onMount, onDestroy } from "svelte";
+page.svelte (dylan toth on 10/14/2024 at 13:35):   import { supabase } from "$lib/supabaseClient";
+page.svelte (dylan toth on 10/14/2024 at 13:35):   import { followUser, unfollowUser } from "$lib/utils.js"; 
+page.svelte (dylan toth on 10/14/2024 at 13:35):   import { page } from '$app/stores'; 
+page.svelte (dylan toth on 10/14/2024 at 13:35):   import {user } from "$lib/stores"
+page.svelte (dylan toth on 10/14/2024 at 13:35):   let currentUser = null;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     const unsubscribe = user.subscribe(value => {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       currentUser = value;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       // if (currentUser) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):         // checkIfLiked();
+page.svelte (dylan toth on 10/14/2024 at 13:35):       // }
+page.svelte (dylan toth on 10/06/2024 at 20:05):     });
+page.svelte (dylan toth on 10/14/2024 at 13:35):     onDestroy(() => {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       unsubscribe();
+page.svelte (dylan toth on 10/14/2024 at 13:35):     });
+page.svelte (dylan toth on 10/14/2024 at 13:35):   let profile = null;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   let isFriend = false;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   let slug = $page.params.slug; 
+page.svelte (dylan toth on 10/14/2024 at 13:35):   onMount(async () => {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     const { data, error } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 13:35):       .from('profiles')
+page.svelte (dylan toth on 10/14/2024 at 13:35):       .select('*')
+page.svelte (dylan toth on 10/14/2024 at 13:35):       .eq('username', slug)
+page.svelte (dylan toth on 10/14/2024 at 13:35):       .single();
+page.svelte (dylan toth on 10/14/2024 at 13:35):     if (error) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       console.error('Error fetching user profile:', error);
+page.svelte (dylan toth on 10/14/2024 at 13:35):     } else {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       profile = data;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):     console.log("current user", currentUser)
+page.svelte (dylan toth on 10/14/2024 at 13:35):     if (currentUser && currentUser.id) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       const { data: followData, error: followError } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 13:35):         .from('follows')
+page.svelte (dylan toth on 10/14/2024 at 13:35):         .select('*')
+page.svelte (dylan toth on 10/14/2024 at 13:35):         .eq('owner_id', currentUser.id)
+page.svelte (dylan toth on 10/14/2024 at 13:35):         .eq('followed_id', profile.id);
+page.svelte (dylan toth on 10/14/2024 at 13:35):       if (followError) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):         console.error('Error fetching follow data:', followError);
+page.svelte (dylan toth on 10/14/2024 at 13:35):       } else if (followData && followData.length > 0) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):         isFriend = true;
+page.svelte (dylan toth on 10/06/2024 at 20:05):       }
+page.svelte (dylan toth on 10/06/2024 at 20:05):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   });
+page.svelte (dylan toth on 10/14/2024 at 13:35):   async function follow() {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     const userSession = await supabase.auth.getSession();
+page.svelte (dylan toth on 10/14/2024 at 13:35):     const userId = userSession?.data?.session?.user?.id;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     if (userId && profile) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       const { success, error } = await followUser(profile.id);
+page.svelte (dylan toth on 10/14/2024 at 13:35):       if (success) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):         isFriend = true;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       } else {
+page.svelte (dylan toth on 10/14/2024 at 13:35):         console.error('Error following user:', error.message);
+page.svelte (dylan toth on 10/06/2024 at 20:05):       }
+page.svelte (dylan toth on 10/06/2024 at 20:05):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   async function unfollow() {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     const userSession = await supabase.auth.getSession();
+page.svelte (dylan toth on 10/14/2024 at 13:35):     const userId = userSession?.data?.session?.user?.id;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     if (userId && profile) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       const { success, error } = await unfollowUser(profile.id);
+page.svelte (dylan toth on 10/14/2024 at 13:35):       if (success) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):         isFriend = false;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       } else {
+page.svelte (dylan toth on 10/14/2024 at 13:35):         console.error('Error unfollowing user:', error.message);
+page.svelte (dylan toth on 10/14/2024 at 13:35):       }
+page.svelte (dylan toth on 10/14/2024 at 13:35):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35): </script>
+page.svelte (dylan toth on 10/14/2024 at 13:35): {#if profile}
+page.svelte (dylan toth on 10/14/2024 at 13:35):   <div class="profile-container">
+page.svelte (dylan toth on 10/14/2024 at 13:35):     <div class="profile-header">
+page.svelte (dylan toth on 10/14/2024 at 13:35):       <img class="profile-avatar" src={profile.avatar_url || 'https://placehold.co/150'} alt={`${profile.username}'s avatar`} />
+page.svelte (dylan toth on 10/14/2024 at 13:35):       <div class="profile-info">
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <h1 class="profile-username">{profile.username}</h1>
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <p class="profile-bio">{profile.bio || 'No bio available.'}</p>
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <div class="profile-actions">
+page.svelte (dylan toth on 10/14/2024 at 13:35):           <!-- {#if profile.id !== $user?.id} Prevent users from following themselves -->
+page.svelte (dylan toth on 10/14/2024 at 13:35):             {#if isFriend}
+page.svelte (dylan toth on 10/14/2024 at 13:35):               <button class="unfollow-button" on:click={unfollow}>Unfollow</button>
+page.svelte (dylan toth on 10/14/2024 at 13:35):             {:else}
+page.svelte (dylan toth on 10/14/2024 at 13:35):               <button class="follow-button" on:click={follow}>Follow</button>
+page.svelte (dylan toth on 10/14/2024 at 13:35):             {/if}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           <!-- {/if} -->
+page.svelte (dylan toth on 10/14/2024 at 13:35):         </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       </div>
+page.svelte (dylan toth on 10/06/2024 at 20:05):     </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35):     <div class="profile-stats">
+page.svelte (dylan toth on 10/14/2024 at 13:35):       <div class="stat">
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <span class="stat-number">{profile.posts_count || 0}</span>
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <span class="stat-label">Posts</span>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       <div class="stat">
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <span class="stat-number">{profile.followers_count || 0}</span>
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <span class="stat-label">Followers</span>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       <div class="stat">
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <span class="stat-number">{profile.following_count || 0}</span>
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <span class="stat-label">Following</span>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35):     </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35):     <!-- Optional: Display User's Posts -->
+page.svelte (dylan toth on 10/14/2024 at 13:35):     <div class="user-posts">
+page.svelte (dylan toth on 10/14/2024 at 13:35):       <h2>Recent Posts</h2>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       <!-- {#each profile.posts as post (post.id)}
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <Post
+page.svelte (dylan toth on 10/14/2024 at 13:35):           logged_in_user_uuid={currentUser?.id}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           uuid={post.profile_id}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           rating={post.rating}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           desc={post.content}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           song_id={post.song_id}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           song_title={post.song?.title}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           song_artist={post.song?.artist}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           song_image={post.song?.image}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           likes_cnt={post.likes_count}
+page.svelte (dylan toth on 10/14/2024 at 13:35):           post_id={post.id}
+page.svelte (dylan toth on 10/14/2024 at 13:35):         />
+page.svelte (dylan toth on 10/14/2024 at 13:35):       {/each}
+page.svelte (dylan toth on 10/14/2024 at 13:35):       {#if profile.posts.length === 0}
+page.svelte (dylan toth on 10/14/2024 at 13:35):         <p class="no-posts">This user hasn't made any posts yet.</p>
+page.svelte (dylan toth on 10/14/2024 at 13:35):       {/if} -->
+page.svelte (dylan toth on 10/14/2024 at 13:35):     </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35):   </div>
+page.svelte (dylan toth on 10/14/2024 at 13:35): {:else}
+page.svelte (dylan toth on 10/14/2024 at 13:35):   <p class="loading">Loading profile...</p>
+page.svelte (dylan toth on 10/14/2024 at 13:35): {/if}
+page.svelte (dylan toth on 10/14/2024 at 13:35): <style>
+page.svelte (dylan toth on 10/14/2024 at 13:35):   /* Base Styles */
+page.svelte (dylan toth on 10/14/2024 at 13:35):   *,
+page.svelte (dylan toth on 10/14/2024 at 13:35):   *::before,
+page.svelte (dylan toth on 10/14/2024 at 13:35):   *::after {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     box-sizing: border-box;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   body {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     background-color: #121212; /* Dark background consistent with main page */
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #f3f1f1;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-family: 'Concert One', sans-serif;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-container {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     max-width: 1000px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin: 40px auto;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     padding: 20px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     background-color: #1d1f25;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #f3f1f1;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     border: 1px solid #26282c;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     border-radius: 8px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-header {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     display: flex;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     align-items: center;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin-bottom: 30px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-avatar {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     width: 150px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     height: 150px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     border-radius: 50%;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     object-fit: cover;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin-right: 30px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     border: 3px solid #26282c;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-info {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     flex: 1;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-username {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-size: 2rem;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin: 0 0 10px 0;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #e4e4e4;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-bio {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-size: 1.1rem;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #b9b9b9;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin-bottom: 20px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-actions {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     display: flex;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     gap: 10px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .follow-button,
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .unfollow-button {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     padding: 10px 20px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     border: none;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     border-radius: 6px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     cursor: pointer;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-size: 1rem;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     transition: background-color 0.3s;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .follow-button {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     background-color: #007bff;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #ffffff;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .follow-button:hover {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     background-color: #0056b3;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .unfollow-button {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     background-color: #dc3545;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #ffffff;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .unfollow-button:hover {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     background-color: #c82333;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .profile-stats {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     display: flex;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     justify-content: space-around;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin-bottom: 30px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     padding: 20px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     background-color: #2a2d35;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     border-radius: 8px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .stat {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     text-align: center;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .stat-number {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     display: block;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-size: 1.5rem;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-weight: bold;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #ffc107;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .stat-label {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-size: 1rem;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #a9a9a9;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .user-posts {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin-top: 30px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .user-posts h2 {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     margin-bottom: 20px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #ffffff;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-size: 1.8rem;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .no-posts {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #a9a9a9;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-style: italic;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     text-align: center;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   .loading {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     text-align: center;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     color: #a9a9a9;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     font-size: 1.2rem;
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   /* Responsive Design */
+page.svelte (dylan toth on 10/14/2024 at 13:35):   @media (max-width: 768px) {
+page.svelte (dylan toth on 10/14/2024 at 13:35):     .profile-header {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       flex-direction: column;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       align-items: center;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       text-align: center;
+page.svelte (dylan toth on 10/06/2024 at 20:05):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):     .profile-avatar {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       margin-right: 0;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       margin-bottom: 20px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       width: 120px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       height: 120px;
+page.svelte (dylan toth on 10/06/2024 at 20:05):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):     .profile-stats {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       flex-direction: column;
+page.svelte (dylan toth on 10/14/2024 at 13:35):       gap: 15px;
+page.svelte (dylan toth on 10/14/2024 at 13:35):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):     .user-posts h2 {
+page.svelte (dylan toth on 10/14/2024 at 13:35):       font-size: 1.5rem;
+page.svelte (dylan toth on 10/06/2024 at 20:05):     }
+page.svelte (dylan toth on 10/14/2024 at 13:35):   }
+page.svelte (dylan toth on 10/14/2024 at 13:35): </style>
followButton.svelte (dylan toth on 10/06/2024 at 19:22): <script>
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     import { onMount } from 'svelte';
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     import { followUser, unfollowUser } from '$lib/utils';
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     import { supabase } from '$lib/supabaseClient';
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     export let userId; 
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     let isFollowing = false;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     let loading = false;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     const checkFollowing = async () => {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       const { data, error } = await supabase
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         .from('follows')
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         .select('*')
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         .eq('follower_id', supabase.auth.user().id)
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         .eq('following_id', userId)
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         .single();
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       if (error && error.code !== 'PGRST116') { // PGRST116: no rows found
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         console.error('Error checking follow status:', error.message);
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       }
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       isFollowing = data ? true : false;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     };
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     onMount(() => {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       checkFollowing();
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     });
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     const toggleFollow = async () => {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       loading = true;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       if (isFollowing) {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         const { success, error } = await unfollowUser(userId);
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         if (success) {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):           isFollowing = false;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         } else {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):           console.error('Failed to unfollow:', error.message);
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         }
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       } else {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         const { success, error } = await followUser(userId);
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         if (success) {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):           isFollowing = true;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         } else {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):           console.error('Failed to follow:', error.message);
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         }
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       }
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       loading = false;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     };
followButton.svelte (dylan toth on 10/06/2024 at 19:22):   </script>
followButton.svelte (dylan toth on 10/06/2024 at 19:22):   <button on:click={toggleFollow} disabled={loading}>
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     {#if loading}
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       Loading...
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     {:else}
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       {#if isFollowing}
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         Unfollow
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       {:else}
followButton.svelte (dylan toth on 10/06/2024 at 19:22):         Follow
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       {/if}
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     {/if}
followButton.svelte (dylan toth on 10/06/2024 at 19:22):   </button>
followButton.svelte (dylan toth on 10/06/2024 at 19:22):   <style>
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     button {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       padding: 8px 16px;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       background-color: var(--button-bg, #007bff);
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       color: white;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       border: none;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       border-radius: 4px;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       cursor: pointer;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     }
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     button:disabled {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       background-color: #6c757d;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       cursor: not-allowed;
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     }
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     button:hover:not(:disabled) {
followButton.svelte (dylan toth on 10/06/2024 at 19:22):       background-color: var(--button-hover-bg, #0056b3);
followButton.svelte (dylan toth on 10/06/2024 at 19:22):     }
followButton.svelte (dylan toth on 10/06/2024 at 19:22):   </style>
+server.js   (dylan toth on 10/06/2024 at 13:44): const client_secret = '91710a7ff19648a994c76e9990a478f7';
supabaseClient.js (dylan toth on 10/06/2024 at 02:47):     "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1neWZ0bWhwZGFmaHV1dnZnZWJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjY1MjY0NzAsImV4cCI6MjA0MjEwMjQ3MH0.n_pNbRHRpSb27FFwxf-ijtM0p1svXX0FOHcC_2smJEk",
supabaseClient.js (dylan toth on 10/06/2024 at 02:47):     {
supabaseClient.js (dylan toth on 10/06/2024 at 02:47):         persistSession: true, // This ensures session persistence
supabaseClient.js (dylan toth on 10/06/2024 at 02:47):         autoRefreshToken: true, // Automatically refresh session if tokens expire
supabaseClient.js (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47): <!-- src/routes/spotify-callback/+page.svelte -->
+page.svelte (dylan toth on 10/06/2024 at 02:47): <script>
+page.svelte (dylan toth on 10/06/2024 at 02:47):     import { supabase } from '$lib/supabaseClient';
+page.svelte (dylan toth on 10/06/2024 at 02:47):     import { onMount } from 'svelte';
+page.svelte (dylan toth on 10/06/2024 at 02:47):     import { goto } from '$app/navigation';
+page.svelte (dylan toth on 10/06/2024 at 02:47):     let loading = true;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     let errorMessage = '';
+page.svelte (dylan toth on 10/06/2024 at 02:47):     async function handleSpotifyCallback() {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       const urlParams = new URLSearchParams(window.location.search);
+page.svelte (dylan toth on 10/06/2024 at 02:47):       const code = urlParams.get('code');
+page.svelte (dylan toth on 10/06/2024 at 02:47):       if (!code) {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         console.error('No authorization code present');
+page.svelte (dylan toth on 10/06/2024 at 02:47):         errorMessage = 'No authorization code found. Please try signing in again.';
+page.svelte (dylan toth on 10/06/2024 at 02:47):         loading = false;
+page.svelte (dylan toth on 10/06/2024 at 02:47):         return;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47):       try {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         // Make a request to your Spotify callback API
+page.svelte (dylan toth on 10/06/2024 at 02:47):         const response = await fetch(`/spotify-callback?code=${code}`);
+page.svelte (dylan toth on 10/06/2024 at 02:47):         const data = await response.json();
+page.svelte (dylan toth on 10/06/2024 at 02:47):         if (data.success) {
+page.svelte (dylan toth on 10/06/2024 at 02:47):           const { access_token, refresh_token, expires_in } = data;
+page.svelte (dylan toth on 10/06/2024 at 02:47):           // Get the current user session to retrieve the user ID
+page.svelte (dylan toth on 10/06/2024 at 02:47):           const { data: { session }, error: sessionError } = await supabase.auth.getSession();
+page.svelte (dylan toth on 10/06/2024 at 02:47):           if (sessionError || !session) {
+page.svelte (dylan toth on 10/06/2024 at 02:47):             console.error('Error fetching session or no session found:', sessionError);
+page.svelte (dylan toth on 10/06/2024 at 02:47):             errorMessage = 'Authentication session not found. Please sign in again.';
+page.svelte (dylan toth on 10/06/2024 at 02:47):             loading = false;
+page.svelte (dylan toth on 10/06/2024 at 02:47):             return;
+page.svelte (dylan toth on 10/06/2024 at 02:47):           }
+page.svelte (dylan toth on 10/06/2024 at 02:47):           const user = session.user;
+page.svelte (dylan toth on 10/06/2024 at 02:47):           // Store the tokens in Supabase or local storage as needed
+page.svelte (dylan toth on 10/06/2024 at 02:47):           const { error: updateError } = await supabase
+page.svelte (dylan toth on 10/06/2024 at 02:47):             .from('profiles')
+page.svelte (dylan toth on 10/06/2024 at 02:47):             .update({
+page.svelte (dylan toth on 10/06/2024 at 02:47):               spotify_access_token: access_token,
+page.svelte (dylan toth on 10/06/2024 at 02:47):               spotify_refresh_token: refresh_token,
+page.svelte (dylan toth on 10/06/2024 at 02:47):               spotify_token_expires: new Date(Date.now() + expires_in * 1000)
+page.svelte (dylan toth on 10/06/2024 at 02:47):             })
+page.svelte (dylan toth on 10/06/2024 at 02:47):             .eq('id', user.id);
+page.svelte (dylan toth on 10/06/2024 at 02:47):           if (updateError) {
+page.svelte (dylan toth on 10/06/2024 at 02:47):             console.error('Error updating Supabase profile:', updateError);
+page.svelte (dylan toth on 10/06/2024 at 02:47):             errorMessage = 'Failed to update your profile with Spotify credentials.';
+page.svelte (dylan toth on 10/06/2024 at 02:47):             loading = false;
+page.svelte (dylan toth on 10/06/2024 at 02:47):           } else {
+page.svelte (dylan toth on 10/06/2024 at 02:47):             console.log('Tokens successfully updated in Supabase');
+page.svelte (dylan toth on 10/06/2024 at 02:47):             // Redirect to a different page after success
+page.svelte (dylan toth on 10/06/2024 at 02:47):             goto('/'); // Replace '/' with the desired route
+page.svelte (dylan toth on 10/06/2024 at 02:47):           }
+page.svelte (dylan toth on 10/06/2024 at 02:47):         } else {
+page.svelte (dylan toth on 10/06/2024 at 02:47):           console.error('Error during Spotify authentication:', data.message);
+page.svelte (dylan toth on 10/06/2024 at 02:47):           errorMessage = data.message || 'Spotify authentication failed.';
+page.svelte (dylan toth on 10/06/2024 at 02:47):           loading = false;
+page.svelte (dylan toth on 10/06/2024 at 02:47):         }
+page.svelte (dylan toth on 10/06/2024 at 02:47):       } catch (error) {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         console.error('Unexpected error during Spotify callback handling:', error);
+page.svelte (dylan toth on 10/06/2024 at 02:47):         errorMessage = 'An unexpected error occurred. Please try again.';
+page.svelte (dylan toth on 10/06/2024 at 02:47):         loading = false;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     // Call the function on component mount
+page.svelte (dylan toth on 10/06/2024 at 02:47):     onMount(() => {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       handleSpotifyCallback();
+page.svelte (dylan toth on 10/06/2024 at 02:47):     });
+page.svelte (dylan toth on 10/06/2024 at 02:47):   </script>
+page.svelte (dylan toth on 10/06/2024 at 02:47):   <div class="container">
+page.svelte (dylan toth on 10/06/2024 at 02:47):     {#if loading}
+page.svelte (dylan toth on 10/06/2024 at 02:47):       <div class="spinner-container">
+page.svelte (dylan toth on 10/06/2024 at 02:47):         <div class="spinner"></div>
+page.svelte (dylan toth on 10/06/2024 at 02:47):         <p class="message">Connecting to Spotify...</p>
+page.svelte (dylan toth on 10/06/2024 at 02:47):       </div>
+page.svelte (dylan toth on 10/06/2024 at 02:47):     {:else if errorMessage}
+page.svelte (dylan toth on 10/06/2024 at 02:47):       <div class="error-container">
+page.svelte (dylan toth on 10/06/2024 at 02:47):         <p class="error-message">{errorMessage}</p>
+page.svelte (dylan toth on 10/06/2024 at 02:47):         <a href="/auth/signin" class="retry-button">Try Again</a>
+page.svelte (dylan toth on 10/06/2024 at 02:47):       </div>
+page.svelte (dylan toth on 10/06/2024 at 02:47):     {/if}
+page.svelte (dylan toth on 10/06/2024 at 02:47):   </div>
+page.svelte (dylan toth on 10/06/2024 at 02:47):   <style>
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Container to center content */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .container {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       display: flex;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       justify-content: center;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       align-items: center;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       height: 100vh; /* Full viewport height */
+page.svelte (dylan toth on 10/06/2024 at 02:47):       background-color: #1d1f25; /* Dark background */
+page.svelte (dylan toth on 10/06/2024 at 02:47):       color: #f3f1f1; /* Light text color */
+page.svelte (dylan toth on 10/06/2024 at 02:47):       font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Spinner Container */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .spinner-container {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       display: flex;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       flex-direction: column;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       align-items: center;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* CSS Spinner */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .spinner {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       border: 8px solid rgba(255, 255, 255, 0.1);
+page.svelte (dylan toth on 10/06/2024 at 02:47):       border-top: 8px solid #1db954; /* Spotify Green */
+page.svelte (dylan toth on 10/06/2024 at 02:47):       border-radius: 50%;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       width: 60px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       height: 60px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       animation: spin 1s linear infinite;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       margin-bottom: 20px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Spinner Animation */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     @keyframes spin {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       0% {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         transform: rotate(0deg);
+page.svelte (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47):       100% {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         transform: rotate(360deg);
+page.svelte (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Loading Message */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .message {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       font-size: 1.2rem;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       text-align: center;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Error Container */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .error-container {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       display: flex;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       flex-direction: column;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       align-items: center;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Error Message */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .error-message {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       color: #ff4d4f; /* Red color for errors */
+page.svelte (dylan toth on 10/06/2024 at 02:47):       font-size: 1.2rem;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       margin-bottom: 20px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       text-align: center;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Retry Button */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .retry-button {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       padding: 10px 20px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       background-color: #1db954; /* Spotify Green */
+page.svelte (dylan toth on 10/06/2024 at 02:47):       color: #fff;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       text-decoration: none;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       border-radius: 25px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       font-size: 1rem;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       transition: background-color 0.3s ease;
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     .retry-button:hover {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       background-color: #17a44c; /* Darker Green on Hover */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     /* Responsive Design */
+page.svelte (dylan toth on 10/06/2024 at 02:47):     @media (max-width: 480px) {
+page.svelte (dylan toth on 10/06/2024 at 02:47):       .spinner {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         width: 40px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):         height: 40px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):         border-width: 6px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47):       .message,
+page.svelte (dylan toth on 10/06/2024 at 02:47):       .error-message {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         font-size: 1rem;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47):       .retry-button {
+page.svelte (dylan toth on 10/06/2024 at 02:47):         padding: 8px 16px;
+page.svelte (dylan toth on 10/06/2024 at 02:47):         font-size: 0.9rem;
+page.svelte (dylan toth on 10/06/2024 at 02:47):       }
+page.svelte (dylan toth on 10/06/2024 at 02:47):     }
+page.svelte (dylan toth on 10/06/2024 at 02:47):   </style>
svelte.config.js (dylan toth on 10/09/2024 at 11:33): 		adapter: adapter(),
svelte.config.js (dylan toth on 10/09/2024 at 11:33): 		csrf: {
svelte.config.js (dylan toth on 10/09/2024 at 11:33):             checkOrigin: false
svelte.config.js (dylan toth on 10/09/2024 at 11:33):         }
+page.server.js (dylan toth on 10/11/2024 at 16:49): // src/routes/posts/[slug]/+page.server.js
+page.server.js (dylan toth on 10/11/2024 at 16:49): import { supabase } from '$lib/supabaseClient';
+page.server.js (dylan toth on 10/11/2024 at 16:49): /** @type {import('./$types').PageServerLoad} */
+page.server.js (dylan toth on 10/11/2024 at 16:49): export async function load({ params }) {
+page.server.js (dylan toth on 10/11/2024 at 16:49):   const { slug } = params; // Assuming you're using 'slug' as post_id
+page.server.js (dylan toth on 10/11/2024 at 16:49): console.log(slug)
+page.server.js (dylan toth on 10/11/2024 at 16:49):   // Fetch the post along with the creator's profile
+page.server.js (dylan toth on 10/11/2024 at 16:49):   const { data: post, error } = await supabase
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .from('posts')
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .select(`
+page.server.js (dylan toth on 10/11/2024 at 16:49):     id,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     profile_id,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     content,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     song_id,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     rating,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     created_at,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     updated_at,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     profiles(username)  -- Include related profile data
+page.server.js (dylan toth on 10/11/2024 at 16:49):   `)
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .eq('id', slug)  // Ensure 'slug' corresponds to 'id'
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .single();
+page.server.js (dylan toth on 10/11/2024 at 16:49): console.log("error: ", error);
+page.server.js (dylan toth on 10/11/2024 at 16:49):   if (error) {
+page.server.js (dylan toth on 10/11/2024 at 16:49):     return {
+page.server.js (dylan toth on 10/11/2024 at 16:49):       status: error.status || 500,
+page.server.js (dylan toth on 10/11/2024 at 16:49):       error: new Error(error.message || 'Failed to fetch post')
+page.server.js (dylan toth on 10/11/2024 at 16:49):     };
+page.server.js (dylan toth on 10/11/2024 at 16:49):   }
+page.server.js (dylan toth on 10/11/2024 at 16:49):   // Fetch comments related to the post (assuming you have a comments table)
+page.server.js (dylan toth on 10/11/2024 at 16:49):   const { data: comments, error: commentsError } = await supabase
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .from('comments')
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .select(`
+page.server.js (dylan toth on 10/11/2024 at 16:49):     id,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     profile_id,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     comment,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     created_at,
+page.server.js (dylan toth on 10/12/2024 at 00:21):     profiles(username, avatar_url)
+page.server.js (dylan toth on 10/11/2024 at 16:49):   `)
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .eq('post_id', slug)
+page.server.js (dylan toth on 10/11/2024 at 16:49):   .order('created_at', { ascending: true });
+page.server.js (dylan toth on 10/11/2024 at 16:49):   if (commentsError) {
+page.server.js (dylan toth on 10/11/2024 at 16:49):     console.error('Error fetching comments:', commentsError);
+page.server.js (dylan toth on 10/11/2024 at 16:49):   }
+page.server.js (dylan toth on 10/12/2024 at 00:21): // console.log(post)
+page.server.js (dylan toth on 10/11/2024 at 16:49):   return {
+page.server.js (dylan toth on 10/11/2024 at 16:49):     post,
+page.server.js (dylan toth on 10/11/2024 at 16:49):     comments: comments || []
+page.server.js (dylan toth on 10/11/2024 at 16:49):   };
+page.server.js (dylan toth on 10/11/2024 at 16:49): }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   import { onMount, onDestroy } from "svelte";
+page.svelte (dylan toth on 10/07/2024 at 12:41):   import { spotify } from "$lib/spotifyClient.js";
+page.svelte (dylan toth on 10/07/2024 at 12:41):   import { goto } from "$app/navigation";
+page.svelte (dylan toth on 10/05/2024 at 22:52):   import AddPost from "$lib/addPost.svelte";
+page.svelte (dylan toth on 10/07/2024 at 12:41):   import { createEventDispatcher } from "svelte";
+page.svelte (dylan toth on 10/07/2024 at 12:41):   import { selectedSong } from "$lib/stores";
+page.svelte (dylan toth on 10/07/2024 at 12:41):   import { getSongs, authenticateClientCredentials } from "$lib/utils.js";
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let posts = [...data.posts];
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let songData = {};
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let loading = false;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let isDragOver = false;
+page.svelte (dylan toth on 10/06/2024 at 15:30):   let isDroppableArea = false;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let localSelectedTrack;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let hasMorePosts = data.nextPage !== null;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   const dispatch = createEventDispatcher();
+page.svelte (dylan toth on 10/07/2024 at 12:41):   const unsubscribe = selectedSong.subscribe((song) => {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     if (song) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):       localSelectedTrack = {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         id: song.id,
+page.svelte (dylan toth on 10/07/2024 at 12:41):         title: song.title,
+page.svelte (dylan toth on 10/07/2024 at 12:41):         artist: song.artist,
+page.svelte (dylan toth on 10/07/2024 at 12:41):         cover: song.cover,
+page.svelte (dylan toth on 10/07/2024 at 12:41):       };
+page.svelte (dylan toth on 10/07/2024 at 12:41):     }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   });
+page.svelte (dylan toth on 10/07/2024 at 12:41):   onDestroy(() => {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     unsubscribe();
+page.svelte (dylan toth on 10/07/2024 at 12:41):   });
+page.svelte (dylan toth on 10/07/2024 at 12:41):   function handleDrop(event) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     event.preventDefault();
+page.svelte (dylan toth on 10/07/2024 at 12:41):     const data = event.dataTransfer.getData("application/json");
+page.svelte (dylan toth on 10/07/2024 at 12:41):     if (data && isDroppableArea) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):       const song = JSON.parse(data);
+page.svelte (dylan toth on 10/07/2024 at 12:41):       selectedSong.set(song);
+page.svelte (dylan toth on 10/06/2024 at 17:09):     }
+page.svelte (dylan toth on 10/07/2024 at 12:41):     isDragOver = false;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   function handleDragOver(event) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     event.preventDefault();
+page.svelte (dylan toth on 10/07/2024 at 12:41):     isDragOver = true;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     isDroppableArea = true;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   function handleDragLeave(event) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     isDragOver = false;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     isDroppableArea = false;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   function handleReviewSubmitted(event) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     const { post } = event.detail;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     if (post) {
+page.svelte (dylan toth on 10/10/2024 at 13:01):       // console.log(posts)
+page.svelte (dylan toth on 10/10/2024 at 13:01):       // console.log(post)
+page.svelte (dylan toth on 10/07/2024 at 12:41):       const postWithLikesCount = {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         ...post,
+page.svelte (dylan toth on 10/07/2024 at 12:41):         likes_count: post.likes_count !== undefined ? post.likes_count : 0,
+page.svelte (dylan toth on 10/07/2024 at 12:41):       };
+page.svelte (dylan toth on 10/10/2024 at 13:01):       // console.log(postWithLikesCount)
+page.svelte (dylan toth on 10/10/2024 at 13:01):       console.log("posts before: ", posts)
+page.svelte (dylan toth on 10/07/2024 at 12:41):       posts = [postWithLikesCount, ...posts];
+page.svelte (dylan toth on 10/10/2024 at 13:01):       console.log("posts after", posts)
+page.svelte (dylan toth on 10/07/2024 at 12:41):       if (post.song_id && !songData[post.song_id]) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         // Fetch song data for the new song_id (maybe remove it may not be necessary since we have all the information, not sure)
+page.svelte (dylan toth on 10/07/2024 at 12:41):         fetchSongData();
+page.svelte (dylan toth on 10/07/2024 at 12:41):       }
+page.svelte (dylan toth on 10/06/2024 at 13:44):     }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   async function fetchSongData() {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     await authenticateClientCredentials();
+page.svelte (dylan toth on 10/07/2024 at 12:41):     // Collect song IDs from posts
+page.svelte (dylan toth on 10/07/2024 at 12:41):     let testIds = posts.map((post) => post.song_id);
+page.svelte (dylan toth on 10/07/2024 at 12:41):     const options = {};
+page.svelte (dylan toth on 10/07/2024 at 12:41):     spotify.getTracks(testIds, options, (error, data) => {
+page.svelte (dylan toth on 10/07/2024 at 12:41):       if (error) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         console.error("Error fetching tracks:", error);
+page.svelte (dylan toth on 10/07/2024 at 12:41):         return;
+page.svelte (dylan toth on 10/07/2024 at 12:41):       }
+page.svelte (dylan toth on 10/07/2024 at 12:41):       if (data && data.tracks) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         console.log("Fetched tracks successfully:", data.tracks);
+page.svelte (dylan toth on 10/07/2024 at 12:41):         data.tracks.forEach((track) => {
+page.svelte (dylan toth on 10/07/2024 at 12:41):           if (track) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):             songData[track.id] = {
+page.svelte (dylan toth on 10/07/2024 at 12:41):               title: track.name,
+page.svelte (dylan toth on 10/07/2024 at 12:41):               artist: track.artists[0].name,
+page.svelte (dylan toth on 10/07/2024 at 12:41):               image: track.album.images[0]?.url,
+page.svelte (dylan toth on 10/07/2024 at 12:41):             };
+page.svelte (dylan toth on 10/07/2024 at 12:41):           }
+page.svelte (dylan toth on 10/07/2024 at 12:41):         });
+page.svelte (dylan toth on 10/07/2024 at 12:41):       } else {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         console.log("No tracks found for the given IDs.");
+page.svelte (dylan toth on 10/07/2024 at 12:41):       }
+page.svelte (dylan toth on 10/07/2024 at 12:41):       console.log(songData);
+page.svelte (dylan toth on 10/07/2024 at 12:41):     });
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/06/2024 at 13:44):   async function loadNextPage() {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     if (!hasMorePosts || loading) return;
+page.svelte (dylan toth on 10/06/2024 at 13:44):     loading = true;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     try {
+page.svelte (dylan toth on 10/07/2024 at 12:41):       const response = await fetch(`/api/posts?page=${data.nextPage}`);
+page.svelte (dylan toth on 10/07/2024 at 12:41):       if (!response.ok) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         throw new Error(`HTTP error! status: ${response.status}`);
+page.svelte (dylan toth on 10/07/2024 at 12:41):       }
+page.svelte (dylan toth on 10/07/2024 at 12:41):       const newPostsData = await response.json();
+page.svelte (dylan toth on 10/07/2024 at 12:41):       if (!newPostsData.success) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         throw new Error("Failed to load posts");
+page.svelte (dylan toth on 10/06/2024 at 13:44):       }
+page.svelte (dylan toth on 10/07/2024 at 12:41):       posts = [...posts, ...newPostsData.posts];
+page.svelte (dylan toth on 10/07/2024 at 12:41):       data.nextPage = newPostsData.nextPage;
+page.svelte (dylan toth on 10/07/2024 at 12:41):       hasMorePosts = newPostsData.nextPage !== null;
+page.svelte (dylan toth on 10/07/2024 at 12:41):       await fetchSongData(); // Fetch additional song data if necessary
+page.svelte (dylan toth on 10/07/2024 at 12:41):     } catch (error) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):       console.error("Error loading next page:", error);
+page.svelte (dylan toth on 10/07/2024 at 12:41):     } finally {
+page.svelte (dylan toth on 10/07/2024 at 12:41):       loading = false;
+page.svelte (dylan toth on 10/06/2024 at 13:44):     }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   onMount(async () => {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     await fetchSongData();
+page.svelte (dylan toth on 10/07/2024 at 12:41):     const {
+page.svelte (dylan toth on 10/07/2024 at 12:41):       data: { session },
+page.svelte (dylan toth on 10/07/2024 at 12:41):       error,
+page.svelte (dylan toth on 10/07/2024 at 12:41):     } = await supabase.auth.getSession();
+page.svelte (dylan toth on 10/05/2024 at 20:30):       const { data: profile, error: profileError } = await supabase
+page.svelte (dylan toth on 10/07/2024 at 12:41):         .from("profiles")
+page.svelte (dylan toth on 10/07/2024 at 12:41):         .select("username")
+page.svelte (dylan toth on 10/07/2024 at 12:41):         .eq("id", session_uuid)
+page.svelte (dylan toth on 10/05/2024 at 20:30):         .single();
+page.svelte (dylan toth on 10/05/2024 at 20:30):       if (profileError) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):         console.error("Error fetching profile:", profileError);
+page.svelte (dylan toth on 10/05/2024 at 20:30):       } else {
+page.svelte (dylan toth on 10/05/2024 at 20:30):         if (!profile?.username) {
+page.svelte (dylan toth on 10/08/2024 at 15:32):           // goto("/account");
+page.svelte (dylan toth on 10/08/2024 at 15:32):           console.log("no username")
+page.svelte (dylan toth on 10/05/2024 at 20:30):         }
+page.svelte (dylan toth on 10/05/2024 at 20:30):       }
+page.svelte (dylan toth on 10/06/2024 at 15:30): <!-- svelte-ignore a11y-no-static-element-interactions -->
+page.svelte (dylan toth on 10/06/2024 at 15:30): <div
+page.svelte (dylan toth on 10/06/2024 at 15:30):   class="wrapper"
+page.svelte (dylan toth on 10/06/2024 at 15:30):   on:dragover={handleDragOver}
+page.svelte (dylan toth on 10/06/2024 at 15:30):   on:dragleave={handleDragLeave}
+page.svelte (dylan toth on 10/06/2024 at 15:30):   on:drop={handleDrop}
+page.svelte (dylan toth on 10/06/2024 at 15:30): >
+page.svelte (dylan toth on 10/07/2024 at 12:41):   <Sidebar />
+page.svelte (dylan toth on 10/06/2024 at 15:30):   <div class="posts-wrapper {isDragOver ? 'drag-over' : ''}">
+page.svelte (dylan toth on 10/07/2024 at 12:41):     <AddPost on:reviewSubmitted={handleReviewSubmitted} />
+page.svelte (dylan toth on 10/10/2024 at 13:01):     {#each posts as post (post.id)}
+page.svelte (dylan toth on 10/06/2024 at 13:44):         song_title={songData[post.song_id]?.title}
+page.svelte (dylan toth on 10/06/2024 at 13:44):         song_artist={songData[post.song_id]?.artist}
+page.svelte (dylan toth on 10/06/2024 at 13:44):         song_image={songData[post.song_id]?.image}
+page.svelte (dylan toth on 10/06/2024 at 13:44):     {#if loading}
+page.svelte (dylan toth on 10/06/2024 at 13:44):       <div class="loading-spinner">Loading...</div>
+page.svelte (dylan toth on 10/06/2024 at 13:44):     {/if}
+page.svelte (dylan toth on 10/07/2024 at 12:41):     {#if hasMorePosts}
+page.svelte (dylan toth on 10/07/2024 at 12:41):       <button
+page.svelte (dylan toth on 10/07/2024 at 12:41):         class="load-more-button"
+page.svelte (dylan toth on 10/07/2024 at 12:41):         on:click={loadNextPage}
+page.svelte (dylan toth on 10/07/2024 at 12:41):         disabled={loading}
+page.svelte (dylan toth on 10/07/2024 at 12:41):       >
+page.svelte (dylan toth on 10/07/2024 at 12:41):         {loading ? "Loading..." : "Load More Reviews"}
+page.svelte (dylan toth on 10/07/2024 at 12:41):       </button>
+page.svelte (dylan toth on 10/07/2024 at 12:41):     {/if}
+page.svelte (dylan toth on 10/06/2024 at 15:30):     width: 100%;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     position: relative;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     transition:
+page.svelte (dylan toth on 10/07/2024 at 12:41):       background-color 0.3s,
+page.svelte (dylan toth on 10/07/2024 at 12:41):       border 0.3s;
+page.svelte (dylan toth on 10/06/2024 at 15:30):   .wrapper.drag-over {
+page.svelte (dylan toth on 10/06/2024 at 15:30):     border: 2px dashed #007bff;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     background-color: rgba(0, 123, 255, 0.1);
+page.svelte (dylan toth on 10/05/2024 at 23:33):     position: fixed;
+page.svelte (dylan toth on 10/06/2024 at 15:30):   .posts-wrapper {
+page.svelte (dylan toth on 10/06/2024 at 15:30):     display: inline-block;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     margin-left: 0;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     width: calc(100% - 300px);
+page.svelte (dylan toth on 10/06/2024 at 19:22):     padding: 0px;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     overflow-y: auto;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     height: 100vh;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #121212;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     transition: background-color 0.3s;
+page.svelte (dylan toth on 10/06/2024 at 15:30):   }
+page.svelte (dylan toth on 10/05/2024 at 23:33):   @media (max-width: 768px) {
+page.svelte (dylan toth on 10/05/2024 at 23:33):     .sidebar {
+page.svelte (dylan toth on 10/05/2024 at 23:33):       display: none;
+page.svelte (dylan toth on 10/05/2024 at 23:33):     }
+page.svelte (dylan toth on 10/05/2024 at 23:33):     .posts-wrapper {
+page.svelte (dylan toth on 10/05/2024 at 23:33):       width: 100%;
+page.svelte (dylan toth on 10/05/2024 at 23:33):     }
+page.svelte (dylan toth on 10/05/2024 at 23:33):     .wrapper {
+page.svelte (dylan toth on 10/05/2024 at 23:33):       flex-direction: column;
+page.svelte (dylan toth on 10/05/2024 at 23:33):     }
+page.svelte (dylan toth on 10/05/2024 at 23:33):   }
+page.svelte (dylan toth on 10/06/2024 at 15:30):   .posts-wrapper.drag-over {
+page.svelte (dylan toth on 10/06/2024 at 15:30):     border: 2px dashed #007bff;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     background-color: rgba(0, 123, 255, 0.1);
+page.svelte (dylan toth on 10/06/2024 at 15:30):   }
+page.svelte (dylan toth on 10/06/2024 at 15:30):   .loading-spinner {
+page.svelte (dylan toth on 10/06/2024 at 15:30):     text-align: center;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     padding: 20px;
+page.svelte (dylan toth on 10/06/2024 at 15:30):     color: #b9b9b9;
+page.svelte (dylan toth on 10/06/2024 at 15:30):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   .load-more-button {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     display: block;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     margin: 20px auto;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 10px 20px;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #1d1f25;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     color: white;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     border: 1px solid #26282c;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     font-family: "Concert One", sans-serif;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     cursor: pointer;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 16px;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     transition: background-color 0.3s;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   .load-more-button:disabled {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #6c757d;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     cursor: not-allowed;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   .load-more-button:hover:not(:disabled) {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #121212;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41): </style>
+layout.svelte (dylan toth on 10/06/2024 at 20:05):   import Nav from "$lib/nav.svelte";
+layout.svelte (dylan toth on 10/06/2024 at 20:05):   import Footer from "$lib/footer.svelte";
+layout.svelte (dylan toth on 10/07/2024 at 22:22):   import { supabase } from "$lib/supabaseClient";
+layout.svelte (dylan toth on 10/07/2024 at 22:22):   import { user } from "$lib/stores";
+layout.svelte (dylan toth on 10/08/2024 at 17:08):   // import { ensureUserProfileExists } from '$lib/utils';
+layout.svelte (dylan toth on 10/06/2024 at 20:05):   import { onMount } from "svelte";
+layout.svelte (dylan toth on 10/10/2024 at 13:01):   import Sidebar from "$lib/sidebar.svelte";
+layout.svelte (dylan toth on 10/11/2024 at 23:14): import { page } from '$app/stores'
+layout.svelte (dylan toth on 10/06/2024 at 03:32):   onMount(async () => {
+layout.svelte (dylan toth on 10/07/2024 at 22:22):     try {
+layout.svelte (dylan toth on 10/07/2024 at 22:22):       const { data: { session }, error } = await supabase.auth.getSession();
+layout.svelte (dylan toth on 10/08/2024 at 17:08):       console.log("current session: ", session)
+layout.svelte (dylan toth on 10/07/2024 at 22:22):       if (error) {
+layout.svelte (dylan toth on 10/07/2024 at 22:22):         console.error("Error fetching session:", error);
+layout.svelte (dylan toth on 10/07/2024 at 22:22):         user.set({ role: 'guest' });
+layout.svelte (dylan toth on 10/07/2024 at 22:22):         return;
+layout.svelte (dylan toth on 10/07/2024 at 22:22):       }
+layout.svelte (dylan toth on 10/08/2024 at 17:08):       // await ensureUserProfileExists(session.user.id);
+layout.svelte (dylan toth on 10/07/2024 at 22:22):       if (session) {
+layout.svelte (dylan toth on 10/07/2024 at 22:22):         // Set user role to 'authenticated' when the session exists
+layout.svelte (dylan toth on 10/07/2024 at 22:22):         user.set({ ...session.user, role: 'authenticated' });
+layout.svelte (dylan toth on 10/07/2024 at 22:22):       } else {
+layout.svelte (dylan toth on 10/07/2024 at 22:22):         // If no session exists, set user as guest
+layout.svelte (dylan toth on 10/07/2024 at 22:22):         user.set({ role: 'guest' });
+layout.svelte (dylan toth on 10/06/2024 at 03:32):       }
+layout.svelte (dylan toth on 10/07/2024 at 22:22):     } catch (e) {
+layout.svelte (dylan toth on 10/07/2024 at 22:22):       console.error("Unexpected error during onMount in layout:", e);
+layout.svelte (dylan toth on 10/07/2024 at 22:22):       user.set({ role: 'guest' });
+layout.svelte (dylan toth on 10/06/2024 at 03:32):     }
+layout.svelte (dylan toth on 10/06/2024 at 03:32):   });
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   function hideBanner() {
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     document.getElementById("banner").style.display = "None";
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   }
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   <div id="banner" class = "banner" ><div>Note: This app is in beta so spotify auth will not work for non-developers
+layout.svelte (dylan toth on 10/11/2024 at 11:16): <button class= "warning-button" on:click={hideBanner}>Hide Message</button></div>
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   </div>
+layout.svelte (dylan toth on 10/11/2024 at 23:14):   {#if $page.url.pathname !== '/fancy'}
+layout.svelte (dylan toth on 10/11/2024 at 23:14):   {/if}
+layout.svelte (dylan toth on 10/06/2024 at 03:32):   .wrapper {
+layout.svelte (dylan toth on 10/05/2024 at 20:41):     background-color: #16181c;
+layout.svelte (dylan toth on 10/07/2024 at 22:22):     min-height: 100vh;
+layout.svelte (dylan toth on 10/07/2024 at 22:22):     display: flex;
+layout.svelte (dylan toth on 10/07/2024 at 22:22):     flex-direction: column;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   .banner {
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     /* height: 40px; */
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     display: flex;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     padding-top: 5px;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     padding-bottom: 5px;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     align-content: center;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     text-align: center;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     /* width: 100%; */
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     flex-direction: column;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     vertical-align: center;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     background-color: #eed202;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     font-family: "Concert One", sans-serif;
+layout.svelte (dylan toth on 10/11/2024 at 23:14):     color: black;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   }
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   .warning-button {
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     background-color: black;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     color: white;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     border-radius: 5px; 
+layout.svelte (dylan toth on 10/11/2024 at 11:16):     font-family: "Concert One", sans-serif;
+layout.svelte (dylan toth on 10/11/2024 at 11:16):   }
+layout.svelte (dylan toth on 10/11/2024 at 15:16):   .warning-button:hover {
+layout.svelte (dylan toth on 10/11/2024 at 15:16):     cursor: pointer;
+layout.svelte (dylan toth on 10/11/2024 at 15:16):   }
+layout.svelte (dylan toth on 10/06/2024 at 03:32): </style>
comment.svelte (dylan toth on 10/12/2024 at 00:21): <script>
comment.svelte (dylan toth on 10/12/2024 at 00:21):     export let comment = {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       id: '',
comment.svelte (dylan toth on 10/12/2024 at 00:21):       profile_id: '',
comment.svelte (dylan toth on 10/12/2024 at 00:21):       comment: '',
comment.svelte (dylan toth on 10/12/2024 at 00:21):       created_at: '',
comment.svelte (dylan toth on 10/12/2024 at 00:21):       profiles: {
comment.svelte (dylan toth on 10/12/2024 at 00:21):         username: '',
comment.svelte (dylan toth on 10/12/2024 at 00:21):         avatar_url: ''
comment.svelte (dylan toth on 10/12/2024 at 00:21):       }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     };
comment.svelte (dylan toth on 10/12/2024 at 00:21):     function formatDate(dateStr) {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       const options = { year: 'numeric', month: 'short', day: 'numeric' };
comment.svelte (dylan toth on 10/12/2024 at 00:21):       return new Date(dateStr).toLocaleDateString(undefined, options);
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):   </script>
comment.svelte (dylan toth on 10/12/2024 at 00:21):   <div class="comment">
comment.svelte (dylan toth on 10/12/2024 at 00:21):     <img class="avatar" src={comment.profiles.avatar_url} alt={`${comment.profiles.username}'s avatar`} />
comment.svelte (dylan toth on 10/12/2024 at 00:21):     <div class="comment-content">
comment.svelte (dylan toth on 10/12/2024 at 00:21):       <div class="comment-header">
comment.svelte (dylan toth on 10/12/2024 at 00:21):         <span class="username">{comment.profiles.username}</span>
comment.svelte (dylan toth on 10/12/2024 at 00:21):         <span class="timestamp">{formatDate(comment.created_at)}</span>
comment.svelte (dylan toth on 10/12/2024 at 00:21):       </div>
comment.svelte (dylan toth on 10/12/2024 at 00:21):       <p class="comment-text">{comment.comment}</p>
comment.svelte (dylan toth on 10/12/2024 at 00:21):     </div>
comment.svelte (dylan toth on 10/12/2024 at 00:21):   </div>
comment.svelte (dylan toth on 10/12/2024 at 00:21):   <style>
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .comment {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       display: flex;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       align-items: flex-start;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       padding: 15px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       background-color: #2a2d35;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       border-radius: 8px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       margin-bottom: 15px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       transition: background-color 0.3s;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .comment:hover {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       background-color: #353a44;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .avatar {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       width: 40px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       height: 40px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       border-radius: 50%;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       object-fit: cover;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       margin-right: 15px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       flex-shrink: 0;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-content {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       flex: 1;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-header {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       display: flex;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       align-items: center;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       margin-bottom: 5px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .username {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       font-weight: bold;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       color: #f3f1f1;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       margin-right: 10px;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       text-decoration: none;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .timestamp {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 0.8rem;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       color: #a9a9a9;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-text {
comment.svelte (dylan toth on 10/12/2024 at 00:21):       margin: 0;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       color: #e4e4e4;
comment.svelte (dylan toth on 10/12/2024 at 00:21):       line-height: 1.4;
comment.svelte (dylan toth on 10/12/2024 at 00:21):     }
comment.svelte (dylan toth on 10/12/2024 at 00:21):   </style>
package.json (dylan toth on 10/06/2024 at 02:47): 		"@supabase/ssr": "^0.5.1",
package.json (dylan toth on 10/07/2024 at 22:22): 		"base-64": "^1.0.0",
package.json (dylan toth on 10/06/2024 at 19:22): 		"d3": "^7.9.0",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   import { onMount, onDestroy } from "svelte";
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):   import { selectedSong } from "$lib/stores";
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   import { getValidSpotifyAccessToken } from "$lib/utils";
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   import { user } from "$lib/stores";
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   import { derived } from 'svelte/store';
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   let player;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   let currentSong = null;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   let recentSongs = [];
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   let showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   let showPlayer = false;
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):   let isPlaying = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   const userReady = derived(user, $user => $user); // Wait for user to be set
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   onMount(async () => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     let unsubscribeUser;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     let currentUser;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     try {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       unsubscribeUser = userReady.subscribe(async (value) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         if (value && value.role === 'authenticated') {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           currentUser = value;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           // User is ready, continue to set up the player
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           const accessToken = await getValidSpotifyAccessToken(currentUser.id);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           if (!accessToken) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             showPlayer = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             return;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           const profileResponse = await fetch("https://api.spotify.com/v1/me", {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             headers: {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               Authorization: `Bearer ${accessToken}`,
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             },
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           if (!profileResponse.ok) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             const errorData = await profileResponse.json();
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             console.error("Error fetching Spotify profile:", errorData);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             showPlayer = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             return;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           const profileData = await profileResponse.json();
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           console.log("Spotify profile:", profileData);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           if (profileData.product !== "premium") {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             showPlayer = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             return;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22): console.log('logged in')
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           const script = document.createElement("script");
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           script.src = "https://sdk.scdn.co/spotify-player.js";
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           script.async = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           document.body.appendChild(script);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           window.onSpotifyWebPlaybackSDKReady = () => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player = new window.Spotify.Player({
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               name: "OpenVinyl Web Playback SDK Player",
sidebar.svelte (dylan toth on 10/10/2024 at 13:01):               getOAuthToken: async (cb) => {
sidebar.svelte (dylan toth on 10/10/2024 at 13:01):                 const accessToken = await getValidSpotifyAccessToken(currentUser.id);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):                 cb(accessToken);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               },
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               volume: 0.5,
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.addListener("initialization_error", ({ message }) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               console.error("Initialization Error:", message);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.addListener("authentication_error", ({ message }) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               console.error("Authentication Error:", message);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               if (message.includes("Premium")) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):                 showPlayer = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):                 showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.addListener("account_error", ({ message }) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               console.error("Account Error:", message);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               if (message.includes("premium")) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):                 showPlayer = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):                 showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.addListener("playback_error", ({ message }) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               console.error("Playback Error:", message);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.addListener("player_state_changed", (state) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               if (!state) return;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               const track = state.track_window.current_track;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               updateCurrentSong(track);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               updateRecentSongs(track);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               isPlaying = state.paused ? false : true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.addListener("ready", ({ device_id }) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               console.log("Ready with Device ID", device_id);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               showPlayer = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               showPremiumMessage =false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               transferPlaybackHere(device_id, accessToken);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.addListener("not_ready", ({ device_id }) => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):               console.log("Device ID has gone offline", device_id);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):             player.connect();
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           };
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         } else {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           showPlayer = false; // User is a guest, hide player
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):           showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):         }
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):       });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     } catch (error) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       console.error("Error during sidebar mount:", error);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       showPlayer = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       showPremiumMessage = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     return () => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       unsubscribeUser && unsubscribeUser();
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       if (player) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         player.disconnect();
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         console.log("Player disconnected.");
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       }
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     };
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   });
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   function updateCurrentSong(track) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   if (!track) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     // Handle the case when track is null or undefined
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     currentSong = {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       title: "No song playing",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       artist: "Unknown artist",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       cover: "https://placehold.co/300", // Use a placeholder image
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     };
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     return;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   currentSong = {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     title: track.name || "Unknown title",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     artist: track.artists?.map((artist) => artist.name).join(", ") || "Unknown artist",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     cover: track.album?.images[0]?.url || "https://placehold.co/300", 
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   };
sidebar.svelte (dylan toth on 10/06/2024 at 19:22): }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22): function updateRecentSongs(track) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   if (!track || !track.id) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     return;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   const song = {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     id: track.id,
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     title: track.name || "Unknown title",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     artist: track.artists?.map((artist) => artist.name).join(", ") || "Unknown artist",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     cover: track.album?.images[0]?.url || "https://placehold.co/300", 
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   };
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   const exists = recentSongs.some(existingSong => existingSong.id === song.id);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   if (!exists) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     recentSongs = [song, ...recentSongs]; 
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     if (recentSongs.length > 3) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       recentSongs = recentSongs.slice(0, 3); // Limit to 3 recent songs
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22): }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):   async function transferPlaybackHere(device_id, accessToken) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     try {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       await fetch("https://api.spotify.com/v1/me/player", {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         method: "PUT",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         headers: {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           Authorization: `Bearer ${accessToken}`,
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           "Content-Type": "application/json",
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         },
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         body: JSON.stringify({
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           device_ids: [device_id],
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         }),
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       });
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("Playback transferred to the Web Playback SDK player.");
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     } catch (error) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       console.error("Error transferring playback:", error);
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     }
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     if (player) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       player
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .previousTrack()
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .then(() => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           console.log("Skipped to previous track");
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         })
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .catch((error) => console.error(error));
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     }
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   };
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   const play = () => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     if (player) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       player
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .resume()
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .then(() => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           console.log("Playback resumed");
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           isPlaying = true;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         })
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .catch((error) => console.error(error));
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     if (player) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       player
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .pause()
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .then(() => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           console.log("Playback paused");
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           isPlaying = false;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         })
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .catch((error) => console.error(error));
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     }
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     if (player) {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       player
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .nextTrack()
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .then(() => {
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):           console.log("Skipped to next track");
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         })
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):         .catch((error) => console.error(error));
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     }
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):   function handleDragStart(event, song) {
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):     console.log(song);
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):     event.dataTransfer.setData("application/json", JSON.stringify(song));
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):     event.dataTransfer.effectAllowed = "copy";
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):   }
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):   function handleDrop(event) {
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):     event.preventDefault();
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):     const data = event.dataTransfer.getData("application/json");
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):     if (data) {
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):       const song = JSON.parse(data);
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):       updateRecentSongs(song);
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):       selectedSong.set(song); 
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):     }
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):   }
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   function hidePremiumMessage() {
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     showPremiumMessage = false;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   }
sidebar.svelte (dylan toth on 10/06/2024 at 17:09): <!-- svelte-ignore missing-declaration -->
sidebar.svelte (dylan toth on 10/06/2024 at 17:09): <!-- svelte-ignore a11y-no-static-element-interactions -->
sidebar.svelte (dylan toth on 10/06/2024 at 17:09): <div class="sidebar" on:drop={handleDrop} on:dragover|preventDefault>
sidebar.svelte (dylan toth on 10/06/2024 at 13:44):   {#if showPremiumMessage}
sidebar.svelte (dylan toth on 10/06/2024 at 13:44):     <div class="premium-message">
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):       <p class="small-text">
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):         You need a Spotify Premium account to use the player.
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):       </p>
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):       <button on:click={hidePremiumMessage} class="small-button">Dismiss</button>
sidebar.svelte (dylan toth on 10/06/2024 at 13:44):     </div>
sidebar.svelte (dylan toth on 10/06/2024 at 13:44):   {/if}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):   {#if !showPremiumMessage}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):     {#if showPlayer}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):       <div class="playback-section">
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):         {#if currentSong}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           <div class="playback-img">
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             <img src={currentSong.cover} alt="Album Cover" />
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           </div>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           <div class="song-info">
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             <p class="song-title">{currentSong.title}</p>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             <p class="song-artist">{currentSong.artist}</p>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           </div>
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):         {/if}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):         <div class="playback-controls">
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):           <button
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):             on:click={playPrev}
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):             class="control-button"
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           {#if isPlaying}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           {:else}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           {/if}
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):           <button
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):             on:click={playNext}
sidebar.svelte (dylan toth on 10/06/2024 at 17:09):             class="control-button"
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):         </div>
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):       </div>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):       <div class="recent-songs">
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):         <p class="section-header">Recent Songs</p>
sidebar.svelte (dylan toth on 10/06/2024 at 19:22):         {#each recentSongs as song (song.id + '-' + song.title)}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           <div
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             class="recent-song"
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             draggable="true"
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             on:dragstart={(e) => handleDragStart(e, song)}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):           >
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             <img src={song.cover} alt="Album Cover" class="recent-song-image" />
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             <div class="recent-song-info">
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):               <p class="recent-song-title">{song.title}</p>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):               <p class="recent-song-artist">{song.artist}</p>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):             </div>
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):           </div>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):         {/each}
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):       </div>
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):     {/if}
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   {/if}
sidebar.svelte (dylan toth on 10/06/2024 at 13:44): </div>
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   .premium-message {
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     padding: 10px;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     text-align: center;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     color: #b9b9b9;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     border-radius: 5px;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     margin-bottom: 20px;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     background-color: #2c2f34;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   }
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   .small-text {
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     font-size: 0.9rem;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     margin: 0 0 10px 0;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   }
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   .small-button {
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     padding: 5px 10px;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     background-color: #007bff;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     border: none;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     color: white;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     border-radius: 3px;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     cursor: pointer;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     font-size: 0.8rem;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     transition: background-color 0.3s;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   }
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   .small-button:hover {
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):     background-color: #0056b3;
sidebar.svelte (dylan toth on 10/06/2024 at 02:47):   }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   :global(body) {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin: 0;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     background-color: #16181c;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     color: #f3f1f1;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   *,
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   *::before,
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   *::after {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     box-sizing: border-box;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .sidebar {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     display: flex;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     flex-direction: column;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     background-color: #1d1f25;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     width: 100%;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     max-width: 300px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     padding: 20px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     color: #f3f1f1;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     border-right: 1px solid #26282c;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .playback-section {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin-bottom: 30px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .playback-img img {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     width: 100%;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     max-width: 200px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     border-radius: 10px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin-bottom: 15px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   }
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   .song-info {
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     text-align: center;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   }
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   .song-title {
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     font-size: 1.2rem;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     margin: 5px 0;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   }
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   .song-artist {
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     font-size: 1rem;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     color: #b9b9b9;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):   }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .playback-controls {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     justify-content: center;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     gap: 15px;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     margin-top: 10px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .control-button {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     background-color: #26282c;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     color: #f3f1f1;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     font-size: 20px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     cursor: pointer;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     transition: background-color 0.2s;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     display: flex;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     align-items: center;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     justify-content: center;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .control-button:hover {
sidebar.svelte (dylan toth on 10/06/2024 at 13:44):     background-color: #007bff;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .recent-songs {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     flex: 1;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     margin-top: 20px;
sidebar.svelte (dylan toth on 10/07/2024 at 22:22):     overflow-y: auto;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .section-header {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     font-size: 1.1rem;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin-bottom: 15px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     border-bottom: 1px solid #26282c;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     padding-bottom: 10px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .recent-song {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     align-items: center;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin-bottom: 15px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     padding: 5px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     border-radius: 5px;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):     transition: background-color 0.2s;
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):     cursor: grab;
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):   }
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):   .recent-song:active {
sidebar.svelte (dylan toth on 10/06/2024 at 15:30):     cursor: grabbing;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .recent-song:hover {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     background-color: #26282c;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .recent-song-image {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     width: 60px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     height: 60px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     border-radius: 5px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin-right: 15px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .recent-song-info {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     flex: 1;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .recent-song-title {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     font-size: 1rem;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin: 0;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   .recent-song-artist {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     font-size: 0.9rem;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     color: #b9b9b9;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     margin: 0;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):   @media (max-width: 768px) {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     .sidebar {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):       display: none;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):       border-right: none;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):       border-bottom: 1px solid #26282c;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     .playback-controls {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):       gap: 10px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     .control-button {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):       width: 40px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):       height: 40px;
sidebar.svelte (dylan toth on 10/06/2024 at 14:24):       font-size: 18px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     .playback-img img {
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):       max-width: 150px;
sidebar.svelte (dylan toth on 10/05/2024 at 23:33):     }
sidebar.svelte (dylan toth on 10/05/2024 at 23:33): </style>
+page.js     (dylan toth on 10/08/2024 at 17:08): const PAGE_SIZE = 10; 
+page.js     (dylan toth on 10/06/2024 at 13:44): export async function load({ url }) {
+page.js     (dylan toth on 10/06/2024 at 13:44):   const page = parseInt(url.searchParams.get('page')) || 1; // Get the current page number from the URL
+page.js     (dylan toth on 10/06/2024 at 13:44):     .select(`*, likes (profile_id)`)
+page.js     (dylan toth on 10/06/2024 at 13:44):     .order('created_at', { ascending: false })
+page.js     (dylan toth on 10/06/2024 at 13:44):     .range((page - 1) * PAGE_SIZE, (page * PAGE_SIZE) - 1);
+page.js     (dylan toth on 10/07/2024 at 12:41):       nextPage: null,
+page.js     (dylan toth on 10/06/2024 at 13:44):     likes_count: post.likes.length,
+page.js     (dylan toth on 10/07/2024 at 12:41):   // Determine if there's a next page
+page.js     (dylan toth on 10/07/2024 at 12:41):   const hasNextPage = data.length === PAGE_SIZE;
+page.js     (dylan toth on 10/07/2024 at 12:41):   const nextPage = hasNextPage ? page + 1 : null;
+page.js     (dylan toth on 10/07/2024 at 12:41):     nextPage: nextPage,  // Prepare for the next page load or null if no more pages
+server.js   (dylan toth on 10/07/2024 at 12:41): import { supabase } from '$lib/supabaseClient';
+server.js   (dylan toth on 10/07/2024 at 12:41): const PAGE_SIZE = 10; // Number of posts per page
+server.js   (dylan toth on 10/07/2024 at 12:41): export async function GET({ url }) {
+server.js   (dylan toth on 10/07/2024 at 12:41):   const page = parseInt(url.searchParams.get('page')) || 1;
+server.js   (dylan toth on 10/07/2024 at 12:41):   const { data, error } = await supabase
+server.js   (dylan toth on 10/07/2024 at 12:41):     .from("posts")
+server.js   (dylan toth on 10/07/2024 at 12:41):     .select(`*, likes (profile_id)`)
+server.js   (dylan toth on 10/07/2024 at 12:41):     .order('created_at', { ascending: false })
+server.js   (dylan toth on 10/07/2024 at 12:41):     .range((page - 1) * PAGE_SIZE, (page * PAGE_SIZE) - 1);
+server.js   (dylan toth on 10/07/2024 at 12:41):   if (error) {
+server.js   (dylan toth on 10/07/2024 at 12:41):     console.error("Error fetching posts and likes:", error);
+server.js   (dylan toth on 10/07/2024 at 12:41):     return new Response(JSON.stringify({
+server.js   (dylan toth on 10/07/2024 at 12:41):       success: false,
+server.js   (dylan toth on 10/07/2024 at 12:41):       posts: [],
+server.js   (dylan toth on 10/07/2024 at 12:41):       nextPage: null,
+server.js   (dylan toth on 10/07/2024 at 12:41):     }), { status: 500, headers: { 'Content-Type': 'application/json' } });
+server.js   (dylan toth on 10/07/2024 at 12:41):   }
+server.js   (dylan toth on 10/07/2024 at 12:41):   const postsWithLikeData = data.map(post => ({
+server.js   (dylan toth on 10/07/2024 at 12:41):     ...post,
+server.js   (dylan toth on 10/07/2024 at 12:41):     likes_count: post.likes.length,
+server.js   (dylan toth on 10/07/2024 at 12:41):   }));
+server.js   (dylan toth on 10/07/2024 at 12:41):   const hasNextPage = data.length === PAGE_SIZE;
+server.js   (dylan toth on 10/07/2024 at 12:41):   const nextPage = hasNextPage ? page + 1 : null;
+server.js   (dylan toth on 10/07/2024 at 12:41):   return new Response(JSON.stringify({
+server.js   (dylan toth on 10/07/2024 at 12:41):     success: true,
+server.js   (dylan toth on 10/07/2024 at 12:41):     posts: postsWithLikeData ?? [],
+server.js   (dylan toth on 10/07/2024 at 12:41):     nextPage: nextPage,
+server.js   (dylan toth on 10/07/2024 at 12:41):   }), { status: 200, headers: { 'Content-Type': 'application/json' } });
+server.js   (dylan toth on 10/07/2024 at 12:41): }
+server.js   (dylan toth on 10/06/2024 at 02:47): import { json } from '@sveltejs/kit';
+server.js   (dylan toth on 10/06/2024 at 02:47): import { SPOTIFY_CLIENT_ID, SPOTIFY_CLIENT_SECRET, SPOTIFY_REDIRECT_URI } from '$env/static/private';
+server.js   (dylan toth on 10/06/2024 at 02:47): export async function GET({ url }) {
+server.js   (dylan toth on 10/06/2024 at 02:47):   const code = url.searchParams.get('code');
+server.js   (dylan toth on 10/06/2024 at 02:47):   const error = url.searchParams.get('error');
+server.js   (dylan toth on 10/06/2024 at 02:47):   if (error) {
+server.js   (dylan toth on 10/06/2024 at 02:47):     console.error('Error during Spotify authentication:', error);
+server.js   (dylan toth on 10/06/2024 at 02:47):     return json({ success: false, message: error });
+server.js   (dylan toth on 10/06/2024 at 02:47):   }
+server.js   (dylan toth on 10/06/2024 at 02:47):   if (!code) {
+server.js   (dylan toth on 10/06/2024 at 02:47):     return json({ success: false, message: 'No code provided' });
+server.js   (dylan toth on 10/06/2024 at 02:47):   }
+server.js   (dylan toth on 10/08/2024 at 13:59):   console.log("spotify callback here ")
+server.js   (dylan toth on 10/06/2024 at 02:47):   const client_id = SPOTIFY_CLIENT_ID;
+server.js   (dylan toth on 10/06/2024 at 02:47):   const client_secret = SPOTIFY_CLIENT_SECRET;
+server.js   (dylan toth on 10/06/2024 at 02:47):   const redirect_uri = SPOTIFY_REDIRECT_URI;
+server.js   (dylan toth on 10/06/2024 at 02:47):   const tokenResponse = await fetch('https://accounts.spotify.com/api/token', {
+server.js   (dylan toth on 10/06/2024 at 02:47):     method: 'POST',
+server.js   (dylan toth on 10/06/2024 at 02:47):     headers: {
+server.js   (dylan toth on 10/06/2024 at 02:47):       'Content-Type': 'application/x-www-form-urlencoded',
+server.js   (dylan toth on 10/06/2024 at 02:47):       'Authorization': 'Basic ' + btoa(`${client_id}:${client_secret}`)
+server.js   (dylan toth on 10/06/2024 at 02:47):     },
+server.js   (dylan toth on 10/06/2024 at 02:47):     body: new URLSearchParams({
+server.js   (dylan toth on 10/06/2024 at 02:47):       grant_type: 'authorization_code',
+server.js   (dylan toth on 10/06/2024 at 02:47):       code,
+server.js   (dylan toth on 10/06/2024 at 02:47):       redirect_uri
+server.js   (dylan toth on 10/06/2024 at 02:47):     })
+server.js   (dylan toth on 10/06/2024 at 02:47):   });
+server.js   (dylan toth on 10/06/2024 at 02:47):   const tokenData = await tokenResponse.json();
+server.js   (dylan toth on 10/06/2024 at 02:47):   if (tokenData.error) {
+server.js   (dylan toth on 10/06/2024 at 02:47):     console.error('Error fetching tokens:', tokenData.error);
+server.js   (dylan toth on 10/06/2024 at 02:47):     return json({ success: false, message: tokenData.error_description });
+server.js   (dylan toth on 10/06/2024 at 02:47):   }
+server.js   (dylan toth on 10/06/2024 at 02:47):   const { access_token, refresh_token, expires_in } = tokenData;
+server.js   (dylan toth on 10/06/2024 at 02:47):   // Return the token data to the client
+server.js   (dylan toth on 10/06/2024 at 02:47):   return json({
+server.js   (dylan toth on 10/06/2024 at 02:47):     success: true,
+server.js   (dylan toth on 10/06/2024 at 02:47):     access_token,
+server.js   (dylan toth on 10/06/2024 at 02:47):     refresh_token,
+server.js   (dylan toth on 10/06/2024 at 02:47):     expires_in
+server.js   (dylan toth on 10/06/2024 at 02:47):   });
+server.js   (dylan toth on 10/06/2024 at 02:47): }
+page.svelte (dylan toth on 10/06/2024 at 19:22): <!-- src/routes/(app)/network/+page.svelte -->
+page.svelte (dylan toth on 10/06/2024 at 19:22): <script lang="js">
+page.svelte (dylan toth on 10/06/2024 at 19:22):     import NetworkGraph from '$lib/networkGraph.svelte'; // The graph component you created
+page.svelte (dylan toth on 10/06/2024 at 19:22):   </script>
+page.svelte (dylan toth on 10/06/2024 at 19:22):   <div class="network-page">
+page.svelte (dylan toth on 10/06/2024 at 19:22):     <h1>Network</h1>
+page.svelte (dylan toth on 10/06/2024 at 19:22):     <NetworkGraph />
+page.svelte (dylan toth on 10/06/2024 at 19:22):   </div>
+page.svelte (dylan toth on 10/06/2024 at 19:22):   <style>
+page.svelte (dylan toth on 10/06/2024 at 19:22):     .network-page {
+page.svelte (dylan toth on 10/06/2024 at 19:22):       padding: 20px;
+page.svelte (dylan toth on 10/06/2024 at 19:22):       background-color: #121212;
+page.svelte (dylan toth on 10/06/2024 at 19:22):       color: #f3f1f1;
+page.svelte (dylan toth on 10/06/2024 at 19:22):       min-height: 100vh;
+page.svelte (dylan toth on 10/06/2024 at 19:22):     }
+page.svelte (dylan toth on 10/06/2024 at 19:22):     h1 {
+page.svelte (dylan toth on 10/06/2024 at 19:22):       text-align: center;
+page.svelte (dylan toth on 10/06/2024 at 19:22):       margin-bottom: 20px;
+page.svelte (dylan toth on 10/06/2024 at 19:22):     }
+page.svelte (dylan toth on 10/06/2024 at 19:22):   </style>
+page.svelte (dylan toth on 10/06/2024 at 03:32):   import {signInWithGoogle, signInWithSpotify} from "$lib/utils.js";
+page.svelte (dylan toth on 10/06/2024 at 03:32):       <button class="spotify" on:click={signInWithSpotify}>
+server.js   (dylan toth on 10/06/2024 at 02:47): const client_secret = '91710a7ff19648a994c76e9990a478f7';
+server.js   (dylan toth on 10/06/2024 at 02:47): const redirect_uri = 'http://localhost:5173/api/spotify/callback';
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22): <script>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     import { createEventDispatcher } from "svelte";
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     const dispatch = createEventDispatcher();
tutorialOverlay.svelte (dylan toth on 10/14/2024 at 23:24):     let dontShowAgain = false;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     function closeTutorial() {
tutorialOverlay.svelte (dylan toth on 10/14/2024 at 23:24):       dispatch("close", { dontShowAgain });
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22): </script>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22): <div class="overlay">
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   <div class="modal">
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     <h2>Welcome to Discover!</h2>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     <p>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       Use the arrow keys/WASD (desktop) or swipe gestures (mobile) to navigate through the song grid.
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     </p>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     <p>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       Press <span class="key">Spacebar</span> to play/pause previews.
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     </p>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     <p>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       <span class="key">Enter</span> to add a song to your OpenVinyl Discover playlist.
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     </p>
tutorialOverlay.svelte (dylan toth on 10/14/2024 at 23:24):     <label>
tutorialOverlay.svelte (dylan toth on 10/14/2024 at 23:24):       <input type="checkbox" bind:checked={dontShowAgain}>
tutorialOverlay.svelte (dylan toth on 10/14/2024 at 23:24):       Don't show this again
tutorialOverlay.svelte (dylan toth on 10/14/2024 at 23:24):     </label>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     <button on:click={closeTutorial}>Got it!</button>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   </div>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22): </div>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22): <style>
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   .overlay {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     position: fixed;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     top: 0;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     left: 0;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     width: 100%;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     height: 100%;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     background: rgba(0, 0, 0, 0.7);
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     display: flex;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     justify-content: center;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     align-items: center;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     z-index: 1000;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   .modal {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     background: #e5e6e2;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     padding: 20px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     border-radius: 8px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     max-width: 400px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     width: 90%;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     text-align: center;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     color: #1d1f25;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     position: relative;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   .key {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     display: inline-block;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     background-color: #f0f0f0;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     border: 1px solid #ccc;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     border-radius: 4px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     padding: 5px 10px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     margin: 0 2px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     font-family: monospace;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     box-shadow: 0 2px #999;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     cursor: default;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     user-select: none;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     transition: transform 0.1s, box-shadow 0.1s;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   .key:active {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     box-shadow: 0 1px #666;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     transform: translateY(1px);
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   button {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     margin-top: 20px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     padding: 10px 20px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     background-color: #1db954;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     color: white;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     border: none;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     border-radius: 5px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     cursor: pointer;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     font-size: 16px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     transition: background-color 0.3s;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   button:hover {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     background-color: #1ed760;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   @media (max-width: 480px) {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     .modal {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       padding: 15px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     .key {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       padding: 4px 8px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       font-size: 14px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     button {
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       padding: 8px 16px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):       font-size: 14px;
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):     }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22):   }
tutorialOverlay.svelte (dylan toth on 10/07/2024 at 22:22): </style>
addPost.svelte (dylan toth on 10/05/2024 at 22:52): <script>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   import { createPost } from "$lib/utils";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   import { supabase } from "$lib/supabaseClient.js";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   import { onMount, onDestroy } from "svelte";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   import { createEventDispatcher } from "svelte";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   import { selectedSong } from "$lib/stores";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   import { spotify } from "$lib/spotifyClient.js";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   const dispatch = createEventDispatcher();
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let user = null;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let username = "Guest";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let content = "";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let search = "";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let searchResults = [];
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let errorMessage = "";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let successMessage = "";
addPost.svelte (dylan toth on 10/12/2024 at 00:21):   let profile_picture_url = null;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let showAddPost = false;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let localSelectedTrack = null;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   const unsubscribe = selectedSong.subscribe((song) => {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     if (song) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       localSelectedTrack = {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         id: song.id,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         title: song.title,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         artist: song.artist,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         cover: song.cover,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       };
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   });
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   onDestroy(() => {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     unsubscribe();
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   });
addPost.svelte (dylan toth on 10/12/2024 at 00:21):   onMount( () => {
addPost.svelte (dylan toth on 10/12/2024 at 00:21):     localSelectedTrack = null;
addPost.svelte (dylan toth on 10/12/2024 at 00:21):   } );
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   onMount(async () => {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     const {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       data: { session },
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       error,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     } = await supabase.auth.getSession();
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     if (error) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       console.error("Error fetching session:", error);
addPost.svelte (dylan toth on 10/05/2024 at 22:52):     }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     if (session) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       user = session.user;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       showAddPost = true;
addPost.svelte (dylan toth on 10/08/2024 at 17:08):         console.log("user: ", user)
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       const { data: profile, error: profileError } = await supabase
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         .from("profiles")
addPost.svelte (dylan toth on 10/12/2024 at 00:21):         .select("username, avatar_url")
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         .eq("id", user.id)
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         .single();
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       if (profileError) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         console.error("Error fetching profile:", profileError);
addPost.svelte (dylan toth on 10/06/2024 at 17:09):       } else {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         username = profile?.username || "Guest";
addPost.svelte (dylan toth on 10/12/2024 at 00:21):         console.log("profile: ", profile)
addPost.svelte (dylan toth on 10/12/2024 at 00:21):         profile_picture_url = profile?.avatar_url;
addPost.svelte (dylan toth on 10/06/2024 at 17:09):       }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     } else {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       showAddPost = false;
addPost.svelte (dylan toth on 10/05/2024 at 22:52):     }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   });
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   let debounceTimeout;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   async function getSearch() {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     clearTimeout(debounceTimeout);
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     debounceTimeout = setTimeout(async () => {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       try {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         if (search.trim() !== "") {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           const trackData = await spotify.searchTracks(search, { limit: 5 });
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           displayResults(trackData);
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         } else {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           searchResults = [];
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       } catch (err) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         console.error("Error fetching track data:", err);
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     }, 300);
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   function displayResults(data) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     if (data.tracks) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       searchResults = data.tracks.items.map((track) => ({
addPost.svelte (dylan toth on 10/06/2024 at 17:09):         id: track.id,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         name: track.name,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         artists: track.artists.map((artist) => artist.name),
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         album: track.album,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         cover: track.album.images[0]?.url,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       }));
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     } else {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       searchResults = [];
addPost.svelte (dylan toth on 10/05/2024 at 22:52):     }
addPost.svelte (dylan toth on 10/06/2024 at 17:09):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   function selectSong(track) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     localSelectedTrack = {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       id: track.id,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       title: track.name,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       artist: track.artists.join(", "),
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       cover: track.cover || track.album.images[0]?.url,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     };
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     searchResults = []; 
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     search = ""; 
addPost.svelte (dylan toth on 10/06/2024 at 17:09):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   async function makePost() {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     errorMessage = "";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     successMessage = "";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     if (!localSelectedTrack) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       errorMessage = "Please select a song.";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       return;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     if (!rating || isNaN(rating) || rating < 1 || rating > 10) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       errorMessage = "Please enter a rating between 1 and 10.";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       return;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     try {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       const { data: createdPost, error } = await createPost(
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         user.id,
addPost.svelte (dylan toth on 10/06/2024 at 17:09):         content,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         localSelectedTrack.id,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         parseInt(rating)
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       );
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       if (error) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         console.error("Error submitting review:", error);
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         errorMessage = "Error submitting review.";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       } else {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         successMessage = "Review submitted successfully!";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         const newPost = {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           id: Date.now(), // tmp value
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           content,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           rating: parseInt(rating),
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           song_id: localSelectedTrack.id,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         };
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         localSelectedTrack = null;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         rating = "";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         content = "";
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         searchResults = [];
addPost.svelte (dylan toth on 10/10/2024 at 13:01):         // console.log("makePost: ", post)
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         dispatch("reviewSubmitted", {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           post: {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             ...createdPost,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             likes_count: createdPost.likes.length,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           },
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         });
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     } catch (err) {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       console.error("Error creating post:", err);
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       errorMessage = "An error occurred while submitting your review.";
addPost.svelte (dylan toth on 10/05/2024 at 22:52):     }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41): </script>
addPost.svelte (dylan toth on 10/07/2024 at 12:41): {#if showAddPost}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   <div class="add-review-wrapper">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     <div class="add-review">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       <div class="top-bar">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         <div class="user-info">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           <img
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             class="profile-pic"
addPost.svelte (dylan toth on 10/12/2024 at 00:21):             src={profile_picture_url}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             alt="profile"
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           />
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           <span class="username">{username}</span>
addPost.svelte (dylan toth on 10/05/2024 at 22:52):         </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):       </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         {#if !localSelectedTrack}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             <input
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               type="text"
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               bind:value={search}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               on:input={getSearch}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               placeholder="Search for a song..."
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             />
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             {#if searchResults.length > 0}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               <ul class="search-results">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                 <!-- svelte-ignore a11y-no-noninteractive-element-interactions -->
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                 {#each searchResults as track}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                   <!-- svelte-ignore a11y-click-events-have-key-events -->
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                   <li on:click={() => selectSong(track)}>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                     <img src={track.cover} alt="album cover" />
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                     <div class="song-info">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                       <p class="song-name">{track.name}</p>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                       <p class="artist-name">{track.artists.join(", ")}</p>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                     </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                   </li>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                 {/each}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               </ul>
addPost.svelte (dylan toth on 10/06/2024 at 15:30):             {/if}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         {:else}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           <div class="selected-song">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             <img
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               class="album-cover"
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               src={localSelectedTrack.cover}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               alt="album cover"
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             />
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             <div class="song-info-wrapper">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               <p class="song-name">{localSelectedTrack.title}</p>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               <p class="artist-name">{localSelectedTrack.artist}</p>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               <button
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                 on:click={() => {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                   localSelectedTrack = null;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                 }}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):                 class="change-song-button">Change song</button
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               >
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           <div class="rating-wrapper">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           <div class="description-wrapper">
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             <label for="content">Description (optional):</label>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             <textarea
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               id="content"
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               bind:value={content}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):               placeholder="Write your review..."
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             ></textarea>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           {#if errorMessage}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             <p class="error-message">{errorMessage}</p>
addPost.svelte (dylan toth on 10/06/2024 at 15:30):           {/if}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           {#if successMessage}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             <p class="success-message">{successMessage}</p>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           {/if}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           <button class="submit-button" on:click={makePost}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):             >Submit Review</button
addPost.svelte (dylan toth on 10/07/2024 at 12:41):           >
addPost.svelte (dylan toth on 10/07/2024 at 12:41):         {/if}
addPost.svelte (dylan toth on 10/05/2024 at 22:52):       </div>
addPost.svelte (dylan toth on 10/05/2024 at 22:52):     </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   </div>
addPost.svelte (dylan toth on 10/07/2024 at 12:41): {:else}
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   <p class="must-be-logged-in">You must be logged in to create a post.</p>
addPost.svelte (dylan toth on 10/07/2024 at 12:41): {/if}
addPost.svelte (dylan toth on 10/07/2024 at 12:41): <style>
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   *,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   *::before,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   *::after {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     box-sizing: border-box;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .must-be-logged-in {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 0.8rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #b9b9b9;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     text-align: center;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin: 20px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .add-review-wrapper {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     justify-content: center;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     width: 100%;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .add-review {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     flex-direction: column;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #1d1f25;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     width: 70%;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin: 20px auto;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #f3f1f1;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border: 1px solid #26282c;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-family: "Concert One", sans-serif;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 8px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .top-bar {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     align-items: center;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     justify-content: space-between;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #26282c;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 5px 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .user-info {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     align-items: center;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .profile-pic {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     width: 25px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     height: 25px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 50%;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-right: 8px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .username {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 0.8rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #b9b9b9;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .top-bar-text {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 1rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #b9b9b9;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .content-wrapper {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .song-search input {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 8px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin: 0;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #2e2e2e;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border: 1px solid #444;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #fff;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 1rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .search-results {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     list-style: none;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 0;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin: 0;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     max-height: 200px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     overflow-y: auto;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #2e2e2e;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border: 1px solid #444;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-top: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .search-results li {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     align-items: center;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     cursor: pointer;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .search-results li:hover {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #333;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .search-results img {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     width: 50px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     height: 50px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-right: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .selected-song {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     align-items: center;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-bottom: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .album-cover {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     width: 100px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     height: 100px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     object-fit: cover;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-right: 15px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .song-info-wrapper {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     flex: 1;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .song-name {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 1.2rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #e4e4e4;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin: 0;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .artist-name {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 0.9rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #b9b9b9;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .change-song-button {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-top: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 5px 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #444;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border: none;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #fff;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     cursor: pointer;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 0.9rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .change-song-button:hover {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #666;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .rating-wrapper,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .description-wrapper {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-top: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .rating-wrapper label,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .description-wrapper label {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     display: block;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-bottom: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 0.9rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #b9b9b9;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .rating-wrapper input,
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .description-wrapper textarea {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     width: 100%;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 8px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #2e2e2e;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border: 1px solid #444;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #fff;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 1rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .description-wrapper textarea {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     height: 100px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     resize: vertical;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .submit-button {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-top: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     padding: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #007bff;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border: none;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: #fff;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 1rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     cursor: pointer;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     width: 100%;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 5px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     transition: background-color 0.2s;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .submit-button:hover {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: #0056b3;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .error-message {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: red;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-top: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 0.9rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   .success-message {
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     color: green;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     margin-top: 10px;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):     font-size: 0.9rem;
addPost.svelte (dylan toth on 10/07/2024 at 12:41):   }
addPost.svelte (dylan toth on 10/11/2024 at 23:14):   @media (max-width: 768px) {
addPost.svelte (dylan toth on 10/11/2024 at 23:14):     .add-review {
addPost.svelte (dylan toth on 10/11/2024 at 23:14):         width: 90%;
addPost.svelte (dylan toth on 10/11/2024 at 23:14):     }
addPost.svelte (dylan toth on 10/11/2024 at 23:14):   }
addPost.svelte (dylan toth on 10/07/2024 at 12:41): </style>
+page.svelte (dylan toth on 10/11/2024 at 16:49): <!-- src/routes/posts/[post_id]/+page.svelte -->
+page.svelte (dylan toth on 10/11/2024 at 16:49): <script>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import { onMount, onDestroy } from 'svelte';
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import { supabase } from '$lib/supabaseClient';
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import { user } from "$lib/stores";
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import { page } from "$app/stores";
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import {authenticateClientCredentials} from "$lib/utils.js";
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import "@fortawesome/fontawesome-free/css/all.css";
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import "@fortawesome/fontawesome-free/js/all.js";
+page.svelte (dylan toth on 10/11/2024 at 16:49):     import {spotify} from "$lib/spotifyClient.js";
+page.svelte (dylan toth on 10/12/2024 at 00:21):     import Comment from '$lib/comment.svelte';
+page.svelte (dylan toth on 10/11/2024 at 16:49):     export let data;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     let { post, comments } = data;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     //song - id, img_url, title, artist
+page.svelte (dylan toth on 10/11/2024 at 16:49):     let currentUser = null;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     const unsubscribe = user.subscribe(value => {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       currentUser = value;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       if (currentUser) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         checkIfLiked();
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     });
+page.svelte (dylan toth on 10/11/2024 at 16:49):     onDestroy(() => {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       unsubscribe();
+page.svelte (dylan toth on 10/11/2024 at 16:49):     });
+page.svelte (dylan toth on 10/11/2024 at 16:49):   let song = null;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     // Like State
+page.svelte (dylan toth on 10/11/2024 at 16:49):     let liked = false;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     let likesCount = 0;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     let processingLike = false;
+page.svelte (dylan toth on 10/12/2024 at 00:21):     let avatar_url = null;
+page.svelte (dylan toth on 10/12/2024 at 00:21):     let isSubmitting = false;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     onMount(async () => {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         await authenticateClientCredentials();
+page.svelte (dylan toth on 10/11/2024 at 16:49):         const trackData = await spotify.getTrack(post.song_id);
+page.svelte (dylan toth on 10/11/2024 at 16:49):         song = {
+page.svelte (dylan toth on 10/11/2024 at 16:49):             id: post.song_id,
+page.svelte (dylan toth on 10/11/2024 at 16:49):             title: trackData.name,
+page.svelte (dylan toth on 10/11/2024 at 16:49):             artist: trackData.artists[0].name,
+page.svelte (dylan toth on 10/11/2024 at 16:49):             image_url: trackData.album.images[0].url
+page.svelte (dylan toth on 10/11/2024 at 16:49):         }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       fetchLikesCount();
+page.svelte (dylan toth on 10/12/2024 at 00:21):       console.log(post)
+page.svelte (dylan toth on 10/12/2024 at 00:21):       const { data, error } = await supabase
+page.svelte (dylan toth on 10/12/2024 at 00:21):         .from("profiles")
+page.svelte (dylan toth on 10/12/2024 at 00:21):         .select("username, avatar_url")
+page.svelte (dylan toth on 10/12/2024 at 00:21):         .eq("id", post.profile_id)
+page.svelte (dylan toth on 10/12/2024 at 00:21):         .maybeSingle();
+page.svelte (dylan toth on 10/12/2024 at 00:21):         if (data) {
+page.svelte (dylan toth on 10/12/2024 at 00:21):             console.log(data.avatar_url)
+page.svelte (dylan toth on 10/12/2024 at 00:21):             avatar_url = data.avatar_url;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       if (currentUser) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         checkIfLiked();
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     });
+page.svelte (dylan toth on 10/11/2024 at 16:49):     async function fetchLikesCount() {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       const { count, error } = await supabase
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .from('likes')
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .select('*', { count: 'exact', head: true })
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .eq('post_id', post.id);
+page.svelte (dylan toth on 10/11/2024 at 16:49):       if (error) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         console.error('Error fetching likes count:', error);
+page.svelte (dylan toth on 10/11/2024 at 16:49):         return;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       likesCount = count;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     async function checkIfLiked() {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       if (!currentUser) return;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       const { data: existingLike, error } = await supabase
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .from('likes')
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .select('*')
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .eq('post_id', post.id)
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .eq('profile_id', currentUser.id)
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .single();
+page.svelte (dylan toth on 10/11/2024 at 16:49):       if (error && error.code !== 'PGRST116') { 
+page.svelte (dylan toth on 10/11/2024 at 16:49):         console.error('Error checking if liked:', error);
+page.svelte (dylan toth on 10/11/2024 at 16:49):         return;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       liked = !!existingLike;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     async function toggleLike(event) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       event.stopPropagation();
+page.svelte (dylan toth on 10/11/2024 at 16:49):       if (processingLike || !currentUser) return;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       processingLike = true;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       try {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         if (liked) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):           const { error } = await supabase
+page.svelte (dylan toth on 10/11/2024 at 16:49):             .from('likes')
+page.svelte (dylan toth on 10/11/2024 at 16:49):             .delete()
+page.svelte (dylan toth on 10/11/2024 at 16:49):             .eq('post_id', post.id)
+page.svelte (dylan toth on 10/11/2024 at 16:49):             .eq('profile_id', currentUser.id);
+page.svelte (dylan toth on 10/11/2024 at 16:49):           if (error) throw error;
+page.svelte (dylan toth on 10/11/2024 at 16:49):           liked = false;
+page.svelte (dylan toth on 10/11/2024 at 16:49):           likesCount -= 1;
+page.svelte (dylan toth on 10/11/2024 at 16:49):         } else {
+page.svelte (dylan toth on 10/11/2024 at 16:49):           // Add like
+page.svelte (dylan toth on 10/11/2024 at 16:49):           const { error } = await supabase
+page.svelte (dylan toth on 10/11/2024 at 16:49):             .from('likes')
+page.svelte (dylan toth on 10/11/2024 at 16:49):             .insert({ post_id: post.id, profile_id: currentUser.id });
+page.svelte (dylan toth on 10/11/2024 at 16:49):           if (error) throw error;
+page.svelte (dylan toth on 10/11/2024 at 16:49):           liked = true;
+page.svelte (dylan toth on 10/11/2024 at 16:49):           likesCount += 1;
+page.svelte (dylan toth on 10/11/2024 at 16:49):         }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       } catch (err) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         console.error('Error toggling like:', err);
+page.svelte (dylan toth on 10/11/2024 at 16:49):       } finally {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         processingLike = false;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     } 
+page.svelte (dylan toth on 10/11/2024 at 16:49):     // Function to render stars based on rating
+page.svelte (dylan toth on 10/11/2024 at 16:49):     function renderStars(rating) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       const stars = [];
+page.svelte (dylan toth on 10/11/2024 at 16:49):       const ratingOutOfFive = rating / 2;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       for (let i = 1; i <= 5; i++) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         if (ratingOutOfFive >= i) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):           stars.push('<i class="fa-solid fa-star"></i>');
+page.svelte (dylan toth on 10/11/2024 at 16:49):         } else if (ratingOutOfFive >= i - 0.5) {
+page.svelte (dylan toth on 10/11/2024 at 16:49):           stars.push('<i class="fa-regular fa-star-half-stroke"></i>');
+page.svelte (dylan toth on 10/11/2024 at 16:49):         } else {
+page.svelte (dylan toth on 10/11/2024 at 16:49):           stars.push('<i class="fa-regular fa-star"></i>');
+page.svelte (dylan toth on 10/11/2024 at 16:49):         }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       return stars.join('');
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     // Comment Handling (Optional)
+page.svelte (dylan toth on 10/11/2024 at 16:49):     let newComment = '';
+page.svelte (dylan toth on 10/12/2024 at 00:21):     async function addComment() {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       if (!newComment.trim()) return;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       isSubmitting = true;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       console.log("user: ", currentUser)
+page.svelte (dylan toth on 10/12/2024 at 00:21):       if (!currentUser) {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         alert('You must be logged in to comment.');
+page.svelte (dylan toth on 10/12/2024 at 00:21):         isSubmitting = false;
+page.svelte (dylan toth on 10/11/2024 at 16:49):         return;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       const { data: inserted, error } = await supabase
+page.svelte (dylan toth on 10/11/2024 at 16:49):         .from('comments')
+page.svelte (dylan toth on 10/12/2024 at 00:21):         .insert([
+page.svelte (dylan toth on 10/12/2024 at 00:21):           {
+page.svelte (dylan toth on 10/12/2024 at 00:21):             post_id: post.id,
+page.svelte (dylan toth on 10/12/2024 at 00:21):             profile_id: currentUser.id,
+page.svelte (dylan toth on 10/12/2024 at 00:21):             comment: newComment
+page.svelte (dylan toth on 10/12/2024 at 00:21):           }
+page.svelte (dylan toth on 10/12/2024 at 00:21):         ])
+page.svelte (dylan toth on 10/12/2024 at 00:21):         .select(`id, profile_id, comment, created_at`)
+page.svelte (dylan toth on 10/12/2024 at 00:21):         .single();
+page.svelte (dylan toth on 10/12/2024 at 00:21):       if (error) {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         console.error('Error adding comment:', error);
+page.svelte (dylan toth on 10/12/2024 at 00:21):         alert('Failed to add comment. Please try again.');
+page.svelte (dylan toth on 10/12/2024 at 00:21):       } else {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         // Fetch user info for the current user
+page.svelte (dylan toth on 10/12/2024 at 00:21):         const { data: userInfo, error: userError } = await supabase
+page.svelte (dylan toth on 10/12/2024 at 00:21):           .from('profiles')
+page.svelte (dylan toth on 10/12/2024 at 00:21):           .select(`username, avatar_url`)
+page.svelte (dylan toth on 10/12/2024 at 00:21):           .eq('id', currentUser.id)
+page.svelte (dylan toth on 10/12/2024 at 00:21):           .single();
+page.svelte (dylan toth on 10/12/2024 at 00:21):         if (userError) {
+page.svelte (dylan toth on 10/12/2024 at 00:21):           console.error('Error fetching user info:', userError);
+page.svelte (dylan toth on 10/12/2024 at 00:21):           alert('Failed to fetch user info for the comment.');
+page.svelte (dylan toth on 10/12/2024 at 00:21):         } else {
+page.svelte (dylan toth on 10/12/2024 at 00:21):           // Assign a new array to trigger reactivity
+page.svelte (dylan toth on 10/12/2024 at 00:21):           console.log("comments before, ", comments)
+page.svelte (dylan toth on 10/12/2024 at 00:21):           console.log(inserted)
+page.svelte (dylan toth on 10/12/2024 at 00:21):           comments = [
+page.svelte (dylan toth on 10/12/2024 at 00:21):             ...comments,
+page.svelte (dylan toth on 10/12/2024 at 00:21):             {
+page.svelte (dylan toth on 10/12/2024 at 00:21):               ...inserted,
+page.svelte (dylan toth on 10/12/2024 at 00:21):               profiles: {
+page.svelte (dylan toth on 10/12/2024 at 00:21):                 username: userInfo.username,
+page.svelte (dylan toth on 10/12/2024 at 00:21):                 avatar_url: userInfo.avatar_url
+page.svelte (dylan toth on 10/12/2024 at 00:21):               }
+page.svelte (dylan toth on 10/12/2024 at 00:21):             }
+page.svelte (dylan toth on 10/12/2024 at 00:21):           ];
+page.svelte (dylan toth on 10/12/2024 at 00:21):           console.log("comments now", comments)
+page.svelte (dylan toth on 10/12/2024 at 00:21):         }
+page.svelte (dylan toth on 10/12/2024 at 00:21):         newComment = '';
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       isSubmitting = false;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   // State variables
+page.svelte (dylan toth on 10/14/2024 at 23:30):   let upvotesCount = 0;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   let downvotesCount = 0;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   let userVote = null; // 'upvote', 'downvote', or null
+page.svelte (dylan toth on 10/14/2024 at 23:30):   let processingVote = false;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   $: netVotes = upvotesCount - downvotesCount;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   onMount(async () => {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     try {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       await fetchVoteCounts();
+page.svelte (dylan toth on 10/14/2024 at 23:30):       await checkUserVote();
+page.svelte (dylan toth on 10/14/2024 at 23:30):     } catch (err) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       console.error("Error during onMount:", err);
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   });
+page.svelte (dylan toth on 10/14/2024 at 23:30):   async function fetchVoteCounts() {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     // Fetch upvotes count
+page.svelte (dylan toth on 10/14/2024 at 23:30):     const { count: upvotesCountData, error: upvotesError } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .from("likes")
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .select("id", { count: "exact" })
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("post_id", post.id)
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("isLiked", true);
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (upvotesError) throw upvotesError;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     upvotesCount = upvotesCountData || 0;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     // Fetch downvotes count
+page.svelte (dylan toth on 10/14/2024 at 23:30):     const { count: downvotesCountData, error: downvotesError } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .from("likes")
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .select("id", { count: "exact" })
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("post_id", post.id)
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("isLiked", false);
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (downvotesError) throw downvotesError;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     downvotesCount = downvotesCountData || 0;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   async function checkUserVote() {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (!currentUser) return;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     const { data: existingVote, error } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .from("likes")
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .select("id, isLiked")
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("post_id", post.id)
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("profile_id", currentUser.id)
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .maybeSingle();
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (error) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       console.error("Error checking user vote:", error);
+page.svelte (dylan toth on 10/14/2024 at 23:30):       return;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (existingVote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       userVote = existingVote.isLiked ? "upvote" : "downvote";
+page.svelte (dylan toth on 10/14/2024 at 23:30):     } else {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       userVote = null;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   async function toggleVote(voteType) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (processingVote || !currentUser) return;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     processingVote = true;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     try {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       const { data: existingVote, error } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:30):         .from("likes")
+page.svelte (dylan toth on 10/14/2024 at 23:30):         .select("*")
+page.svelte (dylan toth on 10/14/2024 at 23:30):         .eq("post_id", post.id)
+page.svelte (dylan toth on 10/14/2024 at 23:30):         .eq("profile_id", currentUser.id)
+page.svelte (dylan toth on 10/14/2024 at 23:30):         .maybeSingle();
+page.svelte (dylan toth on 10/14/2024 at 23:30):       if (error) throw error;
+page.svelte (dylan toth on 10/14/2024 at 23:30):       if (existingVote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):         if (
+page.svelte (dylan toth on 10/14/2024 at 23:30):           (existingVote.isLiked && voteType === "upvote") ||
+page.svelte (dylan toth on 10/14/2024 at 23:30):           (!existingVote.isLiked && voteType === "downvote")
+page.svelte (dylan toth on 10/14/2024 at 23:30):         ) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):           // Remove the vote
+page.svelte (dylan toth on 10/14/2024 at 23:30):           await removeVote(existingVote.id, existingVote.isLiked);
+page.svelte (dylan toth on 10/14/2024 at 23:30):         } else {
+page.svelte (dylan toth on 10/14/2024 at 23:30):           // Update the vote
+page.svelte (dylan toth on 10/14/2024 at 23:30):           await updateVote(
+page.svelte (dylan toth on 10/14/2024 at 23:30):             existingVote.id,
+page.svelte (dylan toth on 10/14/2024 at 23:30):             voteType === "upvote",
+page.svelte (dylan toth on 10/14/2024 at 23:30):             existingVote.isLiked
+page.svelte (dylan toth on 10/14/2024 at 23:30):           );
+page.svelte (dylan toth on 10/14/2024 at 23:30):         }
+page.svelte (dylan toth on 10/14/2024 at 23:30):       } else {
+page.svelte (dylan toth on 10/14/2024 at 23:30):         // Add new vote
+page.svelte (dylan toth on 10/14/2024 at 23:30):         await addVote(voteType === "upvote");
+page.svelte (dylan toth on 10/14/2024 at 23:30):       }
+page.svelte (dylan toth on 10/14/2024 at 23:30):     } catch (err) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       console.error("Error toggling vote:", err);
+page.svelte (dylan toth on 10/14/2024 at 23:30):       alert("Failed to process your vote. Please try again.");
+page.svelte (dylan toth on 10/14/2024 at 23:30):     } finally {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       processingVote = false;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   async function addVote(isUpvote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     const { error } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .from("likes")
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .insert({
+page.svelte (dylan toth on 10/14/2024 at 23:30):         post_id: post.id,
+page.svelte (dylan toth on 10/14/2024 at 23:30):         profile_id: currentUser.id,
+page.svelte (dylan toth on 10/14/2024 at 23:30):         isLiked: isUpvote,
+page.svelte (dylan toth on 10/14/2024 at 23:30):       });
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (error) throw error;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (isUpvote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       upvotesCount += 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):       userVote = "upvote";
+page.svelte (dylan toth on 10/14/2024 at 23:30):     } else {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       downvotesCount += 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):       userVote = "downvote";
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   async function updateVote(voteId, isUpvote, wasUpvote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     const { data, error } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .from("likes")
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .update({ isLiked: isUpvote })
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("id", voteId)
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("profile_id", currentUser.id)
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .select();
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (error) throw error;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (!data || data.length === 0) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       console.error("Update failed: No rows affected.");
+page.svelte (dylan toth on 10/14/2024 at 23:30):       return;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (wasUpvote && !isUpvote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       upvotesCount -= 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):       downvotesCount += 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     } else if (!wasUpvote && isUpvote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       upvotesCount += 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):       downvotesCount -= 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):     userVote = isUpvote ? "upvote" : "downvote";
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   async function removeVote(voteId, wasUpvote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     const { error } = await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .from("likes")
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .delete()
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("id", voteId)
+page.svelte (dylan toth on 10/14/2024 at 23:30):       .eq("profile_id", currentUser.id);
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (error) throw error;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     if (wasUpvote) {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       upvotesCount -= 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     } else {
+page.svelte (dylan toth on 10/14/2024 at 23:30):       downvotesCount -= 1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):     userVote = null;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/11/2024 at 16:49):   </script>
+page.svelte (dylan toth on 10/12/2024 at 00:21): <div class="post-detail-wrapper">
+page.svelte (dylan toth on 10/11/2024 at 16:49):     <div class="post-header">
+page.svelte (dylan toth on 10/11/2024 at 16:49):       <div class="user-info">
+page.svelte (dylan toth on 10/12/2024 at 00:21):         <img class="profile-pic" src={avatar_url} alt="profile" />
+page.svelte (dylan toth on 10/12/2024 at 00:21):         <span class="username">{post.profiles.username}</span> 
+page.svelte (dylan toth on 10/12/2024 at 00:21):         <span>&nbsp;reviewed</span>
+page.svelte (dylan toth on 10/11/2024 at 16:49):       </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     <div class="post-content">
+page.svelte (dylan toth on 10/11/2024 at 16:49):       {#if song}
+page.svelte (dylan toth on 10/11/2024 at 16:49):         <div class="album-cover-container">
+page.svelte (dylan toth on 10/11/2024 at 16:49):           <img class="album-cover" src={song.image_url || 'https://placehold.co/300'} alt="album cover" />
+page.svelte (dylan toth on 10/11/2024 at 16:49):           <a href={`/discover/${song.id}`} class="play-button" aria-label="Play Song">
+page.svelte (dylan toth on 10/11/2024 at 16:49):             <i class="fa-solid fa-play"></i>
+page.svelte (dylan toth on 10/11/2024 at 16:49):           </a>
+page.svelte (dylan toth on 10/11/2024 at 16:49):         </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):         <div class="song-info">
+page.svelte (dylan toth on 10/11/2024 at 16:49):           <h2 class="song-title">{song.title || 'Song Title'}</h2>
+page.svelte (dylan toth on 10/11/2024 at 16:49):           <p class="song-artist">{song.artist || 'Artist Name'}</p>
+page.svelte (dylan toth on 10/11/2024 at 16:49):         </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):       {:else}
+page.svelte (dylan toth on 10/11/2024 at 16:49):         <div class="no-song">
+page.svelte (dylan toth on 10/11/2024 at 16:49):           <p>No song associated with this post.</p>
+page.svelte (dylan toth on 10/11/2024 at 16:49):         </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):       {/if}
+page.svelte (dylan toth on 10/11/2024 at 16:49):     </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     <div class="post-rating">
+page.svelte (dylan toth on 10/11/2024 at 16:49):       <p>{@html renderStars(post.rating)}</p>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     <div class="post-content-section">
+page.svelte (dylan toth on 10/11/2024 at 16:49):       <p>{post.content || 'No content provided.'}</p>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     </div>
+page.svelte (dylan toth on 10/14/2024 at 23:30):     <div class="vote-section">
+page.svelte (dylan toth on 10/14/2024 at 23:30):       <button
+page.svelte (dylan toth on 10/14/2024 at 23:30):         on:click={() => toggleVote('upvote')}
+page.svelte (dylan toth on 10/14/2024 at 23:30):         disabled={!currentUser || processingVote}
+page.svelte (dylan toth on 10/14/2024 at 23:30):         class="vote-button upvote-button"
+page.svelte (dylan toth on 10/14/2024 at 23:30):         aria-label="Upvote"
+page.svelte (dylan toth on 10/14/2024 at 23:30):         class:selected={userVote === 'upvote'}
+page.svelte (dylan toth on 10/14/2024 at 23:30):       >
+page.svelte (dylan toth on 10/14/2024 at 23:30):         <i class="fa-solid fa-arrow-up"></i>
+page.svelte (dylan toth on 10/14/2024 at 23:30):       </button>
+page.svelte (dylan toth on 10/14/2024 at 23:30):       <span class="net-vote-count">{netVotes}</span>
+page.svelte (dylan toth on 10/12/2024 at 00:21):       <button
+page.svelte (dylan toth on 10/14/2024 at 23:30):         on:click={() => toggleVote('downvote')}
+page.svelte (dylan toth on 10/14/2024 at 23:30):         disabled={!currentUser || processingVote}
+page.svelte (dylan toth on 10/14/2024 at 23:30):         class="vote-button downvote-button"
+page.svelte (dylan toth on 10/14/2024 at 23:30):         aria-label="Downvote"
+page.svelte (dylan toth on 10/14/2024 at 23:30):         class:selected={userVote === 'downvote'}
+page.svelte (dylan toth on 10/12/2024 at 00:21):       >
+page.svelte (dylan toth on 10/14/2024 at 23:30):         <i class="fa-solid fa-arrow-down"></i>
+page.svelte (dylan toth on 10/12/2024 at 00:21):       </button>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     </div>
+page.svelte (dylan toth on 10/12/2024 at 00:21):     <section class="comments-section">
+page.svelte (dylan toth on 10/12/2024 at 00:21):       <h2>Comments ({comments.length})</h2>
+page.svelte (dylan toth on 10/12/2024 at 00:21):       <form on:submit|preventDefault={addComment} class="comment-form">
+page.svelte (dylan toth on 10/12/2024 at 00:21):         <textarea
+page.svelte (dylan toth on 10/12/2024 at 00:21):           bind:value={newComment}
+page.svelte (dylan toth on 10/12/2024 at 00:21):           placeholder="Write a comment..."
+page.svelte (dylan toth on 10/12/2024 at 00:21):           rows="3"
+page.svelte (dylan toth on 10/12/2024 at 00:21):           required
+page.svelte (dylan toth on 10/12/2024 at 00:21):         ></textarea>
+page.svelte (dylan toth on 10/12/2024 at 00:21):         <button type="submit" disabled={isSubmitting}>
+page.svelte (dylan toth on 10/12/2024 at 00:21):           {isSubmitting ? 'Posting...' : 'Post Comment'}
+page.svelte (dylan toth on 10/12/2024 at 00:21):         </button>
+page.svelte (dylan toth on 10/12/2024 at 00:21):       </form>
+page.svelte (dylan toth on 10/12/2024 at 00:21):       <!-- Display Comments -->
+page.svelte (dylan toth on 10/12/2024 at 00:21):       <div class="comments-list">
+page.svelte (dylan toth on 10/12/2024 at 00:21):         {#each comments as comment (comment.id)}
+page.svelte (dylan toth on 10/12/2024 at 00:21):           <Comment {comment} />
+page.svelte (dylan toth on 10/12/2024 at 00:21):         {/each}
+page.svelte (dylan toth on 10/12/2024 at 00:21):         {#if comments.length === 0}
+page.svelte (dylan toth on 10/12/2024 at 00:21):           <p class="no-comments">No comments yet. Be the first to comment!</p>
+page.svelte (dylan toth on 10/12/2024 at 00:21):         {/if}
+page.svelte (dylan toth on 10/12/2024 at 00:21):       </div>
+page.svelte (dylan toth on 10/12/2024 at 00:21):     </section>
+page.svelte (dylan toth on 10/11/2024 at 16:49):   </div>
+page.svelte (dylan toth on 10/11/2024 at 16:49):   <style>
+page.svelte (dylan toth on 10/11/2024 at 16:49):     *,
+page.svelte (dylan toth on 10/11/2024 at 16:49):     *::before,
+page.svelte (dylan toth on 10/11/2024 at 16:49):     *::after {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       box-sizing: border-box;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/14/2024 at 23:30):     .vote-section {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     display: flex;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     align-items: start;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     margin-top: 10px;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     justify-content: start;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   .vote-button {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     background-color: transparent;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     border: none;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     cursor: pointer;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     color: #f3f1f1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     font-size: 1.5rem;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     margin: 0 10px;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     transition: color 0.3s, transform 0.1s;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   .vote-button:hover {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     color: #1db954;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   .vote-button.selected {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     color: #1db954;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     transform: translateY(2px);
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   .net-vote-count {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     font-size: 1.2rem;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     margin: 0 10px;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     color: #f3f1f1;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     min-width: 20px;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     text-align: center;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/14/2024 at 23:30):   .vote-button:disabled {
+page.svelte (dylan toth on 10/14/2024 at 23:30):     cursor: not-allowed;
+page.svelte (dylan toth on 10/14/2024 at 23:30):     opacity: 0.5;
+page.svelte (dylan toth on 10/14/2024 at 23:30):   }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .post-detail-wrapper {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       padding: 20px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       background-color: #1d1f25;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       color: #f3f1f1;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border: 1px solid #26282c;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border-radius: 8px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       font-family: 'Concert One', sans-serif;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .post-header {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       display: flex;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       /* justify-content: center; */
+page.svelte (dylan toth on 10/12/2024 at 00:21):       /* align-items: center; */
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-bottom: 20px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .user-info {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       display: flex;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       align-items: center;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .profile-pic {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       width: 50px; /* Increased size for better visibility */
+page.svelte (dylan toth on 10/12/2024 at 00:21):       height: 50px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border-radius: 50%;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-right: 15px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       object-fit: cover;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .username {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1.2rem; /* Increased font size */
+page.svelte (dylan toth on 10/11/2024 at 16:49):       color: #b9b9b9;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-weight: bold;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .post-content {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       display: flex;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       margin-top: 20px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       align-items: center;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       gap: 20px; /* Added gap for better spacing */
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .album-cover-container {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       display: flex;
+page.svelte (dylan toth on 10/12/2024 at 00:26):       position: relative;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       width: 200px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       height: 200px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       flex-shrink: 0;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .album-cover {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       width: 100%;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       height: 100%;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       object-fit: cover;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border-radius: 8px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .play-button {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       position: absolute;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       top: 50%;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       left: 50%;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       transform: translate(-50%, -50%);
+page.svelte (dylan toth on 10/11/2024 at 16:49):       color: white;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       font-size: 2rem;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       background-color: rgba(0, 0, 0, 0.6);
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border-radius: 50%;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       padding: 15px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       opacity: 0;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       transition: opacity 0.3s, background-color 0.3s;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       text-decoration: none;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       display: flex;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       align-items: center;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       justify-content: center;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .album-cover-container:hover .play-button {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       opacity: 1;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .play-button:hover {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       background-color: rgba(0, 0, 0, 0.8);
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .song-info {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       flex: 1;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .song-title {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 2rem; /* Increased font size */
+page.svelte (dylan toth on 10/11/2024 at 16:49):       margin: 0;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #e4e4e4;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .song-artist {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1.2rem; /* Increased font size */
+page.svelte (dylan toth on 10/11/2024 at 16:49):       color: #b9b9b9;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .post-rating {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       margin-top: 10px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       color: #ffc107;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1.2rem;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     .post-content-section {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       margin-top: 20px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1.1rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       line-height: 1.6;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .like-section {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       display: flex;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       align-items: center;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-top: 15px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .like-button {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       background-color: transparent;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border: none;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       cursor: pointer;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #f3f1f1;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       display: flex;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       align-items: center;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       padding: 0;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1.2rem;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       transition: color 0.3s;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .like-button:hover {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       color: #007bff;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .like-button i {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-right: 8px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #f3f1f1;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1.2rem;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .like-button i.liked {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #007bff;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .like-text {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       min-width: 45px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       display: inline-block;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1rem;
+page.svelte (dylan toth on 10/12/2024 at 00:26):       color: white;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:26):     .liked {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #007bff;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .like-count {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       width: 24px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       height: 24px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-left: 10px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       text-align: center;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       background-color: #007bff;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: white;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border-radius: 50%;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 0.9rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       display: flex;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       align-items: center;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       justify-content: center;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     /* Comments Section */
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comments-section {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-top: 40px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comments-section h2 {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-bottom: 20px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #ffffff;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1.5rem;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-form {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       display: flex;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       flex-direction: column;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       margin-bottom: 30px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-form textarea {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       resize: vertical;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       padding: 10px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       border-radius: 6px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       border: 1px solid #444;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       background-color: #2a2d35;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #f3f1f1;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1rem;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       margin-bottom: 10px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-form textarea::placeholder {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #a9a9a9;
+page.svelte (dylan toth on 10/12/2024 at 00:21):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-form button {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       align-self: flex-end;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       padding: 10px 20px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       background-color: #007bff;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       border: none;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       border-radius: 6px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #ffffff;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       cursor: pointer;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-size: 1rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       transition: background-color 0.3s;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-form button:hover {
+page.svelte (dylan toth on 10/11/2024 at 16:49):       background-color: #0056b3;
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comment-form button:disabled {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       background-color: #6c757d;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       cursor: not-allowed;
+page.svelte (dylan toth on 10/12/2024 at 00:21):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .comments-list {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       display: flex;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       flex-direction: column;
+page.svelte (dylan toth on 10/12/2024 at 00:21):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):     .no-comments {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       color: #a9a9a9;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       font-style: italic;
+page.svelte (dylan toth on 10/12/2024 at 00:21):     }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     @media (max-width: 768px) {
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .post-detail-wrapper {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         padding: 15px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .post-header {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         flex-direction: column;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         align-items: flex-start;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .user-info {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         margin-bottom: 15px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       .post-content {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         flex-direction: column;
+page.svelte (dylan toth on 10/11/2024 at 16:49):         align-items: center;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         gap: 10px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       .album-cover-container {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         width: 100%;
+page.svelte (dylan toth on 10/11/2024 at 16:49):         height: auto;
+page.svelte (dylan toth on 10/11/2024 at 16:49):         margin-right: 0;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         margin-bottom: 15px;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):       .song-info {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         text-align: center;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .song-title {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         font-size: 1.8rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .song-artist {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         font-size: 1.1rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .post-rating {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         font-size: 1rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .post-content-section {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         font-size: 1rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .like-section {
+page.svelte (dylan toth on 10/11/2024 at 16:49):         justify-content: center;
+page.svelte (dylan toth on 10/11/2024 at 16:49):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .like-button i {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         font-size: 1rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         margin-right: 5px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .like-text {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         font-size: 0.9rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/12/2024 at 00:21):       .like-count {
+page.svelte (dylan toth on 10/12/2024 at 00:21):         width: 20px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         height: 20px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         margin-left: 8px;
+page.svelte (dylan toth on 10/12/2024 at 00:21):         font-size: 0.8rem;
+page.svelte (dylan toth on 10/12/2024 at 00:21):       }
+page.svelte (dylan toth on 10/11/2024 at 16:49):     }
+page.svelte (dylan toth on 10/12/2024 at 00:21):   </style>
+page.js     (dylan toth on 10/15/2024 at 00:01): import { supabase } from '$lib/supabaseClient';
+page.js     (dylan toth on 10/15/2024 at 00:01): export async function load() {
+page.js     (dylan toth on 10/15/2024 at 00:01):   const { data: popularSongs, error } = await supabase.rpc('get_popular_songs');
+page.js     (dylan toth on 10/15/2024 at 00:01):   if (error) {
+page.js     (dylan toth on 10/15/2024 at 00:01):     console.error('Error fetching popular songs:', error);
+page.js     (dylan toth on 10/15/2024 at 00:01):     return { popularSongs: [] };
+page.js     (dylan toth on 10/15/2024 at 00:01):   }
+page.js     (dylan toth on 10/15/2024 at 00:01):   return {
+page.js     (dylan toth on 10/15/2024 at 00:01):     popularSongs,
+page.js     (dylan toth on 10/15/2024 at 00:01):   };
+page.js     (dylan toth on 10/15/2024 at 00:01): }
stores.js    (dylan toth on 10/06/2024 at 15:30): import { writable } from 'svelte/store';
stores.js    (dylan toth on 10/06/2024 at 15:30): //for drag and drop
stores.js    (dylan toth on 10/06/2024 at 15:30): export const selectedSong = writable(null);
stores.js    (dylan toth on 10/07/2024 at 22:22): export const user = writable(null);
stores.js    (dylan toth on 10/07/2024 at 22:22): export const spotifyAccessToken = writable(null);
+page.js     (dylan toth on 10/15/2024 at 20:52): import { supabase } from '$lib/supabaseClient';
+page.js     (dylan toth on 10/15/2024 at 20:52): import { error } from '@sveltejs/kit';
+page.js     (dylan toth on 10/15/2024 at 20:52): export async function load({ params }) {
+page.js     (dylan toth on 10/15/2024 at 20:52):   const { slug } = params; 
+page.js     (dylan toth on 10/15/2024 at 20:52):   const { data: reviews, error: reviewsError } = await supabase
+page.js     (dylan toth on 10/15/2024 at 20:52):     .from('posts')
+page.js     (dylan toth on 10/15/2024 at 20:52):     .select(`
+page.js     (dylan toth on 10/15/2024 at 20:52):       *,
+page.js     (dylan toth on 10/15/2024 at 20:52):       profiles (
+page.js     (dylan toth on 10/15/2024 at 20:52):         username,
+page.js     (dylan toth on 10/15/2024 at 20:52):         avatar_url
+page.js     (dylan toth on 10/15/2024 at 20:52):       )
+page.js     (dylan toth on 10/15/2024 at 20:52):     `)
+page.js     (dylan toth on 10/15/2024 at 20:52):     .eq('song_id', slug)
+page.js     (dylan toth on 10/15/2024 at 20:52):     .order('created_at', { ascending: false });
+page.js     (dylan toth on 10/15/2024 at 20:52):   if (reviewsError) {
+page.js     (dylan toth on 10/15/2024 at 20:52):     console.error('Error fetching reviews:', reviewsError);
+page.js     (dylan toth on 10/15/2024 at 20:52):     throw error(500, 'Error fetching reviews');
+page.js     (dylan toth on 10/15/2024 at 20:52):   }
+page.js     (dylan toth on 10/15/2024 at 20:52):   return {
+page.js     (dylan toth on 10/15/2024 at 20:52):     song_id: slug,
+page.js     (dylan toth on 10/15/2024 at 20:52):     reviews
+page.js     (dylan toth on 10/15/2024 at 20:52):   };
+page.js     (dylan toth on 10/15/2024 at 20:52): }
+server.js   (dylan toth on 10/06/2024 at 13:44):   // This file handles the OAuth redirection to Spotify
+server.js   (dylan toth on 10/06/2024 at 13:44):   import { redirect } from '@sveltejs/kit';
+server.js   (dylan toth on 10/06/2024 at 13:44):   import { SPOTIFY_CLIENT_ID, SPOTIFY_CLIENT_SECRET, SPOTIFY_REDIRECT_URI } from '$env/static/private';
+server.js   (dylan toth on 10/06/2024 at 13:44):   export async function GET() {
+server.js   (dylan toth on 10/06/2024 at 13:44):     const client_id = SPOTIFY_CLIENT_ID;
+server.js   (dylan toth on 10/06/2024 at 13:44):     const redirect_uri =  SPOTIFY_REDIRECT_URI;
+server.js   (dylan toth on 10/06/2024 at 13:44):     const scopes = [
+server.js   (dylan toth on 10/06/2024 at 13:44):       'streaming',
+server.js   (dylan toth on 10/06/2024 at 13:44):       'user-read-email',
+server.js   (dylan toth on 10/06/2024 at 13:44):       'user-read-private',
+server.js   (dylan toth on 10/06/2024 at 13:44):       'user-modify-playback-state',
+server.js   (dylan toth on 10/06/2024 at 13:44):       'user-read-playback-state',
+server.js   (dylan toth on 10/06/2024 at 13:44):       'user-read-currently-playing',
+server.js   (dylan toth on 10/06/2024 at 14:24):       'user-top-read',
+server.js   (dylan toth on 10/06/2024 at 14:24):       'user-read-recently-played', 
+server.js   (dylan toth on 10/06/2024 at 23:45):       'user-library-read',
+server.js   (dylan toth on 10/06/2024 at 23:45):       'playlist-modify-private',
+server.js   (dylan toth on 10/06/2024 at 23:45):       'playlist-modify-public'
+server.js   (dylan toth on 10/06/2024 at 13:44):     ].join(' ');
+server.js   (dylan toth on 10/06/2024 at 13:44):     // const state = generateRandomString(16); // Implement a function to generate a random string
+server.js   (dylan toth on 10/06/2024 at 13:44):     const authQueryParameters = new URLSearchParams({
+server.js   (dylan toth on 10/06/2024 at 13:44):       response_type: 'code',
+server.js   (dylan toth on 10/06/2024 at 13:44):       client_id,
+server.js   (dylan toth on 10/06/2024 at 13:44):       scope: scopes,
+server.js   (dylan toth on 10/06/2024 at 13:44):       redirect_uri,
+server.js   (dylan toth on 10/06/2024 at 13:44):     });
+server.js   (dylan toth on 10/06/2024 at 13:44):     throw redirect(302, `https://accounts.spotify.com/authorize?${authQueryParameters.toString()}`);
+server.js   (dylan toth on 10/06/2024 at 02:47):   }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22): <script>
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     import { onMount } from "svelte";
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     import * as d3 from "d3";
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     import { supabase } from "$lib/supabaseClient";
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     import { selectedSong } from "$lib/stores";
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     let graphData = { nodes: [], links: [] };
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     onMount(async () => {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const { data: users, error: usersError } = await supabase
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .from('profiles')
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .select('id, username'); 
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       if (usersError) {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         console.error('Error fetching users:', usersError.message);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         return;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const { data: follows, error: followsError } = await supabase
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .from('follows')
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .select('*');
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       if (followsError) {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         console.error('Error fetching follows:', followsError.message);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         return;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       graphData.nodes = users.map(user => ({
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         id: user.id,
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         username: user.username,
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }));
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       graphData.links = follows.map(follow => ({
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         source: follow.follower_id,
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         target: follow.following_id,
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }));
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       initializeGraph();
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     });
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     function initializeGraph() {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const width = 800;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const height = 600;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const svg = d3.select("#network-graph")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("width", width)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("height", height)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .call(d3.zoom().on("zoom", (event) => {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           svg.attr("transform", event.transform);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         }))
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .append("g");
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const simulation = d3.forceSimulation(graphData.nodes)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .force("link", d3.forceLink(graphData.links).id(d => d.id).distance(150))
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .force("charge", d3.forceManyBody().strength(-500)) 
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .force("center", d3.forceCenter(width / 2, height / 2))
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .force("collision", d3.forceCollide().radius(60)); 
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const link = svg.append("g")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("class", "links")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .selectAll("line")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .data(graphData.links)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .enter().append("line")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("stroke", "#aaa");
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const node = svg.append("g")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("class", "nodes")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .selectAll("circle")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .data(graphData.nodes)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .enter().append("circle")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("r", 40)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("fill", "#69b3a2")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .call(d3.drag()
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .on("start", dragstarted)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .on("drag", dragged)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .on("end", dragended));
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       const labels = svg.append("g")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("class", "labels")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .selectAll("text")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .data(graphData.nodes)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .enter().append("text")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("text-anchor", "middle")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .attr("dy", ".35em")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .text(d => d.username)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .style("pointer-events", "none")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .style("font-size", "14px")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         .style("fill", "#fff");
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       node.on("mouseover", (event, d) => {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d3.select(event.target).attr("fill", "#ffcc00");
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d3.select("#tooltip")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .style("visibility", "visible")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .text(`Username: ${d.username}`);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }).on("mousemove", (event) => {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d3.select("#tooltip")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .style("top", (event.pageY - 10) + "px")
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .style("left", (event.pageX + 10) + "px");
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }).on("mouseout", (event) => {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d3.select(event.target).attr("fill", "#69b3a2"); 
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d3.select("#tooltip").style("visibility", "hidden");
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       });
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       simulation.nodes(graphData.nodes).on("tick", ticked);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       simulation.force("link").links(graphData.links);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       function ticked() {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         link.attr("x1", d => d.source.x)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .attr("y1", d => d.source.y)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .attr("x2", d => d.target.x)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .attr("y2", d => d.target.y);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         node.attr("cx", d => d.x)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .attr("cy", d => d.y);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         labels.attr("x", d => d.x)
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):           .attr("y", d => d.y);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       function dragstarted(event, d) {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         if (!event.active) simulation.alphaTarget(0.3).restart();
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d.fx = d.x;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d.fy = d.y;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       function dragged(event, d) {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d.fx = event.x;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d.fy = event.y;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       function dragended(event, d) {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         if (!event.active) simulation.alphaTarget(0);
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d.fx = null;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):         d.fy = null;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):   </script>
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):   <div>
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     <svg id="network-graph"></svg>
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     <div id="tooltip" style="position: absolute; visibility: hidden; background-color: white; border: 1px solid #ccc; padding: 5px; font-size: 12px;"></div>
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):   </div>
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):   <style>
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     svg {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       border: 1px solid #ccc;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       background-color: #1d1f25;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     .links line {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       stroke: #aaa;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       stroke-width: 1.5px;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     .nodes circle {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       stroke: #fff;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       stroke-width: 1.5px;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     .labels text {
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       font-family: Arial, sans-serif;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):       pointer-events: none;
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):     }
networkGraph.svelte (dylan toth on 10/06/2024 at 19:22):   </style>
utils.js     (dylan toth on 10/07/2024 at 12:41): export async function createPost(userId, content, songId, rating) {
utils.js     (dylan toth on 10/07/2024 at 12:41):   const { data, error } = await supabase
utils.js     (dylan toth on 10/07/2024 at 12:41):     .from('posts')
utils.js     (dylan toth on 10/07/2024 at 12:41):     .insert([
utils.js     (dylan toth on 10/07/2024 at 12:41):       {
utils.js     (dylan toth on 10/07/2024 at 12:41):         profile_id: userId,
utils.js     (dylan toth on 10/07/2024 at 12:41):         content,
utils.js     (dylan toth on 10/07/2024 at 12:41):         song_id: songId,
utils.js     (dylan toth on 10/07/2024 at 12:41):         rating,
utils.js     (dylan toth on 10/07/2024 at 12:41):         created_at: new Date().toISOString(),
utils.js     (dylan toth on 10/07/2024 at 12:41):       }
utils.js     (dylan toth on 10/07/2024 at 12:41):     ])
utils.js     (dylan toth on 10/07/2024 at 12:41):     .select('*, likes (profile_id)')
utils.js     (dylan toth on 10/07/2024 at 12:41):     .single(); 
utils.js     (dylan toth on 10/07/2024 at 12:41):   if (error) {
utils.js     (dylan toth on 10/07/2024 at 12:41):     return { error };
utils.js     (dylan toth on 10/07/2024 at 12:41):   }
utils.js     (dylan toth on 10/07/2024 at 12:41):   if (!data.likes) {
utils.js     (dylan toth on 10/07/2024 at 12:41):     data.likes = [];
utils.js     (dylan toth on 10/07/2024 at 12:41):   return { data };
utils.js     (dylan toth on 10/05/2024 at 20:30): const getURL = () => {
utils.js     (dylan toth on 10/05/2024 at 20:30):   let url = 
utils.js     (dylan toth on 10/05/2024 at 20:30):     import.meta.env.VITE_APP_BASE_URL ?? 
utils.js     (dylan toth on 10/05/2024 at 20:30):     import.meta.env.VITE_APP_VERCEL_URL ?? 
utils.js     (dylan toth on 10/05/2024 at 20:30):     'http://localhost:5173/';
utils.js     (dylan toth on 10/05/2024 at 20:30):   url = url.startsWith('http') ? url : `https://${url}`
utils.js     (dylan toth on 10/05/2024 at 20:30):   url = url.endsWith('/') ? url : `${url}/`
utils.js     (dylan toth on 10/05/2024 at 20:30):   return url
utils.js     (dylan toth on 10/05/2024 at 20:30): }
utils.js     (dylan toth on 10/08/2024 at 17:08):   console.log("Initiating Google sign-in");
utils.js     (dylan toth on 10/08/2024 at 17:08):   try {
utils.js     (dylan toth on 10/08/2024 at 17:08):     const { error } = await supabase.auth.signInWithOAuth({
utils.js     (dylan toth on 10/08/2024 at 17:08):       provider: 'google',
utils.js     (dylan toth on 10/08/2024 at 17:08):     });
utils.js     (dylan toth on 10/08/2024 at 17:08):     if (error) {
utils.js     (dylan toth on 10/08/2024 at 17:08):       console.error('Error during sign in:', error.message);
utils.js     (dylan toth on 10/08/2024 at 17:08):     } else {
utils.js     (dylan toth on 10/08/2024 at 17:08):       console.log('Sign-in initiated successfully');
utils.js     (dylan toth on 10/05/2024 at 20:30):     }
utils.js     (dylan toth on 10/08/2024 at 17:08):   } catch (err) {
utils.js     (dylan toth on 10/08/2024 at 17:08):     console.error('Unexpected error during sign in:', err);
utils.js     (dylan toth on 10/06/2024 at 03:32): };
utils.js     (dylan toth on 10/06/2024 at 03:32): export async function signInWithSpotify() {
utils.js     (dylan toth on 10/06/2024 at 03:32):   const { error } = await supabase.auth.signInWithOAuth({
utils.js     (dylan toth on 10/06/2024 at 03:32):     provider: 'spotify',
utils.js     (dylan toth on 10/06/2024 at 03:32):     options: {
utils.js     (dylan toth on 10/06/2024 at 23:45):       scopes: 'streaming user-read-email user-read-private user-modify-playback-state user-read-playback-state user-read-currently-playing user-top-read user-read-recently-played user-library-read playlist-modify-private playlist-modify-public',
utils.js     (dylan toth on 10/06/2024 at 03:32):     }
utils.js     (dylan toth on 10/06/2024 at 03:32):   });
utils.js     (dylan toth on 10/06/2024 at 03:32):   if (error) {
utils.js     (dylan toth on 10/06/2024 at 03:32):     console.error('Error during sign in:', error.message);
utils.js     (dylan toth on 10/06/2024 at 03:32):   }
utils.js     (dylan toth on 10/05/2024 at 20:30):     return { success: false, error: err.message
utils.js     (dylan toth on 10/05/2024 at 20:30):      };
utils.js     (dylan toth on 10/05/2024 at 20:30):     }
utils.js     (dylan toth on 10/05/2024 at 20:30):   }
utils.js     (dylan toth on 10/06/2024 at 13:44):     console.log(song_list)
utils.js     (dylan toth on 10/06/2024 at 15:30):     await authenticateClientCredentials();
utils.js     (dylan toth on 10/06/2024 at 13:44):     const {data, error} = await spotify.getTracks(song_list);
utils.js     (dylan toth on 10/06/2024 at 15:30):     // console.log("error is ", error)
utils.js     (dylan toth on 10/06/2024 at 15:30):     console.log("data is ", data)
utils.js     (dylan toth on 10/06/2024 at 19:22): }
utils.js     (dylan toth on 10/06/2024 at 20:13): // Function to follow a user
utils.js     (dylan toth on 10/06/2024 at 19:22): export const followUser = async (userId) => {
utils.js     (dylan toth on 10/06/2024 at 20:13):   const { data: sessionData, error: sessionError } = await supabase.auth.getSession();
utils.js     (dylan toth on 10/06/2024 at 20:13):   if (sessionError) {
utils.js     (dylan toth on 10/06/2024 at 20:13):     console.error("Error getting session:", sessionError.message);
utils.js     (dylan toth on 10/06/2024 at 20:13):     return { success: false, error: sessionError };
utils.js     (dylan toth on 10/06/2024 at 20:13):   }
utils.js     (dylan toth on 10/06/2024 at 20:13):   const user = sessionData?.session?.user;
utils.js     (dylan toth on 10/06/2024 at 20:13):   if (!user) {
utils.js     (dylan toth on 10/06/2024 at 20:13):     console.error("User not logged in.");
utils.js     (dylan toth on 10/06/2024 at 20:13):     return { success: false, error: "User not logged in." };
utils.js     (dylan toth on 10/06/2024 at 20:13):   }
utils.js     (dylan toth on 10/06/2024 at 19:22):   const { data, error } = await supabase
utils.js     (dylan toth on 10/06/2024 at 19:22):     .from('follows')
utils.js     (dylan toth on 10/07/2024 at 12:41):     .insert([{ owner_id: user.id, followed_id: userId }]);
utils.js     (dylan toth on 10/06/2024 at 19:22):   if (error) {
utils.js     (dylan toth on 10/06/2024 at 19:22):     console.error('Error following user:', error.message);
utils.js     (dylan toth on 10/06/2024 at 19:22):     return { success: false, error };
utils.js     (dylan toth on 10/06/2024 at 19:22):   }
utils.js     (dylan toth on 10/06/2024 at 19:22):   return { success: true, data };
utils.js     (dylan toth on 10/06/2024 at 19:22): };
utils.js     (dylan toth on 10/06/2024 at 19:22): export const unfollowUser = async (userId) => {
utils.js     (dylan toth on 10/06/2024 at 20:13):   const { data: sessionData, error: sessionError } = await supabase.auth.getSession();
utils.js     (dylan toth on 10/06/2024 at 20:13):   if (sessionError) {
utils.js     (dylan toth on 10/06/2024 at 20:13):     console.error("Error getting session:", sessionError.message);
utils.js     (dylan toth on 10/06/2024 at 20:13):     return { success: false, error: sessionError };
utils.js     (dylan toth on 10/06/2024 at 20:13):   }
utils.js     (dylan toth on 10/06/2024 at 20:13):   const user = sessionData?.session?.user;
utils.js     (dylan toth on 10/06/2024 at 20:13):   if (!user) {
utils.js     (dylan toth on 10/06/2024 at 20:13):     console.error("User not logged in.");
utils.js     (dylan toth on 10/06/2024 at 20:13):     return { success: false, error: "User not logged in." };
utils.js     (dylan toth on 10/06/2024 at 20:13):   }
utils.js     (dylan toth on 10/06/2024 at 19:22):   const { data, error } = await supabase
utils.js     (dylan toth on 10/06/2024 at 19:22):     .from('follows')
utils.js     (dylan toth on 10/06/2024 at 19:22):     .delete()
utils.js     (dylan toth on 10/06/2024 at 20:13):     .match({ owner_id: user.id, followed_id: userId });
utils.js     (dylan toth on 10/06/2024 at 19:22):   if (error) {
utils.js     (dylan toth on 10/06/2024 at 19:22):     console.error('Error unfollowing user:', error.message);
utils.js     (dylan toth on 10/06/2024 at 19:22):     return { success: false, error };
utils.js     (dylan toth on 10/06/2024 at 19:22):   }
utils.js     (dylan toth on 10/06/2024 at 19:22):   return { success: true, data };
utils.js     (dylan toth on 10/06/2024 at 20:13): };
utils.js     (dylan toth on 10/07/2024 at 22:22): export async function getValidSpotifyAccessToken(userId) {
utils.js     (dylan toth on 10/07/2024 at 22:22):   console.log("Checking call ")
utils.js     (dylan toth on 10/07/2024 at 22:22):   try {
utils.js     (dylan toth on 10/07/2024 at 22:22):     console.log("waiting")
utils.js     (dylan toth on 10/07/2024 at 22:22):     const response = await fetch('/api/refresh-spotify-token', {
utils.js     (dylan toth on 10/07/2024 at 22:22):       method: 'POST',
utils.js     (dylan toth on 10/07/2024 at 22:22):       headers: {
utils.js     (dylan toth on 10/07/2024 at 22:22):         'Content-Type': 'application/json',
utils.js     (dylan toth on 10/07/2024 at 22:22):       },
utils.js     (dylan toth on 10/07/2024 at 22:22):       body: JSON.stringify({ userId }),
utils.js     (dylan toth on 10/07/2024 at 22:22):     });
utils.js     (dylan toth on 10/07/2024 at 22:22):     const data = await response.json();
utils.js     (dylan toth on 10/07/2024 at 22:22):     if (response.ok && data.success) {
utils.js     (dylan toth on 10/07/2024 at 22:22):       return data.access_token;
utils.js     (dylan toth on 10/07/2024 at 22:22):     } else {
utils.js     (dylan toth on 10/07/2024 at 22:22):       console.error('Failed to refresh Spotify access token:', data.message);
utils.js     (dylan toth on 10/07/2024 at 22:22):       return null;
utils.js     (dylan toth on 10/07/2024 at 22:22):     }
utils.js     (dylan toth on 10/07/2024 at 22:22):   } catch (error) {
utils.js     (dylan toth on 10/07/2024 at 22:22):     console.error('Unexpected error while refreshing Spotify access token:', error);
utils.js     (dylan toth on 10/07/2024 at 22:22):     return null;
utils.js     (dylan toth on 10/07/2024 at 22:22):   }
utils.js     (dylan toth on 10/08/2024 at 17:08): }
utils.js     (dylan toth on 10/15/2024 at 00:01): export async function fetchSongsDetails(songIds) {
utils.js     (dylan toth on 10/15/2024 at 00:01):   try {
utils.js     (dylan toth on 10/15/2024 at 00:01):     // Ensure the Spotify client is authenticated
utils.js     (dylan toth on 10/15/2024 at 00:01):       // await authenticateClientCredentials();
utils.js     (dylan toth on 10/15/2024 at 00:01):       console.log("data: beofre")
utils.js     (dylan toth on 10/15/2024 at 00:01):     const data = await spotify.getTracks(songIds);
utils.js     (dylan toth on 10/15/2024 at 00:01):     console.log("data: ", data)
utils.js     (dylan toth on 10/15/2024 at 00:01):     if (data && data.body && data.body.tracks) {
utils.js     (dylan toth on 10/15/2024 at 00:01):       const songDetailsMap = {};
utils.js     (dylan toth on 10/15/2024 at 00:01):       data.body.tracks.forEach((track) => {
utils.js     (dylan toth on 10/15/2024 at 00:01):         if (track) {
utils.js     (dylan toth on 10/15/2024 at 00:01):           songDetailsMap[track.id] = {
utils.js     (dylan toth on 10/15/2024 at 00:01):             title: track.name,
utils.js     (dylan toth on 10/15/2024 at 00:01):             artist: track.artists.map((artist) => artist.name).join(', '),
utils.js     (dylan toth on 10/15/2024 at 00:01):             image_url: track.album.images[0]?.url || 'https://placehold.co/300',
utils.js     (dylan toth on 10/15/2024 at 00:01):           };
utils.js     (dylan toth on 10/15/2024 at 00:01):         }
utils.js     (dylan toth on 10/15/2024 at 00:01):       });
utils.js     (dylan toth on 10/15/2024 at 00:01):       return songDetailsMap;
utils.js     (dylan toth on 10/15/2024 at 00:01):     } else {
utils.js     (dylan toth on 10/15/2024 at 00:01):       console.log('No tracks found for the given IDs.');
utils.js     (dylan toth on 10/15/2024 at 00:01):       return {};
utils.js     (dylan toth on 10/15/2024 at 00:01):     }
utils.js     (dylan toth on 10/15/2024 at 00:01):   } catch (error) {
utils.js     (dylan toth on 10/15/2024 at 00:01):     console.error('Error fetching tracks:', error);
utils.js     (dylan toth on 10/15/2024 at 00:01):     return {};
utils.js     (dylan toth on 10/15/2024 at 00:01):   }
utils.js     (dylan toth on 10/15/2024 at 00:01): }
footer.svelte (dylan toth on 10/05/2024 at 22:31): <div class="footer-wrapper">
footer.svelte (dylan toth on 10/05/2024 at 22:31):   <footer>
footer.svelte (dylan toth on 10/05/2024 at 22:31):     <div class="footer-content">
footer.svelte (dylan toth on 10/05/2024 at 22:31):       <p class="footer-text">&copy; {new Date().getFullYear()} Open Vinyl. All rights reserved.</p>
footer.svelte (dylan toth on 10/05/2024 at 22:31):     </div>
footer.svelte (dylan toth on 10/05/2024 at 22:31):   </footer>
footer.svelte (dylan toth on 10/05/2024 at 22:31):   .footer-wrapper {
footer.svelte (dylan toth on 10/05/2024 at 22:31):     width: 100%;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     background-color: #1d1f25;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     border-top: 1px solid #26282c;
footer.svelte (dylan toth on 10/05/2024 at 22:31):   footer {
footer.svelte (dylan toth on 10/05/2024 at 22:31):     display: flex;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     justify-content: center;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     padding: 10px;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     font-family: "Concert One", sans-serif;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     align-items: center;
footer.svelte (dylan toth on 10/05/2024 at 22:31):   }
footer.svelte (dylan toth on 10/05/2024 at 22:31):   .footer-content {
footer.svelte (dylan toth on 10/05/2024 at 22:31):     text-align: center;
footer.svelte (dylan toth on 10/05/2024 at 22:31):   }
footer.svelte (dylan toth on 10/05/2024 at 22:31):   .footer-text {
footer.svelte (dylan toth on 10/05/2024 at 22:31):     color: #b9b9b9; 
footer.svelte (dylan toth on 10/05/2024 at 22:31):     font-size: 0.8rem;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     margin: 0;
footer.svelte (dylan toth on 10/05/2024 at 22:31):   }
footer.svelte (dylan toth on 10/05/2024 at 22:31):   @media (max-width: 768px) {
footer.svelte (dylan toth on 10/05/2024 at 22:31):     .footer-text {
footer.svelte (dylan toth on 10/05/2024 at 22:31):       font-size: 0.7rem;
footer.svelte (dylan toth on 10/05/2024 at 22:31):     }
footer.svelte (dylan toth on 10/05/2024 at 22:31): </style>
+page.svelte (dylan toth on 10/06/2024 at 23:45):   import { onMount, onDestroy } from "svelte";
+page.svelte (dylan toth on 10/06/2024 at 23:45):   import { page } from "$app/stores";
+page.svelte (dylan toth on 10/07/2024 at 22:22):   import { supabase } from "$lib/supabaseClient";
+page.svelte (dylan toth on 10/06/2024 at 23:45):   import { selectedSong } from "$lib/stores";
+page.svelte (dylan toth on 10/07/2024 at 22:22):   import TutorialOverlay from "$lib/tutorialOverlay.svelte";
+page.svelte (dylan toth on 10/07/2024 at 22:22):   import { writable } from "svelte/store";
+page.svelte (dylan toth on 10/07/2024 at 22:22):   import { getValidSpotifyAccessToken } from "$lib/utils";
+page.svelte (dylan toth on 10/07/2024 at 22:22):   import { user } from "$lib/stores";
+page.svelte (dylan toth on 10/07/2024 at 22:22):   import { derived } from 'svelte/store';
+page.svelte (dylan toth on 10/07/2024 at 22:22):   import { goto } from "$app/navigation";
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 1,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 2,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 3,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 4,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 5,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 6,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 7,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 8,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/06/2024 at 23:45):     {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       id: 9,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       imageUrl: "https://via.placeholder.com/200",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songId: "6ebkx7Q5tTxrCxKq4GYj0Y",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       songName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       artistName: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: "",
+page.svelte (dylan toth on 10/06/2024 at 23:45):     },
+page.svelte (dylan toth on 10/08/2024 at 18:22):     boxes[4].songId = $page.params.slug;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   } else {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     //random song
+page.svelte (dylan toth on 10/07/2024 at 22:22):   const showTutorial = writable(false);
+page.svelte (dylan toth on 10/07/2024 at 22:22):   const userReady = derived(user, $user => $user); 
+page.svelte (dylan toth on 10/07/2024 at 22:22):   let accessToken = null;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   let cache = [];
+page.svelte (dylan toth on 10/07/2024 at 12:41):   const CACHE_THRESHOLD_PERCENTAGE = 0.8; // 80% threshold for refreshing cache (meaning if theres 100 songs if u click 80 times it will refresh then)
+page.svelte (dylan toth on 10/06/2024 at 20:22):   let isRefreshingCache = false;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let showCreatePlaylistButton = false;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   let isLoggedIn = false;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   let playlistId = null;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   let showCheckmark = false;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   let checkmarkTimeout;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   onMount(async () => {
+page.svelte (dylan toth on 10/07/2024 at 22:22):   let unsubscribeUser;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   let currentUser;
+page.svelte (dylan toth on 10/08/2024 at 18:22):   if ($page.params.slug) {
+page.svelte (dylan toth on 10/08/2024 at 18:22):     centerSongId = $page.params.slug;
+page.svelte (dylan toth on 10/08/2024 at 18:22):     boxes[4].songId = $page.params.slug;
+page.svelte (dylan toth on 10/08/2024 at 18:22):   }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   try {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     unsubscribeUser = userReady.subscribe(async (value) => {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       if (value && value.role === 'authenticated') {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         currentUser = value;
+page.svelte (dylan toth on 10/07/2024 at 22:22):         const token = await getValidSpotifyAccessToken(currentUser.id);
+page.svelte (dylan toth on 10/07/2024 at 22:22):         if (!token) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):           console.error("No access token available, cannot proceed.");
+page.svelte (dylan toth on 10/07/2024 at 22:22):           showPlayer = false;
+page.svelte (dylan toth on 10/07/2024 at 22:22):           showPremiumMessage = true;
+page.svelte (dylan toth on 10/07/2024 at 22:22):           return;
+page.svelte (dylan toth on 10/07/2024 at 22:22):         }
+page.svelte (dylan toth on 10/07/2024 at 22:22):         accessToken = token;
+page.svelte (dylan toth on 10/07/2024 at 22:22):         console.log("Valid Spotify access token received:", accessToken);
+page.svelte (dylan toth on 10/07/2024 at 22:22):         await checkIfPlaylistExists();
+page.svelte (dylan toth on 10/07/2024 at 22:22):       }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     });
+page.svelte (dylan toth on 10/07/2024 at 22:22):   } catch (err) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     console.log("Error in onMount:", err);
+page.svelte (dylan toth on 10/07/2024 at 22:22):   }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   const {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       data: { session },
+page.svelte (dylan toth on 10/07/2024 at 22:22):       error,
+page.svelte (dylan toth on 10/07/2024 at 22:22):     } = await supabase.auth.getSession();
+page.svelte (dylan toth on 10/07/2024 at 22:22):     if (error) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.error("Error fetching session:", error);
+page.svelte (dylan toth on 10/07/2024 at 22:22):       return;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     if (session) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       isLoggedIn = true;
+page.svelte (dylan toth on 10/07/2024 at 22:22):       const user = session.user;
+page.svelte (dylan toth on 10/07/2024 at 22:22):       const { data: profile, error: profileError } = await supabase
+page.svelte (dylan toth on 10/07/2024 at 22:22):         .from("profiles")
+page.svelte (dylan toth on 10/07/2024 at 22:22):         .select("spotify_access_token, has_seen_discover_tutorial")
+page.svelte (dylan toth on 10/07/2024 at 22:22):         .eq("id", user.id)
+page.svelte (dylan toth on 10/07/2024 at 22:22):         .single();
+page.svelte (dylan toth on 10/07/2024 at 22:22):       if (profileError) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         console.error("Error fetching profile:", profileError);
+page.svelte (dylan toth on 10/07/2024 at 22:22):         return;
+page.svelte (dylan toth on 10/07/2024 at 22:22):       }
+page.svelte (dylan toth on 10/07/2024 at 22:22):       if (!profile.has_seen_discover_tutorial) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         showTutorial.set(true);
+page.svelte (dylan toth on 10/07/2024 at 22:22):       }
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log(accessToken)
+page.svelte (dylan toth on 10/07/2024 at 22:22):       if (accessToken) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         await checkIfPlaylistExists();
+page.svelte (dylan toth on 10/07/2024 at 22:22):       } else {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         console.log("No Spotify access token found.");
+page.svelte (dylan toth on 10/07/2024 at 22:22):       }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     } else {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("User not logged in.");
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   await authenticateClientCredentials();
+page.svelte (dylan toth on 10/07/2024 at 22:22):     fetchCenterSong();
+page.svelte (dylan toth on 10/07/2024 at 22:22):     await cacheRecommendations();
+page.svelte (dylan toth on 10/07/2024 at 22:22):     initializeGridWithCache();
+page.svelte (dylan toth on 10/07/2024 at 22:22): });
+page.svelte (dylan toth on 10/06/2024 at 20:22):   async function checkAndRefreshCache() {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     if (shouldRefreshCache() && !isRefreshingCache) {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       isRefreshingCache = true;
+page.svelte (dylan toth on 10/06/2024 at 23:45):       console.log("Threshold reached. Refreshing cache...");
+page.svelte (dylan toth on 10/06/2024 at 23:45):       await cacheRecommendations();
+page.svelte (dylan toth on 10/06/2024 at 23:45):       cacheIndex = 0;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   function shouldRefreshCache() {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     return cacheIndex / cache.length >= CACHE_THRESHOLD_PERCENTAGE;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   function openReview(event) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     if (event.key === "p") {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       startReview();
+page.svelte (dylan toth on 10/06/2024 at 23:45):     }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   onDestroy(() => {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     if (audio) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       audio.pause();
+page.svelte (dylan toth on 10/07/2024 at 22:22):       audio.currentTime = 0; // Optionally, reset the audio time to the start
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("Audio playback stopped on destroy.");
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   });
+page.svelte (dylan toth on 10/06/2024 at 23:45):   function startReview() {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     const middleSong = {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       id: boxes[4].songId,
+page.svelte (dylan toth on 10/07/2024 at 22:22):       title: boxes[4].songName,
+page.svelte (dylan toth on 10/07/2024 at 22:22):       artist: boxes[4].artistName,
+page.svelte (dylan toth on 10/07/2024 at 22:22):       cover: boxes[4].imageUrl,
+page.svelte (dylan toth on 10/07/2024 at 22:22):     };
+page.svelte (dylan toth on 10/07/2024 at 22:22):     selectedSong.set(middleSong);
+page.svelte (dylan toth on 10/07/2024 at 22:22):     goto("/");
+page.svelte (dylan toth on 10/06/2024 at 20:22):   }
+page.svelte (dylan toth on 10/06/2024 at 23:45):         .filter((track) => track.preview_url) // Only keep tracks with a preview URL (gonna be around 50-60 songs out of the 100)
+page.svelte (dylan toth on 10/06/2024 at 23:45):         .map((track) => ({
+page.svelte (dylan toth on 10/06/2024 at 23:45):           songId: track.id,
+page.svelte (dylan toth on 10/06/2024 at 23:45):           imageUrl: track.album.images[0].url,
+page.svelte (dylan toth on 10/06/2024 at 23:45):           songName: track.name,
+page.svelte (dylan toth on 10/06/2024 at 23:45):           artistName: track.artists[0].name,
+page.svelte (dylan toth on 10/06/2024 at 23:45):           previewUrl: track.preview_url,
+page.svelte (dylan toth on 10/06/2024 at 23:45):         }));
+page.svelte (dylan toth on 10/06/2024 at 20:22):       isRefreshingCache = false;
+page.svelte (dylan toth on 10/06/2024 at 20:22):       isRefreshingCache = false;
+page.svelte (dylan toth on 10/06/2024 at 23:45):         previewUrl: trackData.preview_url,
+page.svelte (dylan toth on 10/06/2024 at 23:45):       playPreview(trackData.preview_url);
+page.svelte (dylan toth on 10/06/2024 at 23:45):         return box;
+page.svelte (dylan toth on 10/06/2024 at 23:45):       return fetchFromCache();
+page.svelte (dylan toth on 10/06/2024 at 23:45):       cacheIndex = 0;
+page.svelte (dylan toth on 10/06/2024 at 20:22):     checkAndRefreshCache();
+page.svelte (dylan toth on 10/06/2024 at 23:45):       previewUrl: cachedSong.previewUrl,
+page.svelte (dylan toth on 10/06/2024 at 23:45):   async function checkIfPlaylistExists() {
+page.svelte (dylan toth on 10/07/2024 at 22:22):   if (!accessToken) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     console.error("No access token, unable to fetch playlist.");
+page.svelte (dylan toth on 10/07/2024 at 22:22):     return;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   try {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     const userPlaylistsResponse = await fetch(
+page.svelte (dylan toth on 10/07/2024 at 22:22):       "https://api.spotify.com/v1/me/playlists",
+page.svelte (dylan toth on 10/07/2024 at 22:22):       {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         method: "GET",
+page.svelte (dylan toth on 10/06/2024 at 23:45):         headers: {
+page.svelte (dylan toth on 10/07/2024 at 22:22):           Authorization: `Bearer ${accessToken}`, // Use the valid access token
+page.svelte (dylan toth on 10/07/2024 at 22:22):         },
+page.svelte (dylan toth on 10/07/2024 at 22:22):       }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     );
+page.svelte (dylan toth on 10/07/2024 at 22:22):     if (!userPlaylistsResponse.ok) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       const errorData = await userPlaylistsResponse.json();
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.error("Error fetching playlists:", errorData);
+page.svelte (dylan toth on 10/07/2024 at 22:22):       return;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     const userPlaylists = await userPlaylistsResponse.json();
+page.svelte (dylan toth on 10/07/2024 at 22:22):     const discoverPlaylist = userPlaylists.items.find(
+page.svelte (dylan toth on 10/07/2024 at 22:22):       (playlist) => playlist.name === "OpenVinyl Discover"
+page.svelte (dylan toth on 10/07/2024 at 22:22):     );
+page.svelte (dylan toth on 10/07/2024 at 22:22):     if (discoverPlaylist) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       playlistId = discoverPlaylist.id;
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("Found existing 'OpenVinyl Discover' playlist:", playlistId);
+page.svelte (dylan toth on 10/07/2024 at 22:22):     } else {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       showCreatePlaylistButton = true;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   } catch (err) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     console.error("Error checking playlists:", err);
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/07/2024 at 22:22): }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   async function createDiscoverPlaylist() {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     try {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       const newPlaylistResponse = await fetch(
+page.svelte (dylan toth on 10/07/2024 at 22:22):         "https://api.spotify.com/v1/me/playlists",
+page.svelte (dylan toth on 10/07/2024 at 22:22):         {
+page.svelte (dylan toth on 10/07/2024 at 22:22):           method: "POST",
+page.svelte (dylan toth on 10/07/2024 at 22:22):           headers: {
+page.svelte (dylan toth on 10/07/2024 at 22:22):             Authorization: `Bearer ${accessToken}`,
+page.svelte (dylan toth on 10/07/2024 at 22:22):             "Content-Type": "application/json",
+page.svelte (dylan toth on 10/07/2024 at 22:22):           },
+page.svelte (dylan toth on 10/07/2024 at 22:22):           body: JSON.stringify({
+page.svelte (dylan toth on 10/07/2024 at 22:22):             name: "OpenVinyl Discover",
+page.svelte (dylan toth on 10/07/2024 at 22:22):             description: "A playlist for songs discovered on OpenVinyl",
+page.svelte (dylan toth on 10/07/2024 at 22:22):             public: true,
+page.svelte (dylan toth on 10/07/2024 at 22:22):           }),
+page.svelte (dylan toth on 10/07/2024 at 22:22):         }
+page.svelte (dylan toth on 10/07/2024 at 22:22):       );
+page.svelte (dylan toth on 10/06/2024 at 23:45):       const newPlaylist = await newPlaylistResponse.json();
+page.svelte (dylan toth on 10/06/2024 at 23:45):       playlistId = newPlaylist.id;
+page.svelte (dylan toth on 10/06/2024 at 23:45):       showCreatePlaylistButton = false;
+page.svelte (dylan toth on 10/06/2024 at 23:45):       console.log("Created new 'OpenVinyl Discover' playlist:", playlistId);
+page.svelte (dylan toth on 10/06/2024 at 23:45):     } catch (err) {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       console.error("Error creating playlist:", err);
+page.svelte (dylan toth on 10/06/2024 at 23:45):     }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   function moveGrid(deltaRow, deltaCol) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   if (isRefreshingCache) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     console.log("Cache is refreshing, please wait...");
+page.svelte (dylan toth on 10/14/2024 at 23:24):     return;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   let newBoxes = [...boxes];
+page.svelte (dylan toth on 10/14/2024 at 23:24):   // Shift rows
+page.svelte (dylan toth on 10/14/2024 at 23:24):   if (deltaRow !== 0) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     const rows = [];
+page.svelte (dylan toth on 10/14/2024 at 23:24):     while (newBoxes.length) rows.push(newBoxes.splice(0, 3));
+page.svelte (dylan toth on 10/14/2024 at 23:24):     if (deltaRow > 0) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):       for (let i = 0; i < deltaRow; i++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):         rows.unshift(rows.pop()); // Move last row to the front
+page.svelte (dylan toth on 10/14/2024 at 23:24):         for (let j = 0; j < 3; j++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):           rows[0][j] = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):     } else {
+page.svelte (dylan toth on 10/14/2024 at 23:24):       for (let i = 0; i < -deltaRow; i++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):         rows.push(rows.shift()); // Move first row to the end
+page.svelte (dylan toth on 10/14/2024 at 23:24):         for (let j = 0; j < 3; j++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):           rows[rows.length - 1][j] = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):     newBoxes = rows.flat();
+page.svelte (dylan toth on 10/14/2024 at 23:24):   // Shift columns
+page.svelte (dylan toth on 10/14/2024 at 23:24):   if (deltaCol !== 0) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     const rows = [];
+page.svelte (dylan toth on 10/14/2024 at 23:24):     while (newBoxes.length) rows.push(newBoxes.splice(0, 3));
+page.svelte (dylan toth on 10/14/2024 at 23:24):     if (deltaCol > 0) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):       for (let i = 0; i < deltaCol; i++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):         for (let row of rows) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):           row.unshift(row.pop()); // Move last column to the front
+page.svelte (dylan toth on 10/14/2024 at 23:24):           row[0] = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):         }
+page.svelte (dylan toth on 10/14/2024 at 23:24):       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):     } else {
+page.svelte (dylan toth on 10/14/2024 at 23:24):       for (let i = 0; i < -deltaCol; i++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):         for (let row of rows) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):           row.push(row.shift()); // Move first column to the end
+page.svelte (dylan toth on 10/14/2024 at 23:24):           row[row.length - 1] = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):         }
+page.svelte (dylan toth on 10/14/2024 at 23:24):       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):     }
+page.svelte (dylan toth on 10/14/2024 at 23:24):     newBoxes = rows.flat();
+page.svelte (dylan toth on 10/07/2024 at 22:22):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   // Update the center song ID and play the preview
+page.svelte (dylan toth on 10/14/2024 at 23:24):   centerSongId = newBoxes[4].songId;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   playPreview(newBoxes[4].previewUrl);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   boxes = newBoxes;
+page.svelte (dylan toth on 10/14/2024 at 23:24): }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   // function moveGrid(direction) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   if (isRefreshingCache) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //     console.log("Cache is refreshing, please wait...");
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //     return;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   let newBoxes = [...boxes];
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   showCheckmark = false;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   clearTimeout(checkmarkTimeout);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   switch (direction) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //     case "up":
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       newBoxes = newBoxes.slice(0, 6);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       for (let i = 0; i < 3; i++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         const newBox = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         newBoxes.unshift(newBox);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //     case "down":
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       newBoxes = newBoxes.slice(3);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       for (let i = 0; i < 3; i++) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         const newBox = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         newBoxes.push(newBox);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //     case "left":
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       for (let i = 0; i < 9; i += 3) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         const newBox = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         newBoxes.splice(i, 1);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         newBoxes.splice(i + 2, 0, newBox);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //     case "right":
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       for (let i = 0; i < 9; i += 3) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         const newBox = fetchFromCache();
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         newBoxes.splice(i + 2, 1);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //         newBoxes.splice(i, 0, newBox);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   centerSongId = newBoxes[4].songId;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   playPreview(newBoxes[4].previewUrl);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   //   boxes = newBoxes;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   // }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const debouncedMoveGrid = debounce(moveGrid, 0);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   async function dismissTutorial(event) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     const { dontShowAgain } = event.detail;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     showTutorial.set(false);
+page.svelte (dylan toth on 10/14/2024 at 23:24):     if (dontShowAgain) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):       const { data, error } = await supabase.auth.getUser();
+page.svelte (dylan toth on 10/14/2024 at 23:24):       const user = data.user;
+page.svelte (dylan toth on 10/14/2024 at 23:24):       if (user) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):         await supabase
+page.svelte (dylan toth on 10/14/2024 at 23:24):           .from("profiles")
+page.svelte (dylan toth on 10/14/2024 at 23:24):           .update({ has_seen_discover_tutorial: true })
+page.svelte (dylan toth on 10/14/2024 at 23:24):           .eq("id", user.id);
+page.svelte (dylan toth on 10/14/2024 at 23:24):       }
+page.svelte (dylan toth on 10/06/2024 at 23:45):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   switch (e.keyCode) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 87:
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 38:
+page.svelte (dylan toth on 10/14/2024 at 23:24):       moveGridDirection("up");
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 83:
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 40:
+page.svelte (dylan toth on 10/14/2024 at 23:24):       moveGridDirection("down");
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 65:
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 37: 
+page.svelte (dylan toth on 10/14/2024 at 23:24):       moveGridDirection("right");
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 68:
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 39: 
+page.svelte (dylan toth on 10/14/2024 at 23:24):       moveGridDirection("left");
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 32:
+page.svelte (dylan toth on 10/14/2024 at 23:24):       togglePlayPause();
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case 13: 
+page.svelte (dylan toth on 10/14/2024 at 23:24):       console.log("is logged in: ", isLoggedIn);
+page.svelte (dylan toth on 10/14/2024 at 23:24):       if (isLoggedIn && accessToken) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):         addCenterSongToPlaylist();
+page.svelte (dylan toth on 10/14/2024 at 23:24):       } else {
+page.svelte (dylan toth on 10/14/2024 at 23:24):         console.log("User must be logged in with Spotify access.");
+page.svelte (dylan toth on 10/14/2024 at 23:24):       }
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24): }
+page.svelte (dylan toth on 10/05/2024 at 22:31):   let touchStartX = 0;
+page.svelte (dylan toth on 10/05/2024 at 22:31):   let touchStartY = 0;
+page.svelte (dylan toth on 10/05/2024 at 22:31):   let touchEndX = 0;
+page.svelte (dylan toth on 10/05/2024 at 22:31):   let touchEndY = 0;
+page.svelte (dylan toth on 10/05/2024 at 22:31):   function handleTouchStart(event) {
+page.svelte (dylan toth on 10/05/2024 at 22:31):     touchStartX = event.changedTouches[0].screenX;
+page.svelte (dylan toth on 10/05/2024 at 22:31):     touchStartY = event.changedTouches[0].screenY;
+page.svelte (dylan toth on 10/05/2024 at 22:31):   }
+page.svelte (dylan toth on 10/05/2024 at 22:31):   function handleTouchEnd(event) {
+page.svelte (dylan toth on 10/05/2024 at 22:31):     touchEndX = event.changedTouches[0].screenX;
+page.svelte (dylan toth on 10/05/2024 at 22:31):     touchEndY = event.changedTouches[0].screenY;
+page.svelte (dylan toth on 10/05/2024 at 22:31):     handleGesture();
+page.svelte (dylan toth on 10/05/2024 at 22:31):   }
+page.svelte (dylan toth on 10/05/2024 at 22:31):   function handleGesture() {
+page.svelte (dylan toth on 10/05/2024 at 22:31):     const deltaX = touchEndX - touchStartX;
+page.svelte (dylan toth on 10/05/2024 at 22:31):     const deltaY = touchEndY - touchStartY;
+page.svelte (dylan toth on 10/05/2024 at 22:31):     if (Math.abs(deltaX) > Math.abs(deltaY)) {
+page.svelte (dylan toth on 10/05/2024 at 22:31):       if (deltaX > 50) {
+page.svelte (dylan toth on 10/05/2024 at 22:31):         // Swipe Right
+page.svelte (dylan toth on 10/05/2024 at 22:31):         debouncedMoveGrid("right");
+page.svelte (dylan toth on 10/05/2024 at 22:31):       } else if (deltaX < -50) {
+page.svelte (dylan toth on 10/05/2024 at 22:31):         // Swipe Left
+page.svelte (dylan toth on 10/05/2024 at 22:31):         debouncedMoveGrid("left");
+page.svelte (dylan toth on 10/05/2024 at 22:31):       }
+page.svelte (dylan toth on 10/05/2024 at 22:31):     } else {
+page.svelte (dylan toth on 10/05/2024 at 22:31):       if (deltaY > 50) {
+page.svelte (dylan toth on 10/05/2024 at 22:31):         // Swipe Down
+page.svelte (dylan toth on 10/05/2024 at 22:31):         debouncedMoveGrid("down");
+page.svelte (dylan toth on 10/05/2024 at 22:31):       } else if (deltaY < -50) {
+page.svelte (dylan toth on 10/05/2024 at 22:31):         // Swipe Up
+page.svelte (dylan toth on 10/05/2024 at 22:31):         debouncedMoveGrid("up");
+page.svelte (dylan toth on 10/05/2024 at 22:31):       }
+page.svelte (dylan toth on 10/05/2024 at 22:31):     }
+page.svelte (dylan toth on 10/05/2024 at 22:31):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   function moveGridToIndex(clickedIndex) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const centerIndex = 4; // Index of the center box in the 3x3 grid
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const gridSize = 3;    // Since it's a 3x3 grid
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const clickedRow = Math.floor(clickedIndex / gridSize);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const clickedCol = clickedIndex % gridSize;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const centerRow = Math.floor(centerIndex / gridSize);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const centerCol = centerIndex % gridSize;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const deltaRow = centerRow - clickedRow;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   const deltaCol = centerCol - clickedCol;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   moveGrid(deltaRow, deltaCol);
+page.svelte (dylan toth on 10/14/2024 at 23:24): }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   async function addCenterSongToPlaylist() {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     console.log("playlistid: ", playlistId)
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("songid: ", boxes[4].songId)
+page.svelte (dylan toth on 10/07/2024 at 22:22):     if (playlistId && boxes[4].songId) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("playlistid: ", playlistId)
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("songid: ", boxes[4].songId)
+page.svelte (dylan toth on 10/07/2024 at 22:22):       try {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         const response = await fetch(
+page.svelte (dylan toth on 10/07/2024 at 22:22):           `https://api.spotify.com/v1/playlists/${playlistId}/tracks`,
+page.svelte (dylan toth on 10/07/2024 at 22:22):           {
+page.svelte (dylan toth on 10/07/2024 at 22:22):             method: "POST",
+page.svelte (dylan toth on 10/07/2024 at 22:22):             headers: {
+page.svelte (dylan toth on 10/07/2024 at 22:22):               Authorization: `Bearer ${accessToken}`,
+page.svelte (dylan toth on 10/07/2024 at 22:22):               "Content-Type": "application/json",
+page.svelte (dylan toth on 10/07/2024 at 22:22):             },
+page.svelte (dylan toth on 10/07/2024 at 22:22):             body: JSON.stringify({
+page.svelte (dylan toth on 10/07/2024 at 22:22):               uris: [`spotify:track:${boxes[4].songId}`], 
+page.svelte (dylan toth on 10/07/2024 at 22:22):             }),
+page.svelte (dylan toth on 10/07/2024 at 22:22):           }
+page.svelte (dylan toth on 10/07/2024 at 22:22):         );
+page.svelte (dylan toth on 10/07/2024 at 22:22):         if (response.ok) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):           console.log(
+page.svelte (dylan toth on 10/07/2024 at 22:22):             `Added ${boxes[4].songName} by ${boxes[4].artistName} to playlist.`
+page.svelte (dylan toth on 10/07/2024 at 22:22):           );
+page.svelte (dylan toth on 10/07/2024 at 22:22):           showCheckmark = true;
+page.svelte (dylan toth on 10/07/2024 at 22:22):           // Hide checkmark after 1.5 seconds and store the timeout
+page.svelte (dylan toth on 10/07/2024 at 22:22):           checkmarkTimeout = setTimeout(() => {
+page.svelte (dylan toth on 10/07/2024 at 22:22):             showCheckmark = false;
+page.svelte (dylan toth on 10/07/2024 at 22:22):           }, 1500);
+page.svelte (dylan toth on 10/07/2024 at 22:22):         } else {
+page.svelte (dylan toth on 10/07/2024 at 22:22):           const errorData = await response.json();
+page.svelte (dylan toth on 10/07/2024 at 22:22):           console.error("Error adding song to playlist:", errorData);
+page.svelte (dylan toth on 10/07/2024 at 22:22):         }
+page.svelte (dylan toth on 10/07/2024 at 22:22):       } catch (err) {
+page.svelte (dylan toth on 10/07/2024 at 22:22):         console.error("Unexpected error adding song to playlist:", err);
+page.svelte (dylan toth on 10/06/2024 at 23:45):       }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     } else {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log(accessToken)
+page.svelte (dylan toth on 10/07/2024 at 22:22):       console.log("Playlist ID or song ID is missing.");
+page.svelte (dylan toth on 10/06/2024 at 23:45):     }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   function moveGridDirection(direction) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):   let deltaRow = 0;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   let deltaCol = 0;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   switch (direction) {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case "up":
+page.svelte (dylan toth on 10/14/2024 at 23:24):       deltaRow = 1;
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case "down":
+page.svelte (dylan toth on 10/14/2024 at 23:24):       deltaRow = -1;
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case "left":
+page.svelte (dylan toth on 10/14/2024 at 23:24):       deltaCol = -1;
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     case "right":
+page.svelte (dylan toth on 10/14/2024 at 23:24):       deltaCol = 1;
+page.svelte (dylan toth on 10/14/2024 at 23:24):       break;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     default:
+page.svelte (dylan toth on 10/14/2024 at 23:24):       console.error("Invalid direction:", direction);
+page.svelte (dylan toth on 10/14/2024 at 23:24):       return;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   moveGrid(deltaRow, deltaCol);
+page.svelte (dylan toth on 10/14/2024 at 23:24): }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   function togglePlayPause() {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     if (audio) {
+page.svelte (dylan toth on 10/06/2024 at 23:45):       if (audio.paused) {
+page.svelte (dylan toth on 10/06/2024 at 23:45):         audio.play().catch((err) => {
+page.svelte (dylan toth on 10/06/2024 at 23:45):           console.error("Error playing preview:", err);
+page.svelte (dylan toth on 10/06/2024 at 23:45):         });
+page.svelte (dylan toth on 10/06/2024 at 23:45):       } else {
+page.svelte (dylan toth on 10/06/2024 at 23:45):         audio.pause();
+page.svelte (dylan toth on 10/06/2024 at 23:45):       }
+page.svelte (dylan toth on 10/06/2024 at 23:45):     }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   function openTutorial() {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     showTutorial.set(true);
+page.svelte (dylan toth on 10/14/2024 at 23:24):   }
+page.svelte (dylan toth on 10/07/2024 at 22:22): <div class="wrapper">
+page.svelte (dylan toth on 10/14/2024 at 23:24):   <button class="info-button" on:click={openTutorial} aria-label="Open Tutorial">
+page.svelte (dylan toth on 10/14/2024 at 23:24):     
+page.svelte (dylan toth on 10/14/2024 at 23:24):   </button>
+page.svelte (dylan toth on 10/07/2024 at 22:22):   {#if $showTutorial}
+page.svelte (dylan toth on 10/07/2024 at 22:22):     <TutorialOverlay on:close={dismissTutorial} />
+page.svelte (dylan toth on 10/07/2024 at 22:22):   {/if}
+page.svelte (dylan toth on 10/07/2024 at 22:22):   <!-- Svelte HTML Template -->
+page.svelte (dylan toth on 10/07/2024 at 22:22):   <div class="info">
+page.svelte (dylan toth on 10/07/2024 at 22:22):     <!-- <p>Use arrow keys or WASD to navigate the discover grid</p>
+page.svelte (dylan toth on 10/06/2024 at 23:45):   <p>
+page.svelte (dylan toth on 10/06/2024 at 23:45):     Press Space to pause/unpause the preview, and Enter to add the song to your
+page.svelte (dylan toth on 10/06/2024 at 23:45):     playlist.
+page.svelte (dylan toth on 10/07/2024 at 22:22):   </p> -->
+page.svelte (dylan toth on 10/07/2024 at 22:22):     <p>Center song is {boxes[4].songName} by {boxes[4].artistName}</p>
+page.svelte (dylan toth on 10/07/2024 at 22:22):     {#if isLoggedIn && accessToken && showCreatePlaylistButton}
+page.svelte (dylan toth on 10/07/2024 at 22:22):       <button class="create-playlist-btn" on:click={createDiscoverPlaylist}>
+page.svelte (dylan toth on 10/07/2024 at 22:22):         Create 'OpenVinyl Discover' Playlist</button>
+page.svelte (dylan toth on 10/07/2024 at 22:22):     {/if}
+page.svelte (dylan toth on 10/07/2024 at 22:22):   </div>
+page.svelte (dylan toth on 10/07/2024 at 22:22):   <div class="game-board">
+page.svelte (dylan toth on 10/07/2024 at 22:22):     {#each boxes as box, index (box.id)}
+page.svelte (dylan toth on 10/14/2024 at 23:24):       <!-- svelte-ignore a11y-click-events-have-key-events -->
+page.svelte (dylan toth on 10/14/2024 at 23:24):       <!-- svelte-ignore a11y-no-static-element-interactions -->
+page.svelte (dylan toth on 10/14/2024 at 23:24):       <div
+page.svelte (dylan toth on 10/14/2024 at 23:24):         class="box"
+page.svelte (dylan toth on 10/14/2024 at 23:24):         class:highlight={index === 4}
+page.svelte (dylan toth on 10/14/2024 at 23:24):         on:click={() => moveGridToIndex(index)}
+page.svelte (dylan toth on 10/14/2024 at 23:24):       >
+page.svelte (dylan toth on 10/07/2024 at 22:22):         <img src={box.imageUrl} alt="{box.songName} by {box.artistName}" />
+page.svelte (dylan toth on 10/07/2024 at 22:22):         {#if index === 4 && showCheckmark}
+page.svelte (dylan toth on 10/07/2024 at 22:22):           <div class="overlay">
+page.svelte (dylan toth on 10/07/2024 at 22:22):             <div class="checkmark"></div>
+page.svelte (dylan toth on 10/07/2024 at 22:22):           </div>
+page.svelte (dylan toth on 10/07/2024 at 22:22):         {/if}
+page.svelte (dylan toth on 10/07/2024 at 22:22):       </div>
+page.svelte (dylan toth on 10/07/2024 at 22:22):     {/each}
+page.svelte (dylan toth on 10/07/2024 at 22:22):   </div>
+page.svelte (dylan toth on 10/05/2024 at 22:31): </div>
+page.svelte (dylan toth on 10/06/2024 at 23:45): <svelte:window
+page.svelte (dylan toth on 10/05/2024 at 22:31):   on:touchstart={handleTouchStart}
+page.svelte (dylan toth on 10/05/2024 at 22:31):   on:touchend={handleTouchEnd}
+page.svelte (dylan toth on 10/05/2024 at 22:31): />
+page.svelte (dylan toth on 10/07/2024 at 22:22):   .wrapper {
+page.svelte (dylan toth on 10/07/2024 at 22:22):   }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   .info {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     display: flex;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     justify-content: center;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     text-align: center;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     flex-direction: column;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     color: white;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     width: 100%;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     max-width: 600px;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     margin: 0 auto;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     box-sizing: border-box;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     padding-left: 10px;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     padding-right: 10px;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     font-family: "Concert One", sans-serif;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/14/2024 at 23:24):   .info-button {
+page.svelte (dylan toth on 10/14/2024 at 23:24):     /* stylig is absolutely cooked */
+page.svelte (dylan toth on 10/14/2024 at 23:24):     background: transparent;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     border: none;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     font-size: 24px;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     cursor: pointer;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     color: white;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     display: flex;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     flex-direction: column;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     text-align: end;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     align-items: end;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     width: 95vw;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     margin-right: 40px;
+page.svelte (dylan toth on 10/14/2024 at 23:24):     margin-top: 20px;
+page.svelte (dylan toth on 10/14/2024 at 23:24):   }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   .game-board {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     display: grid;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     grid-template-columns: repeat(3, 1fr);
+page.svelte (dylan toth on 10/07/2024 at 12:41):     grid-template-rows: repeat(3, auto);
+page.svelte (dylan toth on 10/06/2024 at 23:45):     gap: 10px;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     justify-content: center;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     width: 100%;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     max-width: 620px;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     margin: 0 auto;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     padding-bottom: 50px;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     box-sizing: border-box;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   .box {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     position: relative;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     overflow: hidden;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     background: #444;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     border: 1px solid #555;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     width: 100%;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     max-width: 200px;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     height: auto;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     aspect-ratio: 1 / 1;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     margin: 0 auto;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   .box img {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     position: absolute;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     top: 0;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     left: 0;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     width: 100%;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     height: 100%;
+page.svelte (dylan toth on 10/06/2024 at 23:45):     object-fit: cover;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/06/2024 at 23:45):   .highlight {
+page.svelte (dylan toth on 10/06/2024 at 23:45):     border: 4px solid #1db954;
+page.svelte (dylan toth on 10/06/2024 at 23:45):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   .overlay {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     position: absolute;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     top: 0;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     left: 0;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     width: 100%;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     height: 100%;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     background-color: rgba(144, 238, 144, 0.6);
+page.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     justify-content: center;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     align-items: center;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     animation: fadeInOut 1.5s forwards;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     z-index: 1;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   .checkmark {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     width: 60px;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     height: 60px;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     border-radius: 50%;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     border: 5px solid white;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     position: relative;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     display: flex;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     justify-content: center;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     align-items: center;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     transform: scale(0);
+page.svelte (dylan toth on 10/07/2024 at 12:41):     animation: popIn 0.5s forwards 0.2s;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   .checkmark::before {
+page.svelte (dylan toth on 10/07/2024 at 12:41):     content: "";
+page.svelte (dylan toth on 10/07/2024 at 12:41):     position: absolute;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     width: 15px;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     height: 30px;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     border: solid white;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     border-width: 0 5px 5px 0;
+page.svelte (dylan toth on 10/07/2024 at 12:41):     transform: rotate(45deg);
+page.svelte (dylan toth on 10/07/2024 at 12:41):     animation: drawCheck 0.4s forwards;
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 22:22):   .create-playlist-btn {
+page.svelte (dylan toth on 10/07/2024 at 22:22):   background-color: #1db954; 
+page.svelte (dylan toth on 10/07/2024 at 22:22):   color: white;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   font-weight: 600;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   padding: 10px 20px;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   border: none;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   border-radius: 8px;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
+page.svelte (dylan toth on 10/07/2024 at 22:22):   cursor: pointer;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   font-size: 16px;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   transition: background-color 0.3s ease, transform 0.2s ease;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   margin-bottom: 10px;
+page.svelte (dylan toth on 10/07/2024 at 22:22): }
+page.svelte (dylan toth on 10/07/2024 at 22:22): .create-playlist-btn:hover {
+page.svelte (dylan toth on 10/07/2024 at 22:22):   background-color: #1aa34a;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   transform: scale(1.05); 
+page.svelte (dylan toth on 10/07/2024 at 22:22): }
+page.svelte (dylan toth on 10/07/2024 at 22:22): .create-playlist-btn:focus {
+page.svelte (dylan toth on 10/07/2024 at 22:22):   outline: none;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   box-shadow: 0 0 0 3px rgba(29, 185, 84, 0.4);
+page.svelte (dylan toth on 10/07/2024 at 22:22): }
+page.svelte (dylan toth on 10/07/2024 at 22:22): .create-playlist-btn:active {
+page.svelte (dylan toth on 10/07/2024 at 22:22):   background-color: #188a3e;
+page.svelte (dylan toth on 10/07/2024 at 22:22):   transform: scale(1);
+page.svelte (dylan toth on 10/07/2024 at 22:22): }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   @keyframes fadeInOut {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     0% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       opacity: 0;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     15% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       opacity: 1;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     85% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       opacity: 1;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     100% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       opacity: 0;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   @keyframes popIn {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     0% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       transform: scale(0);
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     80% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       transform: scale(1.2);
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     100% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       transform: scale(1);
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   @keyframes drawCheck {
+page.svelte (dylan toth on 10/07/2024 at 22:22):     0% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       width: 0;
+page.svelte (dylan toth on 10/07/2024 at 22:22):       height: 0;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 22:22):     100% {
+page.svelte (dylan toth on 10/07/2024 at 22:22):       width: 15px;
+page.svelte (dylan toth on 10/07/2024 at 22:22):       height: 30px;
+page.svelte (dylan toth on 10/07/2024 at 22:22):     }
+page.svelte (dylan toth on 10/07/2024 at 12:41):   }
post.svelte  (dylan toth on 10/05/2024 at 22:05):   export let uuid;
post.svelte  (dylan toth on 10/05/2024 at 22:05):   export let logged_in_user_uuid;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   export let rating;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   export let profile_pic_url = "https://placehold.co/30";
post.svelte  (dylan toth on 10/06/2024 at 20:05):   export let song_artist;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   export let song_title;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   export let song_image;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   let upvotesCount = 0;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   let downvotesCount = 0;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   let userVote = null; // 'upvote', 'downvote', or null
post.svelte  (dylan toth on 10/05/2024 at 22:05):   let username = "";
post.svelte  (dylan toth on 10/14/2024 at 23:24):   let processingVote = false;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   $: netVotes = upvotesCount - downvotesCount;
post.svelte  (dylan toth on 10/14/2024 at 23:24):       await fetchVoteCounts();
post.svelte  (dylan toth on 10/14/2024 at 23:24):       await checkUserVote();
post.svelte  (dylan toth on 10/12/2024 at 00:21):       .select("username, avatar_url")
post.svelte  (dylan toth on 10/12/2024 at 00:21):     if (data) {
post.svelte  (dylan toth on 10/12/2024 at 00:21):       username = data.username;
post.svelte  (dylan toth on 10/12/2024 at 00:21):       profile_pic_url = data.avatar_url;
post.svelte  (dylan toth on 10/12/2024 at 00:21):     }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   async function fetchVoteCounts() {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     const { count: upvotesCountData, error: upvotesError } = await supabase
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .from("likes")
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .select("id", { count: "exact" })
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .eq("post_id", post_id)
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .eq("isLiked", true);
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (upvotesError) throw upvotesError;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     upvotesCount = upvotesCountData || 0;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     const { count: downvotesCountData, error: downvotesError } = await supabase
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .from("likes")
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .select("id", { count: "exact" })
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .eq("post_id", post_id)
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .eq("isLiked", false);
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (downvotesError) throw downvotesError;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     downvotesCount = downvotesCountData || 0;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   async function checkUserVote() {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     const { data: existingVote, error } = await supabase
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .select("id, isLiked")
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (error) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       console.error("Error checking user vote:", error);
post.svelte  (dylan toth on 10/11/2024 at 17:06):       return;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     }
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (existingVote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       userVote = existingVote.isLiked ? "upvote" : "downvote";
post.svelte  (dylan toth on 10/14/2024 at 23:24):     } else {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       userVote = null;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   async function toggleVote(voteType) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):   if (processingVote || !logged_in_user_uuid) return;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   processingVote = true;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   try {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     const { data: existingVote, error } = await supabase
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .from("likes")
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .select("*")
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .eq("post_id", post_id)
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .eq("profile_id", logged_in_user_uuid)
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .maybeSingle();
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (error) throw error;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (existingVote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       if (
post.svelte  (dylan toth on 10/14/2024 at 23:24):         (existingVote.isLiked && voteType === "upvote") ||
post.svelte  (dylan toth on 10/14/2024 at 23:24):         (!existingVote.isLiked && voteType === "downvote")
post.svelte  (dylan toth on 10/14/2024 at 23:24):       ) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):         // Remove the vote
post.svelte  (dylan toth on 10/14/2024 at 23:24):         await removeVote(existingVote.id, existingVote.isLiked);
post.svelte  (dylan toth on 10/14/2024 at 23:24):         // Update the vote
post.svelte  (dylan toth on 10/14/2024 at 23:24):         await updateVote(
post.svelte  (dylan toth on 10/14/2024 at 23:24):           existingVote.id,
post.svelte  (dylan toth on 10/14/2024 at 23:24):           voteType === "upvote",
post.svelte  (dylan toth on 10/14/2024 at 23:24):           existingVote.isLiked
post.svelte  (dylan toth on 10/14/2024 at 23:24):         );
post.svelte  (dylan toth on 10/14/2024 at 23:24):     } else {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       // Add new vote
post.svelte  (dylan toth on 10/14/2024 at 23:24):       await addVote(voteType === "upvote");
post.svelte  (dylan toth on 10/14/2024 at 23:24):   } catch (err) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     console.error("Error toggling vote:", err);
post.svelte  (dylan toth on 10/14/2024 at 23:24):     alert("Failed to process your vote. Please try again.");
post.svelte  (dylan toth on 10/14/2024 at 23:24):   } finally {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     processingVote = false;
post.svelte  (dylan toth on 10/14/2024 at 23:24): }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   async function addVote(isUpvote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .insert({
post.svelte  (dylan toth on 10/14/2024 at 23:24):         post_id,
post.svelte  (dylan toth on 10/14/2024 at 23:24):         profile_id: logged_in_user_uuid,
post.svelte  (dylan toth on 10/14/2024 at 23:24):         isLiked: isUpvote,
post.svelte  (dylan toth on 10/14/2024 at 23:24):       });
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (isUpvote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       upvotesCount += 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):       userVote = "upvote";
post.svelte  (dylan toth on 10/14/2024 at 23:24):     } else {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       downvotesCount += 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):       userVote = "downvote";
post.svelte  (dylan toth on 10/14/2024 at 23:24):     }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   async function updateVote(voteId, isUpvote, wasUpvote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):   console.log("Attempting to update vote:", { voteId, isUpvote, wasUpvote });
post.svelte  (dylan toth on 10/14/2024 at 23:24):   const { data, error } = await supabase
post.svelte  (dylan toth on 10/14/2024 at 23:24):     .from("likes")
post.svelte  (dylan toth on 10/14/2024 at 23:24):     .update({ isLiked: isUpvote })
post.svelte  (dylan toth on 10/14/2024 at 23:24):     .eq("id", voteId)
post.svelte  (dylan toth on 10/14/2024 at 23:24):     .eq("profile_id", logged_in_user_uuid)
post.svelte  (dylan toth on 10/14/2024 at 23:24):     .select();
post.svelte  (dylan toth on 10/14/2024 at 23:24):   if (error) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     console.error("Error updating vote:", error);
post.svelte  (dylan toth on 10/14/2024 at 23:24):     throw error;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   if (!data || data.length === 0) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     console.error("Update failed: No rows affected.");
post.svelte  (dylan toth on 10/14/2024 at 23:24):     return;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   console.log("Update successful:", data);
post.svelte  (dylan toth on 10/14/2024 at 23:24):   // Adjust counts
post.svelte  (dylan toth on 10/14/2024 at 23:24):   if (wasUpvote && !isUpvote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     upvotesCount -= 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     downvotesCount += 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   } else if (!wasUpvote && isUpvote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     upvotesCount += 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     downvotesCount -= 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   userVote = isUpvote ? "upvote" : "downvote";
post.svelte  (dylan toth on 10/14/2024 at 23:24): }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   async function removeVote(voteId, wasUpvote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       .eq("id", voteId);
post.svelte  (dylan toth on 10/14/2024 at 23:24):     if (wasUpvote) {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       upvotesCount -= 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     } else {
post.svelte  (dylan toth on 10/14/2024 at 23:24):       downvotesCount -= 1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     }
post.svelte  (dylan toth on 10/14/2024 at 23:24):     userVote = null;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   // Convert 10 scale to 5 for display purposes only (maybe fix later)
post.svelte  (dylan toth on 10/05/2024 at 22:05):   function renderStars() {
post.svelte  (dylan toth on 10/05/2024 at 22:05):     const stars = [];
post.svelte  (dylan toth on 10/05/2024 at 22:05):     const ratingOutOfFive = rating / 2;
post.svelte  (dylan toth on 10/05/2024 at 22:05):     for (let i = 1; i <= 5; i++) {
post.svelte  (dylan toth on 10/05/2024 at 22:05):       if (ratingOutOfFive >= i) {
post.svelte  (dylan toth on 10/05/2024 at 22:52):         stars.push('<i class="fa-solid fa-star"></i>');
post.svelte  (dylan toth on 10/05/2024 at 22:05):       } else if (ratingOutOfFive >= i - 0.5) {
post.svelte  (dylan toth on 10/05/2024 at 22:52):         stars.push('<i class="fa-regular fa-star-half-stroke"></i>');
post.svelte  (dylan toth on 10/05/2024 at 22:05):       } else {
post.svelte  (dylan toth on 10/06/2024 at 20:05):         stars.push('<i class="fa-regular fa-star"></i>');
post.svelte  (dylan toth on 10/05/2024 at 22:05):       }
post.svelte  (dylan toth on 10/05/2024 at 22:05):     }
post.svelte  (dylan toth on 10/06/2024 at 20:05):     return stars.join("");
post.svelte  (dylan toth on 10/05/2024 at 22:05):   }
post.svelte  (dylan toth on 10/05/2024 at 22:05): </script>
post.svelte  (dylan toth on 10/05/2024 at 22:05): <div class="wrapper">
post.svelte  (dylan toth on 10/05/2024 at 22:05):   <div class="top-bar">
post.svelte  (dylan toth on 10/05/2024 at 22:05):     <div class="user-info">
post.svelte  (dylan toth on 10/05/2024 at 22:05):       <img class="profile-pic" src={profile_pic_url} alt="profile" />
post.svelte  (dylan toth on 10/11/2024 at 17:06):       <span class="username">
post.svelte  (dylan toth on 10/11/2024 at 17:06):         <a class="username-link" href="/profiles/{username}">{username}</a>
post.svelte  (dylan toth on 10/11/2024 at 17:06):       </span>
post.svelte  (dylan toth on 10/05/2024 at 22:05):     </div>
post.svelte  (dylan toth on 10/05/2024 at 22:05):   <div class="content-wrapper">
post.svelte  (dylan toth on 10/11/2024 at 16:49):     <div class="album-cover-container">
post.svelte  (dylan toth on 10/11/2024 at 16:49):       <img
post.svelte  (dylan toth on 10/11/2024 at 16:49):         class="album-cover"
post.svelte  (dylan toth on 10/11/2024 at 16:49):         src={song_image ? song_image : "https://placehold.co/300"}
post.svelte  (dylan toth on 10/11/2024 at 16:49):         alt="album cover"
post.svelte  (dylan toth on 10/11/2024 at 16:49):       />
post.svelte  (dylan toth on 10/11/2024 at 16:49):       <a href="/discover/{song_id}" class="play-button" aria-label="Play Song">
post.svelte  (dylan toth on 10/14/2024 at 23:24):         <i class="fa-solid fa-play"></i>
post.svelte  (dylan toth on 10/11/2024 at 16:49):       </a>
post.svelte  (dylan toth on 10/11/2024 at 16:49):     </div>
post.svelte  (dylan toth on 10/06/2024 at 17:09):       <p class="song-name">{song_title ? song_title : "Song Name"}</p>
post.svelte  (dylan toth on 10/06/2024 at 15:30):       <p class="artist-name">{song_artist ? song_artist : "Artist Name"}</p>
post.svelte  (dylan toth on 10/06/2024 at 20:05):     <div>
post.svelte  (dylan toth on 10/06/2024 at 20:05):         <p>{@html renderStars()}</p>
post.svelte  (dylan toth on 10/06/2024 at 20:05):       </div>
post.svelte  (dylan toth on 10/14/2024 at 23:24):       <div class="vote-section">
post.svelte  (dylan toth on 10/06/2024 at 20:05):         <button
post.svelte  (dylan toth on 10/14/2024 at 23:24):           on:click={() => toggleVote('upvote')}
post.svelte  (dylan toth on 10/14/2024 at 23:24):           disabled={!logged_in_user_uuid || processingVote}
post.svelte  (dylan toth on 10/14/2024 at 23:24):           class="vote-button upvote-button"
post.svelte  (dylan toth on 10/14/2024 at 23:24):           aria-label="Upvote"
post.svelte  (dylan toth on 10/14/2024 at 23:24):           class:selected={userVote === 'upvote'}
post.svelte  (dylan toth on 10/06/2024 at 20:05):         >
post.svelte  (dylan toth on 10/14/2024 at 23:24):           <i class="fa-solid fa-arrow-up"></i>
post.svelte  (dylan toth on 10/14/2024 at 23:24):         </button>
post.svelte  (dylan toth on 10/14/2024 at 23:24):         <span class="net-vote-count">{netVotes}</span>
post.svelte  (dylan toth on 10/14/2024 at 23:24):         <button
post.svelte  (dylan toth on 10/14/2024 at 23:24):           on:click={() => toggleVote('downvote')}
post.svelte  (dylan toth on 10/14/2024 at 23:24):           disabled={!logged_in_user_uuid || processingVote}
post.svelte  (dylan toth on 10/14/2024 at 23:24):           class="vote-button downvote-button"
post.svelte  (dylan toth on 10/14/2024 at 23:24):           aria-label="Downvote"
post.svelte  (dylan toth on 10/14/2024 at 23:24):           class:selected={userVote === 'downvote'}
post.svelte  (dylan toth on 10/14/2024 at 23:24):         >
post.svelte  (dylan toth on 10/14/2024 at 23:24):           <i class="fa-solid fa-arrow-down"></i>
post.svelte  (dylan toth on 10/06/2024 at 20:05):         </button>
post.svelte  (dylan toth on 10/06/2024 at 20:05):       </div>
post.svelte  (dylan toth on 10/05/2024 at 22:05):   </div>
post.svelte  (dylan toth on 10/05/2024 at 22:52):   *,
post.svelte  (dylan toth on 10/06/2024 at 20:05):   *::before,
post.svelte  (dylan toth on 10/06/2024 at 20:05):   *::after {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     box-sizing: border-box;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   .vote-section {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     display: flex;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     align-items: center;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     margin-top: 10px;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     justify-content: center;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   .vote-button {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     background-color: transparent;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     border: none;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     cursor: pointer;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     color: #f3f1f1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     font-size: 1.5rem;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     margin: 0 10px;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     transition: color 0.3s, transform 0.1s;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   .vote-button:hover {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     color: #1db954;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   .vote-button.selected {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     color: #1db954;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     transform: translateY(2px);
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   .net-vote-count {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     font-size: 1.2rem;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     margin: 0 10px;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     color: #f3f1f1;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     min-width: 20px;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     text-align: center;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/14/2024 at 23:24):   .vote-button:disabled {
post.svelte  (dylan toth on 10/14/2024 at 23:24):     cursor: not-allowed;
post.svelte  (dylan toth on 10/14/2024 at 23:24):     opacity: 0.5;
post.svelte  (dylan toth on 10/14/2024 at 23:24):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):     display: flex;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     flex-direction: column;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     background-color: #1d1f25;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     width: 70%;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     margin: 20px auto;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     padding: 10px;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     color: #f3f1f1;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     border: 1px solid #26282c;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     font-family: "Concert One", sans-serif;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     min-height: 150px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     border-radius: 8px;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .top-bar {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     display: flex;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     align-items: center;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     justify-content: space-between;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     background-color: #26282c;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     padding: 10px;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     width: 100%;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     box-sizing: border-box;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     border-radius: 8px 8px 0 0;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .user-info {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     display: flex;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     align-items: center;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .profile-pic {
post.svelte  (dylan toth on 10/11/2024 at 17:10):     width: 25px;
post.svelte  (dylan toth on 10/11/2024 at 17:10):     height: 25px;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     border-radius: 50%;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     margin-right: 10px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     object-fit: cover;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .username {
post.svelte  (dylan toth on 10/11/2024 at 17:10):     font-size: 0.8rem;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     color: #b9b9b9;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .username-link {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     text-decoration: none;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     color: #b9b9b9;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .right-section {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     display: flex;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     align-items: center;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .discover-button {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     background-color: transparent;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     border: none;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     cursor: pointer;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     color: #f3f1f1;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 1.2rem;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     transition: color 0.3s;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .discover-button:hover {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     color: #6a6a6a;
post.svelte  (dylan toth on 10/05/2024 at 22:05):   .content-wrapper {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     display: flex;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     align-items: flex-start;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     margin-top: 20px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     flex-wrap: wrap;
post.svelte  (dylan toth on 10/11/2024 at 16:49):   .album-cover-container {
post.svelte  (dylan toth on 10/11/2024 at 16:49):     position: relative;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     /* width: 100%; */
post.svelte  (dylan toth on 10/11/2024 at 17:06):     max-width: 100px; /* Optional: Limit maximum width */
post.svelte  (dylan toth on 10/11/2024 at 17:06):     height: auto;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     margin-right: 15px;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     flex-shrink: 0;
post.svelte  (dylan toth on 10/11/2024 at 16:49):   }
post.svelte  (dylan toth on 10/11/2024 at 16:49):   .album-cover {
post.svelte  (dylan toth on 10/11/2024 at 16:49):     width: 100%;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     height: auto;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     object-fit: cover;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     /* border-radius: 8px; */
post.svelte  (dylan toth on 10/11/2024 at 16:49):   }
post.svelte  (dylan toth on 10/11/2024 at 16:49):   .play-button {
post.svelte  (dylan toth on 10/11/2024 at 16:49):     position: absolute;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     top: 50%;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     left: 50%;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     transform: translate(-50%, -50%);
post.svelte  (dylan toth on 10/11/2024 at 16:49):     color: white;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 2rem;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     background-color: rgba(0, 0, 0, 0.6);
post.svelte  (dylan toth on 10/11/2024 at 16:49):     border-radius: 50%;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     padding: 15px;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     opacity: 0;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     transition: opacity 0.3s, background-color 0.3s;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     text-decoration: none;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     display: flex;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     align-items: center;
post.svelte  (dylan toth on 10/11/2024 at 16:49):     justify-content: center;
post.svelte  (dylan toth on 10/11/2024 at 16:49):   }
post.svelte  (dylan toth on 10/11/2024 at 16:49):   .album-cover-container:hover .play-button {
post.svelte  (dylan toth on 10/11/2024 at 16:49):     opacity: 1;
post.svelte  (dylan toth on 10/11/2024 at 16:49):   }
post.svelte  (dylan toth on 10/11/2024 at 16:49):   .play-button:hover {
post.svelte  (dylan toth on 10/11/2024 at 16:49):     background-color: rgba(0, 0, 0, 0.8);
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .song-info-wrapper {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     flex: 1;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     margin-left: 15px;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .song-name {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 1.5rem;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     margin: 0;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     color: #e4e4e4;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .artist-name {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 1rem;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     color: #b9b9b9;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   .rating-wrapper {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     display: flex;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     flex-direction: column;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     align-items: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     margin-top: 10px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-section {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     display: flex;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     align-items: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     justify-content: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     margin-top: 10px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-button {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     background-color: transparent;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     border: none;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     cursor: pointer;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     color: #f3f1f1;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     display: flex;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     align-items: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     padding: 0;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 1.2rem;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     transition: color 0.3s;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-button:hover {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     color: #007bff;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-button .fa-heart {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     margin-right: 5px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 1rem;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     transition: color 0.3s;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-button .fa-heart.liked {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     color: #007bff;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-text {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     min-width: 45px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     display: inline-block;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 0.9rem;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     color: #f3f1f1;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     transition: color 0.3s;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-text.liked {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     color: #007bff;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-count {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     width: 24px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     height: 24px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     margin-left: 5px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     text-align: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     background-color: #007bff;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     color: white;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     border-radius: 50%;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     font-size: 0.8rem;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     display: flex;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     align-items: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     justify-content: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):   }
post.svelte  (dylan toth on 10/11/2024 at 17:06):   .like-button:disabled {
post.svelte  (dylan toth on 10/11/2024 at 17:06):     cursor: not-allowed;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     opacity: 0.6;
post.svelte  (dylan toth on 10/06/2024 at 20:05):   }
post.svelte  (dylan toth on 10/06/2024 at 20:05):   @media (max-width: 768px) {
post.svelte  (dylan toth on 10/06/2024 at 20:05):     .wrapper {
post.svelte  (dylan toth on 10/06/2024 at 20:05):       width: 90%;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     }
post.svelte  (dylan toth on 10/06/2024 at 20:05):     .content-wrapper {
post.svelte  (dylan toth on 10/06/2024 at 20:05):       flex-direction: column;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       align-items: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     }
post.svelte  (dylan toth on 10/11/2024 at 17:06):     .album-cover-container {
post.svelte  (dylan toth on 10/11/2024 at 17:06):       width: 100%;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       /* width: 50px; Fixed width on desktop */
post.svelte  (dylan toth on 10/11/2024 at 17:06):       /* height: auto; */
post.svelte  (dylan toth on 10/11/2024 at 17:06):       max-width: 100%;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       margin-right: 0;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       margin-bottom: 20px;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     }
post.svelte  (dylan toth on 10/06/2024 at 20:05):     .album-cover {
post.svelte  (dylan toth on 10/06/2024 at 20:05):       width: 100%;
post.svelte  (dylan toth on 10/06/2024 at 20:05):       height: auto;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       border-radius: 8px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     }
post.svelte  (dylan toth on 10/11/2024 at 17:06):     .song-info-wrapper {
post.svelte  (dylan toth on 10/11/2024 at 17:06):       margin-left: 0;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       text-align: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       margin-top: 10px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     }
post.svelte  (dylan toth on 10/11/2024 at 17:06):     .rating-wrapper {
post.svelte  (dylan toth on 10/11/2024 at 17:06):       margin-top: 15px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     }
post.svelte  (dylan toth on 10/11/2024 at 17:06):     .like-section {
post.svelte  (dylan toth on 10/11/2024 at 17:06):       justify-content: center;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       margin-top: 15px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     }
post.svelte  (dylan toth on 10/11/2024 at 17:06):     .like-button .fa-heart {
post.svelte  (dylan toth on 10/11/2024 at 17:06):       margin-right: 5px;
post.svelte  (dylan toth on 10/11/2024 at 17:06):       font-size: 1rem;
post.svelte  (dylan toth on 10/11/2024 at 17:06):     }
post.svelte  (dylan toth on 10/11/2024 at 17:06):     .like-text {
post.svelte  (dylan toth on 10/11/2024 at 17:06):       font-size: 0.9rem;
post.svelte  (dylan toth on 10/06/2024 at 20:05):     }
post.svelte  (dylan toth on 10/06/2024 at 20:05): </style>